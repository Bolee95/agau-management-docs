<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">contracts</li><li class="chapter-item "><a href="contracts/admin-ops/index.html">❱ admin-ops</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/admin-ops/IOpsEvents.sol/interface.IOpsEvents.html">IOpsEvents</a></li><li class="chapter-item "><a href="contracts/admin-ops/OpsBaseProcessor.sol/abstract.OpsBaseProcessor.html">OpsBaseProcessor</a></li><li class="chapter-item "><a href="contracts/admin-ops/OpsProcessor.sol/contract.OpsProcessor.html">OpsProcessor</a></li><li class="chapter-item "><a href="contracts/admin-ops/OpsStorage.sol/contract.OpsStorage.html">OpsStorage</a></li><li class="chapter-item "><a href="contracts/admin-ops/OpsTypes.sol/library.OpsTypes.html">OpsTypes</a></li></ol></li><li class="chapter-item "><a href="contracts/bridge/index.html">❱ bridge</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/bridge/BridgeInteractor.sol/abstract.BridgeInteractor.html">BridgeInteractor</a></li><li class="chapter-item "><a href="contracts/bridge/BridgeMediator.sol/contract.BridgeMediator.html">BridgeMediator</a></li><li class="chapter-item "><a href="contracts/bridge/BridgeMessagesMapper.sol/abstract.BridgeMessagesMapper.html">BridgeMessagesMapper</a></li><li class="chapter-item "><a href="contracts/bridge/BridgeModeSwitch.sol/abstract.BridgeModeSwitch.html">BridgeModeSwitch</a></li></ol></li><li class="chapter-item "><a href="contracts/certificates/index.html">❱ certificates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/certificates/Certificates.sol/contract.Certificates.html">Certificates</a></li><li class="chapter-item "><a href="contracts/certificates/ERC1155D.sol/abstract.ERC1155D.html">ERC1155D</a></li><li class="chapter-item "><a href="contracts/certificates/URIBuilder.sol/contract.URIBuilder.html">URIBuilder</a></li></ol></li><li class="chapter-item "><a href="contracts/certs-management/index.html">❱ certs-management</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/certs-management/common/index.html">❱ common</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/certs-management/common/BaseManagementStorage.sol/contract.BaseManagementStorage.html">BaseManagementStorage</a></li><li class="chapter-item "><a href="contracts/certs-management/common/IRequestsEvents.sol/interface.IRequestsEvents.html">IRequestsEvents</a></li></ol></li><li class="chapter-item "><a href="contracts/certs-management/redemption/index.html">❱ redemption</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/certs-management/redemption/RedemptionProcessor.sol/contract.RedemptionProcessor.html">RedemptionProcessor</a></li><li class="chapter-item "><a href="contracts/certs-management/redemption/RedemptionStorage.sol/contract.RedemptionStorage.html">RedemptionStorage</a></li></ol></li><li class="chapter-item "><a href="contracts/certs-management/tokenization/index.html">❱ tokenization</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/certs-management/tokenization/TokenizationProcessor.sol/contract.TokenizationProcessor.html">TokenizationProcessor</a></li><li class="chapter-item "><a href="contracts/certs-management/tokenization/TokenizationStorage.sol/contract.TokenizationStorage.html">TokenizationStorage</a></li></ol></li></ol></li><li class="chapter-item "><a href="contracts/common/index.html">❱ common</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/common/ArrayUtils.sol/library.ArrayUtils.html">ArrayUtils</a></li><li class="chapter-item "><a href="contracts/common/BaseProcessor.sol/abstract.BaseProcessor.html">BaseProcessor</a></li><li class="chapter-item "><a href="contracts/common/BridgeInterable.sol/abstract.BridgeInterable.html">BridgeInterable</a></li><li class="chapter-item "><a href="contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></li><li class="chapter-item "><a href="contracts/common/HolderWallet.sol/contract.HolderWallet.html">HolderWallet</a></li><li class="chapter-item "><a href="contracts/common/RelayerAware.sol/abstract.RelayerAware.html">RelayerAware</a></li><li class="chapter-item "><a href="contracts/common/WalletManager.sol/contract.WalletManager.html">WalletManager</a></li></ol></li><li class="chapter-item "><a href="contracts/forwarder/index.html">❱ forwarder</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/forwarder/Forwarder.sol/contract.Forwarder.html">Forwarder</a></li></ol></li><li class="chapter-item "><a href="contracts/multistep/index.html">❱ multistep</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/multistep/Process.sol/struct.Signature.html">Signature</a></li><li class="chapter-item "><a href="contracts/multistep/Process.sol/struct.Process.html">Process</a></li><li class="chapter-item "><a href="contracts/multistep/Process.sol/library.ProcessLib.html">ProcessLib</a></li><li class="chapter-item "><a href="contracts/multistep/ProcessFactory.sol/contract.ProcessFactory.html">ProcessFactory</a></li><li class="chapter-item "><a href="contracts/multistep/ProcessManager.sol/contract.ProcessManager.html">ProcessManager</a></li><li class="chapter-item "><a href="contracts/multistep/ProcessTypes.sol/constants.ProcessTypes.html">ProcessTypes constants</a></li><li class="chapter-item "><a href="contracts/multistep/Step.sol/struct.Step.html">Step</a></li><li class="chapter-item "><a href="contracts/multistep/Step.sol/library.StepLib.html">StepLib</a></li></ol></li><li class="chapter-item "><a href="contracts/roles/index.html">❱ roles</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/roles/BaseRoleProcessor.sol/abstract.BaseRoleProcessor.html">BaseRoleProcessor</a></li><li class="chapter-item "><a href="contracts/roles/RoleAssignProcessor.sol/contract.RoleAssignProcessor.html">RoleAssignProcessor</a></li><li class="chapter-item "><a href="contracts/roles/RoleRemoveProcessor.sol/contract.RoleRemoveProcessor.html">RoleRemoveProcessor</a></li><li class="chapter-item "><a href="contracts/roles/RoleRequestsStorage.sol/contract.RoleRequestsStorage.html">RoleRequestsStorage</a></li><li class="chapter-item "><a href="contracts/roles/RolesManager.sol/contract.RolesManager.html">RolesManager</a></li></ol></li><li class="chapter-item "><a href="contracts/shipment/index.html">❱ shipment</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/shipment/inbound/index.html">❱ inbound</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/shipment/inbound/InboundShipmentProcessor.sol/contract.InboundShipmentProcessor.html">InboundShipmentProcessor</a></li><li class="chapter-item "><a href="contracts/shipment/inbound/InboundShipmentStorage.sol/contract.InboundShipmentStorage.html">InboundShipmentStorage</a></li></ol></li><li class="chapter-item "><a href="contracts/shipment/outbound/index.html">❱ outbound</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/shipment/outbound/OutboundShipmentProcessor.sol/contract.OutboundShipmentProcessor.html">OutboundShipmentProcessor</a></li><li class="chapter-item "><a href="contracts/shipment/outbound/OutboundShipmentStorage.sol/contract.OutboundShipmentStorage.html">OutboundShipmentStorage</a></li></ol></li><li class="chapter-item "><a href="contracts/shipment/BaseShipmentStorage.sol/abstract.BaseShipmentStorage.html">BaseShipmentStorage</a></li><li class="chapter-item "><a href="contracts/shipment/SharedShipmentStorage.sol/contract.SharedShipmentStorage.html">SharedShipmentStorage</a></li><li class="chapter-item "><a href="contracts/shipment/ShipmentTypes.sol/library.ShipmentTypes.html">ShipmentTypes</a></li><li class="chapter-item "><a href="contracts/shipment/ShipmentUtils.sol/library.ShipmentUtils.html">ShipmentUtils</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MOONSTRUCK-team/agau-management" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="agau-management-protocol"><a class="header" href="#agau-management-protocol">AgAu Management Protocol</a></h1>
<p>The following is a brief description of the AgAu Management Protocol, which is a Layer 2 part of the AgAu project, contained from this repo with managment contracts deployed on Gnosis Chain and L1 part intended for Ethereum.</p>
<h2 id="developer-guide"><a class="header" href="#developer-guide"><a href="index.html#developer-guide">Developer Guide</a></a></h2>
<h3 id="directory-structure"><a class="header" href="#directory-structure"><a href="index.html#directory-structure">Directory Structure</a></a></h3>
<pre><code class="language-txt">scripts/
|- config/ - &quot;Contract configuration files&quot;
|-- bridge/ - &quot;Bridge configuration files&quot;
|-- gas/ - &quot;Gas tests configuration files&quot;
|-- process/ - &quot;Processes configuration files&quot;
|-- roles/ - &quot;Roles configuration files&quot;
|- helpers - &quot;Helper functions&quot;
|- full-deployment.ts - &quot;Contracts deployment function&quot;
contracts/ - &quot;Solidity contracts&quot;
|- admin-ops/ - &quot;Admin operations contracts&quot;
|- certificates/ - &quot;NFT Warehouse Certificates contracts&quot;
|- certs-management/ - &quot;Certificates management contracts&quot;
|- common/ - &quot;Common contracts&quot;
|- forwarder/ - &quot;Forwarder contracts&quot;
|- multistep/ - &quot;Multistep processes definition contracts&quot;
|- roles/ - &quot;RBAC contracts&quot;
|- shipment/ - &quot;Shipment contracts&quot;
|-- inbound/ - &quot;Inbound shipment contracts&quot;
|-- outbound/ - &quot;Outbound shipment contracts&quot;
tests/ - &quot;Unit and intregration tests&quot;
|- lib/ - &quot;Libraries for tests&quot;
|- benchmark/ - &quot;Gas usage tests&quot;
|- unit/ - &quot;Unit tests&quot;
.env - &quot;Real environment vars&quot;
.env.example - &quot;Example environment vars&quot;
.eslintignore - &quot;Ignore list for eslint&quot;
.eslintrc - &quot;eslint configuration&quot;
.gitignore - &quot;Ignore list for Git&quot;
.gitmodules - &quot;Git submodules&quot;
.prettierignore - &quot;Ignore list for Prettier&quot;
.prettierrc.json - &quot;Prettier configuration
.solcover.js - &quot;Hardhat Coverage configuration&quot;
.solhint.json - &quot;Solidity linter configuration&quot;
.solhintignore - &quot;Ignore list for Solidity linter&quot;
deployments.json - &quot;Contract deployment addresses per network&quot;
foundry.toml - &quot;Foundry configuration&quot;
hardhat.config.ts - &quot;Hardhat configuration&quot;
package-lock.json - &quot;Node dependencies lock&quot;
package.json - &quot;Node dependencies&quot;
slither.config.json - &quot;Slither configuration&quot;
tenderly.config.js - &quot;Tenderly configuration&quot;
tsconfig.json - &quot;Typescript configuration &quot;
</code></pre>
<p>--- <em>(not an extensive list of all files)</em> ---</p>
<p> </p>
<h2 id="frameworks-used"><a class="header" href="#frameworks-used"><a href="index.html#frameworks-used">Frameworks used</a></a></h2>
<h4 id="foundry"><a class="header" href="#foundry"><a href="https://book.getfoundry.sh">Foundry</a></a></h4>
<p>Foundry is being used the most during development cycle for testing and debugging. </p>
<p>Configuration details can be found in <a href="./foundry.toml">foundry.toml</a>.</p>
<h4 id="hardhat"><a class="header" href="#hardhat"><a href="https://hardhat.org/getting-started/">Hardhat</a></a></h4>
<p>Hardhat is being used for utility tasks, such as documentation generation, as well as for deployment.</p>
<p>Configuration details can be found in <a href="./hardhat.config.ts">hardhat.config.ts</a>, which inherits from <a href="./foundry.toml">foundry.toml</a>.</p>
<p> </p>
<h2 id="external-dependencies"><a class="header" href="#external-dependencies"><a href="index.html#external-dependencies">External dependencies</a></a></h2>
<h4 id="gnosis-amb-bridge"><a class="header" href="#gnosis-amb-bridge"><a href="https://docs.gnosischain.com/bridges/tokenbridge/amb-bridge/">Gnosis AMB Bridge</a></a></h4>
<p>Gnosis AMB Bridge is being used for cross-chain communication between L2 and L1 protocol contracts and vice versa. The bridge is predeployed on couple of networks and the proper configuration of <code>.env</code> file is needed to properly interact with it.</p>
<h3 id="project-setup"><a class="header" href="#project-setup"><a href="index.html#project-setup">Project setup</a></a></h3>
<h4 id="clone-the-repository"><a class="header" href="#clone-the-repository"><a href="index.html#clone-the-repository">Clone the repository</a></a></h4>
<pre><code class="language-sh">git clone https://github.com/MOONSTRUCK-team/agau-management.git
</code></pre>
<h4 id="install-nodejs--npm"><a class="header" href="#install-nodejs--npm"><a href="index.html#install-nodejs--npm">Install Node.js / NPM</a></a></h4>
<pre><code class="language-sh">npm install -g npm
</code></pre>
<h4 id="copy-over-a-new-env-file"><a class="header" href="#copy-over-a-new-env-file"><a href="index.html#copy-over-a-new-env-file">Copy over a new <code>.env</code> file</a></a></h4>
<pre><code class="language-sh">cp .env.example .env
</code></pre>
<p>The variables description is the following:</p>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody>
<tr><td>VERBOSE</td><td>Flag for verbose mode</td></tr>
<tr><td>VERIFY_CONTRACTS</td><td>Flag to verify contracts on Etherscan</td></tr>
<tr><td>GAS_MODE</td><td>Flag for gas mode</td></tr>
<tr><td>DOC_GEN_LOCAL_PATH</td><td>Path to generate documentation</td></tr>
<tr><td>MNEMONIC</td><td>Mnemonic phrase for wallet</td></tr>
<tr><td>GNOSISSCAN_API_KEY</td><td>API key for Gnosisscan. Mandatory only for verify</td></tr>
<tr><td>CHIADO_API_KEY</td><td>API key for Chiado. Mandatory only for verify</td></tr>
<tr><td>PUBLIC_BASE_URI</td><td>Base URI for public metadata</td></tr>
<tr><td>PRIVATE_BASE_URI</td><td>Base URI for private metadata</td></tr>
<tr><td>RELAYER</td><td>Address of the relayer wallet to execute transaction on behalf of others</td></tr>
<tr><td>AMB_CONTRACT</td><td>Address of the AMB bridge contract</td></tr>
<tr><td>FOREIGN_MEDIATOR</td><td>Address of the foreign mediator contract</td></tr>
<tr><td>CUSTODY_WALLET</td><td>Address of the custody wallet</td></tr>
</tbody></table>
</div>
<h4 id="install-node-dependencies"><a class="header" href="#install-node-dependencies"><a href="index.html#install-node-dependencies">Install Node dependencies</a></a></h4>
<pre><code class="language-sh">npm ci
</code></pre>
<h4 id="install-foundry"><a class="header" href="#install-foundry"><a href="index.html#install-foundry">Install Foundry</a></a></h4>
<pre><code class="language-sh">curl -L https://foundry.paradigm.xyz | bash
</code></pre>
<p> </p>
<h2 id="available-commands-and-tasks"><a class="header" href="#available-commands-and-tasks"><a href="index.html#commands-and-tasks">Available commands and tasks</a></a></h2>
<p>There are a dozen of the commands available in the <a href="./package.json">package.json</a> file, but here are the most common and useful ones:</p>
<h4 id="run-the-unit-tests-with-forge"><a class="header" href="#run-the-unit-tests-with-forge"><a href="index.html#run-the-unit-tests-with-forge">Run the unit tests with Forge</a></a></h4>
<pre><code class="language-sh">npm run test:unit
</code></pre>
<p>This will run everything in <a href="./test/">test/</a>, which utilizes <a href="https://book.getfoundry.sh/forge/tests">Forge</a> to test contract code.</p>
<h4 id="run-a-benchmark"><a class="header" href="#run-a-benchmark"><a href="index.html#benchmark">Run a benchmark</a></a></h4>
<pre><code class="language-sh">npm run benchmark:snapshot
</code></pre>
<p>Executes a benchmark tests for the gas usage of the core protocol flows. In order to configure the benchmark, the <a href="./scripts/config/gas/config.ts">config</a> file must be updated with the correct values.</p>
<h4 id="deploy-the-contracts-to-desired-network"><a class="header" href="#deploy-the-contracts-to-desired-network"><a href="index.html#deploy-to-network">Deploy the contracts to desired network</a></a></h4>
<p>Create a <a href="./.env">.env</a> file matching the variables seen in <a href="./.env.example">.env.example</a>.
Also, the proper network configuration must be set in <a href="./hardhat.config.ts">hardhat.config.ts</a>.
In order to properly configure the contracts, the <a href="./scripts/config">config</a> folder must be updated with the correct values.</p>
<p><a href="./scripts/config/bridge/config.ts">Configuration of the incoming bridge messages routing</a> is needed to properly configure contracts interacting with the bridge.</p>
<p><a href="./scripts/config/process/config.ts">Configuration of the processes</a> is needed to properly configure processes usage by the core protocol functionalities and flows.</p>
<p><a href="./scripts/config/roles/config.ts">Configuration of the roles</a> is needed to properly assign wallets to roles.</p>
<p>After everything is configured, the following command should be run:</p>
<pre><code class="language-sh">npm run full-deploy &lt;NETWORK_NAME&gt;
</code></pre>
<p>This will automatically update <a href="./deployments.json">deployments.json</a>, which gets exported with your <a href="./package.json">NPM package</a>.</p>
<h4 id="check-the-code-coverage"><a class="header" href="#check-the-code-coverage"><a href="index.html#code-coverage">Check the code coverage</a></a></h4>
<pre><code class="language-sh">npm run coverage
</code></pre>
<h4 id="generate-typescript-types"><a class="header" href="#generate-typescript-types"><a href="index.html#typechain">Generate Typescript types</a></a></h4>
<pre><code class="language-sh">npm run typechain
</code></pre>
<p>Generates a typings based on the smart contract, which will enforce usage of the correct types in the code. This is done automatically after the instalation of the dependencies and later on can be triggered manually.</p>
<h4 id="generate-documentation"><a class="header" href="#generate-documentation"><a href="index.html#generate-documentation">Generate documentation</a></a></h4>
<pre><code class="language-sh">npm run doc
</code></pre>
<p>Sets up API docs from the <a href="https://docs.soliditylang.org/en/latest/natspec-format.html">NatSpec</a> comments in your contract interfaces (ignoring implementations and libraries).</p>
<p>If desired, this can be updated to included all contract comments, and the path can be updated to a different location (such as if you want a seperate <code>docs</code> repository for your project).</p>
<p> </p>
<h2 id="deployments"><a class="header" href="#deployments"><a href="index.html#deployments">Deployments</a></a></h2>
<p>All contract addresses for each network are stored in <a href="./deployments.json">deployments.json</a>.</p>
<p> </p>
<h2 id="github-actions"><a class="header" href="#github-actions"><a href="index.html#github-actions">GitHub Actions</a></a></h2>
<p>This repository comes with couple of <a href="https://github.com/features/actions">GitHub Actions</a> configured. They can be found in the <a href="./.github/workflows/">./github/workflows</a> directory. These will run the <a href="./.github/workflows/unit-test.yaml">Unit Tests</a>, <a href="./.github/workflows/integration-test.yaml">Integration Tests</a>, <a href="./.github/workflows/lint.yaml">Lint Check</a>, etc, during Pull Requests and merges to the master branch.</p>
<p> </p>
<h2 id="license"><a class="header" href="#license"><a href="index.html#license">License</a></a></h2>
<p>The code in this project is unlicensed.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="contracts/admin-ops/IOpsEvents.sol/interface.IOpsEvents.html">IOpsEvents</a></li>
<li><a href="contracts/admin-ops/OpsBaseProcessor.sol/abstract.OpsBaseProcessor.html">OpsBaseProcessor</a></li>
<li><a href="contracts/admin-ops/OpsProcessor.sol/contract.OpsProcessor.html">OpsProcessor</a></li>
<li><a href="contracts/admin-ops/OpsStorage.sol/contract.OpsStorage.html">OpsStorage</a></li>
<li><a href="contracts/admin-ops/OpsTypes.sol/library.OpsTypes.html">OpsTypes</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iopsevents"><a class="header" href="#iopsevents">IOpsEvents</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/admin-ops/IOpsEvents.sol">Git Source</a></p>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="requestcreated"><a class="header" href="#requestcreated">RequestCreated</a></h3>
<p><em>Emitted when a new request is created</em></p>
<pre><code class="language-solidity">event RequestCreated(OpsTypes.OpType indexed operationType, address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestapproved"><a class="header" href="#requestapproved">RequestApproved</a></h3>
<p><em>Emitted when a request is approved</em></p>
<pre><code class="language-solidity">event RequestApproved(OpsTypes.OpType indexed operationType, address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestapprovalcompleted"><a class="header" href="#requestapprovalcompleted">RequestApprovalCompleted</a></h3>
<p><em>Emitted when a request collected enough approvals</em></p>
<pre><code class="language-solidity">event RequestApprovalCompleted(OpsTypes.OpType indexed operationType, uint256 indexed requestId);
</code></pre>
<h3 id="requestrejected"><a class="header" href="#requestrejected">RequestRejected</a></h3>
<p><em>Emitted when a request is rejected</em></p>
<pre><code class="language-solidity">event RequestRejected(OpsTypes.OpType indexed operationType, address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestreverted"><a class="header" href="#requestreverted">RequestReverted</a></h3>
<p><em>Emitted when a request is reverted</em></p>
<pre><code class="language-solidity">event RequestReverted(OpsTypes.OpType indexed operationType, uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<h3 id="tokensmessagesent"><a class="header" href="#tokensmessagesent">TokensMessageSent</a></h3>
<p><em>Emitted when a message is sent to the bridge</em></p>
<pre><code class="language-solidity">event TokensMessageSent(OpsTypes.OpType operationType, uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opsbaseprocessor"><a class="header" href="#opsbaseprocessor">OpsBaseProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/admin-ops/OpsBaseProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/admin-ops/OpsBaseProcessor.sol//contracts/common/BaseProcessor.sol/abstract.BaseProcessor.html">BaseProcessor</a>, <a href="contracts/admin-ops/OpsBaseProcessor.sol//contracts/common/RelayerAware.sol/abstract.RelayerAware.html">RelayerAware</a>, <a href="contracts/admin-ops/OpsBaseProcessor.sol//contracts/admin-ops/IOpsEvents.sol/interface.IOpsEvents.html">IOpsEvents</a>, <a href="contracts/admin-ops/OpsBaseProcessor.sol//contracts/common/BridgeInterable.sol/abstract.BridgeInterable.html">BridgeInterable</a></p>
<p><em>Base contract for managing the admin operations processes. Defines common logic for approving/rejecting requests.
Designed as the wrapper around processes defined in <code>ProcessManager</code> contract and managed by <code>ProcessManager</code> contract
by implementing <code>BaseProcessor</code> contract.
Communicates with the L1 contracts via bridge by implementing <code>BridgeInterable</code> contract.
Contract can also handle meta transactions by implementing <code>RelayerAware</code> contract.
It follows the steps defined per process and provides high-level updates of the request relevant data.
It uses <code>OpsStorage</code> to store the admin operation request data.</em></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="_opsstorage"><a class="header" href="#_opsstorage">_opsStorage</a></h3>
<p><em><code>OpsStorage</code> contract</em></p>
<pre><code class="language-solidity">OpsStorage internal immutable _opsStorage;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="requestexists"><a class="header" href="#requestexists">requestExists</a></h3>
<pre><code class="language-solidity">modifier requestExists(OpsTypes.OpType opType, uint256 requestId);
</code></pre>
<h3 id="validstatus"><a class="header" href="#validstatus">validStatus</a></h3>
<pre><code class="language-solidity">modifier validStatus(OpsTypes.OpType opType, uint256 requestId, OpsTypes.ReqStatus expectedStatus);
</code></pre>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(address trustedForwarder_, address opsStorage_, address processManager_, address bridgeMediator_)
    BaseProcessor(processManager_)
    RelayerAware(trustedForwarder_)
    BridgeInterable(bridgeMediator_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td>Address of the <code>TrustedForwarder</code> contract</td></tr>
<tr><td><code>opsStorage_</code></td><td><code>address</code></td><td>Address of the <code>OpsStorage</code> contract</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
<tr><td><code>bridgeMediator_</code></td><td><code>address</code></td><td>Address of the <code>BridgeMediator</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="approverequest"><a class="header" href="#approverequest">approveRequest</a></h3>
<p><em>Approves request
Emits {RequestApproved} event
Emits {RequestApprovalCompleted} event</em></p>
<pre><code class="language-solidity">function approveRequest(OpsTypes.OpType opType, uint256 requestId)
    external
    requestExists(opType, requestId)
    validStatus(opType, requestId, OpsTypes.ReqStatus.CREATED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="rejectrequest"><a class="header" href="#rejectrequest">rejectRequest</a></h3>
<p><em>Rejects the request
Emits {RequestRejected} event</em></p>
<pre><code class="language-solidity">function rejectRequest(OpsTypes.OpType opType, uint256 requestId)
    external
    requestExists(opType, requestId)
    validStatus(opType, requestId, OpsTypes.ReqStatus.CREATED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_onrequestprocessed"><a class="header" href="#_onrequestprocessed">_onRequestProcessed</a></h3>
<p><em>Hook that is called when request approval is completed</em></p>
<pre><code class="language-solidity">function _onRequestProcessed(OpsTypes.OpType opType, uint256 requestId) internal virtual;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8optype"><a class="header" href="#_asuint8optype">_asUint8OpType</a></h3>
<pre><code class="language-solidity">function _asUint8OpType(OpsTypes.OpType opType) internal pure returns (uint8);
</code></pre>
<h3 id="_asuint8status"><a class="header" href="#_asuint8status">_asUint8Status</a></h3>
<pre><code class="language-solidity">function _asUint8Status(OpsTypes.ReqStatus status) internal pure returns (uint8);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="requestnotexist"><a class="header" href="#requestnotexist">RequestNotExist</a></h3>
<p><em>Request does not exist</em></p>
<pre><code class="language-solidity">error RequestNotExist(OpsTypes.OpType opType, uint256 requestId);
</code></pre>
<h3 id="invalidrequeststatus"><a class="header" href="#invalidrequeststatus">InvalidRequestStatus</a></h3>
<p><em>Unexpected request status</em></p>
<pre><code class="language-solidity">error InvalidRequestStatus(
    OpsTypes.OpType opType, uint256 requestId, OpsTypes.ReqStatus expectedStatus, OpsTypes.ReqStatus actualStatus
);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opsprocessor"><a class="header" href="#opsprocessor">OpsProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/admin-ops/OpsProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/admin-ops/OpsProcessor.sol//contracts/admin-ops/OpsBaseProcessor.sol/abstract.OpsBaseProcessor.html">OpsBaseProcessor</a>, IOpsRecovery</p>
<p>*Contract for managing admin operations processes.
The following are the intended function calls in order to complete the admin operation process:</p>
<ol>
<li>createFreezeRequest / createUnfreezeRequest / createSeizeRequest /
createDiscountRequest / createUpdateDiscountRequest / createUserDiscountRequest /
createUpdateTransactionFeeRateRequest / createUpdateFeeAmountRangeRequest</li>
<li>approveRequest
-. rejectRequest
-. <code>fixMessage</code> -&gt; <code>BridgeMediator</code> contract*</li>
</ol>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(address trustedForwarder_, address opsStorage_, address processManager_, address bridgeMediator_)
    OpsBaseProcessor(trustedForwarder_, opsStorage_, processManager_, bridgeMediator_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td>Address of the <code>TrustedForwarder</code> contract</td></tr>
<tr><td><code>opsStorage_</code></td><td><code>address</code></td><td>Address of the <code>OpsStorage</code> contract</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
<tr><td><code>bridgeMediator_</code></td><td><code>address</code></td><td>Address of the <code>BridgeMediator</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="createfreezerequest"><a class="header" href="#createfreezerequest">createFreezeRequest</a></h3>
<p><em>Creates freeze request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createFreezeRequest(CreateTokenManagementRequestParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>CreateTokenManagementRequestParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="createunfreezerequest"><a class="header" href="#createunfreezerequest">createUnfreezeRequest</a></h3>
<p><em>Creates unfreeze request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createUnfreezeRequest(CreateTokenManagementRequestParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>CreateTokenManagementRequestParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="createseizerequest"><a class="header" href="#createseizerequest">createSeizeRequest</a></h3>
<p><em>Creates seize request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createSeizeRequest(CreateSeizeTokensRequestParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>CreateSeizeTokensRequestParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="creatediscountrequest"><a class="header" href="#creatediscountrequest">createDiscountRequest</a></h3>
<p><em>Creates discount group creation request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createDiscountRequest(CreateDiscountGroupParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>CreateDiscountGroupParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="createupdatediscountrequest"><a class="header" href="#createupdatediscountrequest">createUpdateDiscountRequest</a></h3>
<p><em>Creates update discount group request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createUpdateDiscountRequest(UpdateDiscountGroupParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>UpdateDiscountGroupParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="createuserdiscountrequest"><a class="header" href="#createuserdiscountrequest">createUserDiscountRequest</a></h3>
<p><em>Creates set user discount group request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createUserDiscountRequest(UserDiscountGroupParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>UserDiscountGroupParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="createupdatetransactionfeeraterequest"><a class="header" href="#createupdatetransactionfeeraterequest">createUpdateTransactionFeeRateRequest</a></h3>
<p><em>Creates update transaction fee rate request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createUpdateTransactionFeeRateRequest(UpdateTransactionFeeRateParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>UpdateTransactionFeeRateParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="createupdatefeeamountrangerequest"><a class="header" href="#createupdatefeeamountrangerequest">createUpdateFeeAmountRangeRequest</a></h3>
<p><em>Creates update fee amount range request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createUpdateFeeAmountRangeRequest(UpdateFeeAmountRangeParam memory param) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>param</code></td><td><code>UpdateFeeAmountRangeParam</code></td><td>Structure representing request data</td></tr>
</tbody></table>
</div>
<h3 id="_createrequest"><a class="header" href="#_createrequest">_createRequest</a></h3>
<p><em>Creates request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function _createRequest(bytes32 processType, OpsTypes.OpType opType, bytes memory data) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processType</code></td><td><code>bytes32</code></td><td>Process config identifier</td></tr>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<h3 id="_onrequestprocessed-1"><a class="header" href="#_onrequestprocessed-1">_onRequestProcessed</a></h3>
<p><em>Hook that is called when request approval is completed</em></p>
<pre><code class="language-solidity">function _onRequestProcessed(OpsTypes.OpType opType, uint256 requestId) internal override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_sendmessage"><a class="header" href="#_sendmessage">_sendMessage</a></h3>
<p><em>Sends bridge message
Emits {TokensMessageSent} event</em></p>
<pre><code class="language-solidity">function _sendMessage(OpsTypes.OpType opType, uint256 requestId) private bridgeActive;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_preparemessage"><a class="header" href="#_preparemessage">_prepareMessage</a></h3>
<p><em>Prepares bridge message</em></p>
<pre><code class="language-solidity">function _prepareMessage(OpsTypes.OpType opType, uint256 requestId) private view returns (bytes memory message);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>message</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_preparefreezetokensmessage"><a class="header" href="#_preparefreezetokensmessage">_prepareFreezeTokensMessage</a></h3>
<p><em>Prepares freeze tokens message</em></p>
<pre><code class="language-solidity">function _prepareFreezeTokensMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_prepareunfreezetokensmessage"><a class="header" href="#_prepareunfreezetokensmessage">_prepareUnfreezeTokensMessage</a></h3>
<p><em>Prepares unfreeze tokens message</em></p>
<pre><code class="language-solidity">function _prepareUnfreezeTokensMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_prepareseizetokensmessage"><a class="header" href="#_prepareseizetokensmessage">_prepareSeizeTokensMessage</a></h3>
<p><em>Prepares seize tokens message</em></p>
<pre><code class="language-solidity">function _prepareSeizeTokensMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_preparetokensmanagemessage"><a class="header" href="#_preparetokensmanagemessage">_prepareTokensManageMessage</a></h3>
<p><em>Prepares manage tokens message</em></p>
<pre><code class="language-solidity">function _prepareTokensManageMessage(bytes4 methodSelector, bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>methodSelector</code></td><td><code>bytes4</code></td><td>Selector of the method to call on the bridge receiver</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_preparecreatediscountgroupmessage"><a class="header" href="#_preparecreatediscountgroupmessage">_prepareCreateDiscountGroupMessage</a></h3>
<p><em>Prepares create discount group message</em></p>
<pre><code class="language-solidity">function _prepareCreateDiscountGroupMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_prepareupdatediscountgroupmessage"><a class="header" href="#_prepareupdatediscountgroupmessage">_prepareUpdateDiscountGroupMessage</a></h3>
<p><em>Prepares update discount group message</em></p>
<pre><code class="language-solidity">function _prepareUpdateDiscountGroupMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_preparesetuserdiscountgroupmessage"><a class="header" href="#_preparesetuserdiscountgroupmessage">_prepareSetUserDiscountGroupMessage</a></h3>
<p><em>Prepares set user discount group message</em></p>
<pre><code class="language-solidity">function _prepareSetUserDiscountGroupMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_prepareupdatetransactionfeeratemessage"><a class="header" href="#_prepareupdatetransactionfeeratemessage">_prepareUpdateTransactionFeeRateMessage</a></h3>
<p><em>Prepares update transaction fee rate message</em></p>
<pre><code class="language-solidity">function _prepareUpdateTransactionFeeRateMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_prepareupdatefeeamountrangemessage"><a class="header" href="#_prepareupdatefeeamountrangemessage">_prepareUpdateFeeAmountRangeMessage</a></h3>
<p><em>Prepares update fee amount range message</em></p>
<pre><code class="language-solidity">function _prepareUpdateFeeAmountRangeMessage(bytes memory data) private pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Message to be sent</td></tr>
</tbody></table>
</div>
<h3 id="_setdataformessage"><a class="header" href="#_setdataformessage">_setDataForMessage</a></h3>
<p><em>Sets data for the message</em></p>
<pre><code class="language-solidity">function _setDataForMessage(OpsTypes.OpType opType, bytes32 messageId, uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>OpsTypes.OpType</code></td><td>Operation type</td></tr>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="fixmessage"><a class="header" href="#fixmessage">fixMessage</a></h3>
<pre><code class="language-solidity">function fixMessage(bytes32 messageId)
    external
    onlyMediator
    dataForMessageExists(messageId)
    messageNotFixed(messageId);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="unsupportedoperationtype"><a class="header" href="#unsupportedoperationtype">UnsupportedOperationType</a></h3>
<p><em>Unsupported operation type</em></p>
<pre><code class="language-solidity">error UnsupportedOperationType(OpsTypes.OpType opType);
</code></pre>
<h3 id="invalidtokenamount"><a class="header" href="#invalidtokenamount">InvalidTokenAmount</a></h3>
<p><em>Invalid tokens amount</em></p>
<pre><code class="language-solidity">error InvalidTokenAmount();
</code></pre>
<h3 id="invaliddiscountgroup"><a class="header" href="#invaliddiscountgroup">InvalidDiscountGroup</a></h3>
<p><em>Invalid discount group identifier</em></p>
<pre><code class="language-solidity">error InvalidDiscountGroup();
</code></pre>
<h3 id="invalidtxfeerate"><a class="header" href="#invalidtxfeerate">InvalidTxFeeRate</a></h3>
<p><em>Invalid transfer fee rate passed</em></p>
<pre><code class="language-solidity">error InvalidTxFeeRate();
</code></pre>
<h3 id="invalidminormaxtxvalue"><a class="header" href="#invalidminormaxtxvalue">InvalidMinOrMaxTxValue</a></h3>
<p><em>Invalid minimum or maximum transfer fee passed</em></p>
<pre><code class="language-solidity">error InvalidMinOrMaxTxValue();
</code></pre>
<h3 id="invalidfeediscount"><a class="header" href="#invalidfeediscount">InvalidFeeDiscount</a></h3>
<p><em>Invalid fee discount passed</em></p>
<pre><code class="language-solidity">error InvalidFeeDiscount();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="createtokenmanagementrequestparam"><a class="header" href="#createtokenmanagementrequestparam">CreateTokenManagementRequestParam</a></h3>
<p><em>Structure representing token management request data</em></p>
<pre><code class="language-solidity">struct CreateTokenManagementRequestParam {
    uint48 amount;
    address user;
    ShipmentTypes.MetalType metalType;
}
</code></pre>
<h3 id="createseizetokensrequestparam"><a class="header" href="#createseizetokensrequestparam">CreateSeizeTokensRequestParam</a></h3>
<p><em>Structure representing tokens seize request data</em></p>
<pre><code class="language-solidity">struct CreateSeizeTokensRequestParam {
    uint48 amount;
    address user;
    address to;
    ShipmentTypes.MetalType metalType;
}
</code></pre>
<h3 id="creatediscountgroupparam"><a class="header" href="#creatediscountgroupparam">CreateDiscountGroupParam</a></h3>
<p><em>Structure representing discount group creation request data</em></p>
<pre><code class="language-solidity">struct CreateDiscountGroupParam {
    WhitelistTypes.GroupType groupType;
    WhitelistTypes.Discount discount;
}
</code></pre>
<h3 id="updatediscountgroupparam"><a class="header" href="#updatediscountgroupparam">UpdateDiscountGroupParam</a></h3>
<p><em>Structure representing discount group update request data</em></p>
<pre><code class="language-solidity">struct UpdateDiscountGroupParam {
    uint256 discountGroupId;
    WhitelistTypes.GroupType groupType;
    WhitelistTypes.Discount discount;
}
</code></pre>
<h3 id="userdiscountgroupparam"><a class="header" href="#userdiscountgroupparam">UserDiscountGroupParam</a></h3>
<p><em>Structure representing user discount group set request data</em></p>
<pre><code class="language-solidity">struct UserDiscountGroupParam {
    WhitelistTypes.GroupType groupType;
    uint256 discountGroupId;
    address user;
}
</code></pre>
<h3 id="updatetransactionfeerateparam"><a class="header" href="#updatetransactionfeerateparam">UpdateTransactionFeeRateParam</a></h3>
<p><em>Structure representing transaction fee rate update request data</em></p>
<pre><code class="language-solidity">struct UpdateTransactionFeeRateParam {
    uint256 feeRate;
}
</code></pre>
<h3 id="updatefeeamountrangeparam"><a class="header" href="#updatefeeamountrangeparam">UpdateFeeAmountRangeParam</a></h3>
<p><em>Structure representing fee amount range update request data</em></p>
<pre><code class="language-solidity">struct UpdateFeeAmountRangeParam {
    uint256 minimumAmount;
    uint256 maximumAmount;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opsstorage"><a class="header" href="#opsstorage">OpsStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/admin-ops/OpsStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/admin-ops/OpsStorage.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="_requests"><a class="header" href="#_requests">_requests</a></h3>
<p><em>Mapping of operation type to request identifier to its data</em></p>
<pre><code class="language-solidity">mapping(uint8 opType =&gt; mapping(uint256 requestId =&gt; Request request)) private _requests;
</code></pre>
<h3 id="_requestcountbytype"><a class="header" href="#_requestcountbytype">_requestCountByType</a></h3>
<p><em>Mapping of operation type to requests counter</em></p>
<pre><code class="language-solidity">mapping(uint8 opType =&gt; uint256 count) private _requestCountByType;
</code></pre>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the storage</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="createrequest"><a class="header" href="#createrequest">createRequest</a></h3>
<p><em>Creates a new <code>Request</code> and stores it in the storage
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function createRequest(uint8 opType, uint32 processId_, uint8 status_, bytes calldata data_)
    external
    onlyAuthorized
    returns (uint256 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>processId_</code></td><td><code>uint32</code></td><td>Process identifier</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Request status</td></tr>
<tr><td><code>data_</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="setstatus"><a class="header" href="#setstatus">setStatus</a></h3>
<p><em>Sets status of the request
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setStatus(uint8 opType, uint256 requestId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the request</td></tr>
</tbody></table>
</div>
<h3 id="requestcount"><a class="header" href="#requestcount">requestCount</a></h3>
<p><em>Returns the number of requests</em></p>
<pre><code class="language-solidity">function requestCount(uint8 opType) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Number of requests</td></tr>
</tbody></table>
</div>
<h3 id="request"><a class="header" href="#request">request</a></h3>
<p><em>Returns the request</em></p>
<pre><code class="language-solidity">function request(uint8 opType, uint256 requestId) external view returns (Request memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Request</code></td><td>Request represented with <code>Request</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="requestexists-1"><a class="header" href="#requestexists-1">requestExists</a></h3>
<p><em>Returns whether a request with <code>requestId</code> exists</em></p>
<pre><code class="language-solidity">function requestExists(uint8 opType, uint256 requestId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether a request exists</td></tr>
</tbody></table>
</div>
<h3 id="data"><a class="header" href="#data">data</a></h3>
<p><em>Returns the request data</em></p>
<pre><code class="language-solidity">function data(uint8 opType, uint256 requestId) external view returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<h3 id="processid"><a class="header" href="#processid">processId</a></h3>
<p><em>Returns the process identifier of the request</em></p>
<pre><code class="language-solidity">function processId(uint8 opType, uint256 requestId) external view returns (uint32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint32</code></td><td>Process identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="status"><a class="header" href="#status">status</a></h3>
<p><em>Returns the status of the request</em></p>
<pre><code class="language-solidity">function status(uint8 opType, uint256 requestId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opType</code></td><td><code>uint8</code></td><td>Operation type</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Status of the request</td></tr>
</tbody></table>
</div>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="request-1"><a class="header" href="#request-1">Request</a></h3>
<p><em>Struct representing a request</em></p>
<pre><code class="language-solidity">struct Request {
    uint32 processId;
    uint8 status;
    bytes data;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="opstypes"><a class="header" href="#opstypes">OpsTypes</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/admin-ops/OpsTypes.sol">Git Source</a></p>
<h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<h3 id="reqstatus"><a class="header" href="#reqstatus">ReqStatus</a></h3>
<pre><code class="language-solidity">enum ReqStatus {
    NONE,
    CREATED,
    APPROVED,
    REJECTED,
    REVERTED
}
</code></pre>
<h3 id="optype"><a class="header" href="#optype">OpType</a></h3>
<pre><code class="language-solidity">enum OpType {
    FREEZE,
    UNFREEZE,
    SEIZE,
    CREATE_DISCOUNT_GROUP,
    UPDATE_DISCOUNT_GROUP,
    SET_USER_DISCOUNT_GROUP,
    UPDATE_TRANSACTION_FEE_RATE,
    UPDATE_FEE_AMOUNT_RANGE
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="contracts/bridge/BridgeInteractor.sol/abstract.BridgeInteractor.html">BridgeInteractor</a></li>
<li><a href="contracts/bridge/BridgeMediator.sol/contract.BridgeMediator.html">BridgeMediator</a></li>
<li><a href="contracts/bridge/BridgeMessagesMapper.sol/abstract.BridgeMessagesMapper.html">BridgeMessagesMapper</a></li>
<li><a href="contracts/bridge/BridgeModeSwitch.sol/abstract.BridgeModeSwitch.html">BridgeModeSwitch</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bridgeinteractor"><a class="header" href="#bridgeinteractor">BridgeInteractor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/bridge/BridgeInteractor.sol">Git Source</a></p>
<p><em>Abstract contract that enables interaction with the bridge and foreign contracts via mediator</em></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="_bridgemediator"><a class="header" href="#_bridgemediator">_bridgeMediator</a></h3>
<p><em><code>BridgeMediator</code> contract</em></p>
<pre><code class="language-solidity">BridgeMediator internal immutable _bridgeMediator;
</code></pre>
<h3 id="_fixedmessages"><a class="header" href="#_fixedmessages">_fixedMessages</a></h3>
<p><em>Mapping from message identifier to flag if message is fixed</em></p>
<pre><code class="language-solidity">mapping(bytes32 messageId =&gt; bool msgFixed) private _fixedMessages;
</code></pre>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="bridgeactive"><a class="header" href="#bridgeactive">bridgeActive</a></h3>
<pre><code class="language-solidity">modifier bridgeActive();
</code></pre>
<h3 id="onlymediator"><a class="header" href="#onlymediator">onlyMediator</a></h3>
<pre><code class="language-solidity">modifier onlyMediator();
</code></pre>
<h3 id="messagenotfixed"><a class="header" href="#messagenotfixed">messageNotFixed</a></h3>
<pre><code class="language-solidity">modifier messageNotFixed(bytes32 messageId);
</code></pre>
<h3 id="messagefixable"><a class="header" href="#messagefixable">messageFixable</a></h3>
<pre><code class="language-solidity">modifier messageFixable(bytes32 messageId);
</code></pre>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<pre><code class="language-solidity">constructor(address bridgeMediator_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bridgeMediator_</code></td><td><code>address</code></td><td>Address of the <code>BridgeMediator</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="messagefixed"><a class="header" href="#messagefixed">messageFixed</a></h3>
<p><em>Returns the status of the message with id <code>messageId</code></em></p>
<pre><code class="language-solidity">function messageFixed(bytes32 messageId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if the message is fixed</td></tr>
</tbody></table>
</div>
<h3 id="currentmessageid"><a class="header" href="#currentmessageid">currentMessageId</a></h3>
<p><em>Returns current message identifier</em></p>
<pre><code class="language-solidity">function currentMessageId() public view returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<h3 id="bridgemodeactive"><a class="header" href="#bridgemodeactive">bridgeModeActive</a></h3>
<p><em>Returns if bridge mode is active</em></p>
<pre><code class="language-solidity">function bridgeModeActive() public view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if bridge mode is active</td></tr>
</tbody></table>
</div>
<h3 id="messagereverted"><a class="header" href="#messagereverted">messageReverted</a></h3>
<p><em>Returns if message reverted</em></p>
<pre><code class="language-solidity">function messageReverted(bytes32 messageId) public view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if message reverted</td></tr>
</tbody></table>
</div>
<h3 id="_setmessagefixed"><a class="header" href="#_setmessagefixed">_setMessageFixed</a></h3>
<p><em>Sets the message with id <code>messageId</code> as fixed</em></p>
<pre><code class="language-solidity">function _setMessageFixed(bytes32 messageId) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<h3 id="_sendmessage-1"><a class="header" href="#_sendmessage-1">_sendMessage</a></h3>
<p><em>Sends a message to the other side of the bridge</em></p>
<pre><code class="language-solidity">function _sendMessage(bytes memory data) internal returns (bytes32 messageId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Data to send</td></tr>
</tbody></table>
</div>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<h3 id="callernotmediator"><a class="header" href="#callernotmediator">CallerNotMediator</a></h3>
<p><em>Caller is not the mediator contract</em></p>
<pre><code class="language-solidity">error CallerNotMediator();
</code></pre>
<h3 id="messagealreadyfixed"><a class="header" href="#messagealreadyfixed">MessageAlreadyFixed</a></h3>
<p><em>Message already fixed</em></p>
<pre><code class="language-solidity">error MessageAlreadyFixed();
</code></pre>
<h3 id="messagenotreverted"><a class="header" href="#messagenotreverted">MessageNotReverted</a></h3>
<p><em>Message execution not reverted</em></p>
<pre><code class="language-solidity">error MessageNotReverted(bytes32 messageId);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bridgemediator"><a class="header" href="#bridgemediator">BridgeMediator</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/bridge/BridgeMediator.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/bridge/BridgeMediator.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a>, <a href="contracts/bridge/BridgeMediator.sol//contracts/bridge/BridgeModeSwitch.sol/abstract.BridgeModeSwitch.html">BridgeModeSwitch</a></p>
<p>*Mediator contract that enables interaction with the bridge on the other side
Its capable of sending messages, as well as receiving and executing them
Following statuses of the messages on AMB are recognized:</p>
<ol>
<li>PENDING - messageExecuted == false &amp;&amp; messageReverted == false</li>
<li>EXECUTED - messageExecuted == true</li>
<li>REJECTED - messageExecuted == false &amp;&amp; messageReverted == true*</li>
</ol>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="_ambcontract"><a class="header" href="#_ambcontract">_AMBContract</a></h3>
<p><em>AMB contract address</em></p>
<pre><code class="language-solidity">IAMB private immutable _AMBContract;
</code></pre>
<h3 id="_foreignmediator"><a class="header" href="#_foreignmediator">_foreignMediator</a></h3>
<p><em>Mediator contract address on the other side of the bridge</em></p>
<pre><code class="language-solidity">address private _foreignMediator;
</code></pre>
<h3 id="_targets"><a class="header" href="#_targets">_targets</a></h3>
<p><em>Mapping of function selector to target address</em></p>
<pre><code class="language-solidity">mapping(bytes4 selector =&gt; address target) private _targets;
</code></pre>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<pre><code class="language-solidity">constructor(address AMBContract_, address foreignMediator_, address owner_, address[] memory authorized_)
    CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>AMBContract_</code></td><td><code>address</code></td><td>Address of the AMB contract</td></tr>
<tr><td><code>foreignMediator_</code></td><td><code>address</code></td><td>Address of the mediator contract on the other side of the bridge</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Address of the owner</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>Array of authorized addresses</td></tr>
</tbody></table>
</div>
<h3 id="setforeignmediator"><a class="header" href="#setforeignmediator">setForeignMediator</a></h3>
<p><em>Sets the <code>foreignMediator</code> address
Callable only by owner
Emits {ForeignMediatorChanged} event</em></p>
<pre><code class="language-solidity">function setForeignMediator(address foreignMediator_) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>foreignMediator_</code></td><td><code>address</code></td><td>Address of the mediator</td></tr>
</tbody></table>
</div>
<h3 id="setbridgemodeactive"><a class="header" href="#setbridgemodeactive">setBridgeModeActive</a></h3>
<p><em>Sets flag if the bridge mode is active
Callable only by owner
Emits {BridgeModeChanged} event</em></p>
<pre><code class="language-solidity">function setBridgeModeActive(bool active_) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>active_</code></td><td><code>bool</code></td><td>Flag if bridge mode is active</td></tr>
</tbody></table>
</div>
<h3 id="setincomingmessagesconfigs"><a class="header" href="#setincomingmessagesconfigs">setIncomingMessagesConfigs</a></h3>
<p><em>Sets the target address for the given selector
Callable only by owner
Emits {TargetForSelectorChanged} event</em></p>
<pre><code class="language-solidity">function setIncomingMessagesConfigs(IncomingMessageRoutingParam[] memory incomingRoutings) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>incomingRoutings</code></td><td><code>IncomingMessageRoutingParam[]</code></td><td>Arrays of configurations for routing incoming messages</td></tr>
</tbody></table>
</div>
<h3 id="sendmessage"><a class="header" href="#sendmessage">sendMessage</a></h3>
<p><em>Sends a message to the other side of the bridge
Callable only by authorized addresses</em></p>
<pre><code class="language-solidity">function sendMessage(bytes memory data) external onlyAuthorized returns (bytes32 messageId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Data to send</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<h3 id="forwardmessage"><a class="header" href="#forwardmessage">forwardMessage</a></h3>
<p><em>Receives a message from the other side of the bridge and executes it
Callable only by the AMB contract</em></p>
<pre><code class="language-solidity">function forwardMessage(bytes calldata data) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Message data</td></tr>
</tbody></table>
</div>
<h3 id="messagecallstatus"><a class="header" href="#messagecallstatus">messageCallStatus</a></h3>
<p><em>Returns the status of the message with id <code>messageId</code></em></p>
<pre><code class="language-solidity">function messageCallStatus(bytes32 messageId) public view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if the message is executed</td></tr>
</tbody></table>
</div>
<h3 id="messagereverted-1"><a class="header" href="#messagereverted-1">messageReverted</a></h3>
<p><em>Returns if message with id <code>messageId</code> reverted</em></p>
<pre><code class="language-solidity">function messageReverted(bytes32 messageId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if the message is reverted</td></tr>
</tbody></table>
</div>
<h3 id="currentmessageid-1"><a class="header" href="#currentmessageid-1">currentMessageId</a></h3>
<pre><code class="language-solidity">function currentMessageId() external view returns (bytes32);
</code></pre>
<h3 id="ambcontract"><a class="header" href="#ambcontract">AMBContract</a></h3>
<p><em>Returns the address of the AMB contract</em></p>
<pre><code class="language-solidity">function AMBContract() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the AMB contract</td></tr>
</tbody></table>
</div>
<h3 id="mediatoronotherside"><a class="header" href="#mediatoronotherside">mediatorOnOtherSide</a></h3>
<p><em>Returns the address of mediator contract on the other side of the bridge</em></p>
<pre><code class="language-solidity">function mediatorOnOtherSide() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of mediator contract</td></tr>
</tbody></table>
</div>
<h3 id="target"><a class="header" href="#target">target</a></h3>
<p><em>Returns the address of the target contract for the given selector</em></p>
<pre><code class="language-solidity">function target(bytes4 selector) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>selector</code></td><td><code>bytes4</code></td><td>Selector of the method</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the target contract</td></tr>
</tbody></table>
</div>
<h3 id="gaslimit"><a class="header" href="#gaslimit">gasLimit</a></h3>
<p><em>Returns the gas limit for the message
Setup taken from AMB bridge implementation
https://github.com/omni/tokenbridge-contracts/blob/908a48107919d4ab127f9af07d44d47eac91547e/contracts/upgradeable_contracts/arbitrary_message/MessageProcessor.sol#L233</em></p>
<pre><code class="language-solidity">function gasLimit() public pure returns (uint256);
</code></pre>
<h3 id="_setforeignmediator"><a class="header" href="#_setforeignmediator">_setForeignMediator</a></h3>
<p><em>Sets the <code>foreignMediator</code> address
Emits {ForeignMediatorChanged} event</em></p>
<pre><code class="language-solidity">function _setForeignMediator(address foreignMediator_) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>foreignMediator_</code></td><td><code>address</code></td><td>Address of the mediator</td></tr>
</tbody></table>
</div>
<h3 id="_setincomingmessageconfig"><a class="header" href="#_setincomingmessageconfig">_setIncomingMessageConfig</a></h3>
<p><em>Sets the target address for the given selector on incoming message
Emits {TargetForSelectorChanged} event</em></p>
<pre><code class="language-solidity">function _setIncomingMessageConfig(bytes4 selector_, address target_) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>selector_</code></td><td><code>bytes4</code></td><td>Method selector</td></tr>
<tr><td><code>target_</code></td><td><code>address</code></td><td>Address of the target contract</td></tr>
</tbody></table>
</div>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="foreignmediatorchanged"><a class="header" href="#foreignmediatorchanged">ForeignMediatorChanged</a></h3>
<p><em>Emitted when the mediator contract address is changed</em></p>
<pre><code class="language-solidity">event ForeignMediatorChanged(address indexed foreignMediator);
</code></pre>
<h3 id="incomingmessageconfigchanged"><a class="header" href="#incomingmessageconfigchanged">IncomingMessageConfigChanged</a></h3>
<p><em>Emitted when the incoming message config changed</em></p>
<pre><code class="language-solidity">event IncomingMessageConfigChanged(bytes4 indexed selector, address indexed target);
</code></pre>
<h2 id="errors-3"><a class="header" href="#errors-3">Errors</a></h2>
<h3 id="callernotforeignmediator"><a class="header" href="#callernotforeignmediator">CallerNotForeignMediator</a></h3>
<p><em>Caller not mediator on the other side of the bridge</em></p>
<pre><code class="language-solidity">error CallerNotForeignMediator();
</code></pre>
<h3 id="messageexecutionfailed"><a class="header" href="#messageexecutionfailed">MessageExecutionFailed</a></h3>
<p><em>Message execution failed</em></p>
<pre><code class="language-solidity">error MessageExecutionFailed();
</code></pre>
<h3 id="messagefrominvalidbridge"><a class="header" href="#messagefrominvalidbridge">MessageFromInvalidBridge</a></h3>
<p><em>Message from invalid bridge</em></p>
<pre><code class="language-solidity">error MessageFromInvalidBridge();
</code></pre>
<h3 id="notargetforselector"><a class="header" href="#notargetforselector">NoTargetForSelector</a></h3>
<p><em>No target for selector from data</em></p>
<pre><code class="language-solidity">error NoTargetForSelector(bytes4 selector);
</code></pre>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="incomingmessageroutingparam"><a class="header" href="#incomingmessageroutingparam">IncomingMessageRoutingParam</a></h3>
<p><em>Structure containing routing config for incoming messages, used in the method calls as parameter type</em></p>
<pre><code class="language-solidity">struct IncomingMessageRoutingParam {
    bytes4 selector;
    address target;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bridgemessagesmapper"><a class="header" href="#bridgemessagesmapper">BridgeMessagesMapper</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/bridge/BridgeMessagesMapper.sol">Git Source</a></p>
<p><em>Abstract contract that enables mapping of messages to data
Useful for the contracts interacting with a bridge that later on provide
fix methods in case of a executin failure on the other side of the bridge</em></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="_data"><a class="header" href="#_data">_data</a></h3>
<p><em>Mapping of message identifier to arbitrary data</em></p>
<pre><code class="language-solidity">mapping(bytes32 messageId =&gt; bytes32 data) private _data;
</code></pre>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="dataformessageexists"><a class="header" href="#dataformessageexists">dataForMessageExists</a></h3>
<pre><code class="language-solidity">modifier dataForMessageExists(bytes32 messageId);
</code></pre>
<h3 id="dataformessage"><a class="header" href="#dataformessage">dataForMessage</a></h3>
<p><em>Returns the data related to the message</em></p>
<pre><code class="language-solidity">function dataForMessage(bytes32 messageId) public view returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Message data</td></tr>
</tbody></table>
</div>
<h3 id="_setdataformessage-1"><a class="header" href="#_setdataformessage-1">_setDataForMessage</a></h3>
<p><em>Sets the data for the message</em></p>
<pre><code class="language-solidity">function _setDataForMessage(bytes32 messageId, bytes32 data) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
<tr><td><code>data</code></td><td><code>bytes32</code></td><td>Message data</td></tr>
</tbody></table>
</div>
<h2 id="errors-4"><a class="header" href="#errors-4">Errors</a></h2>
<h3 id="messagenotexist"><a class="header" href="#messagenotexist">MessageNotExist</a></h3>
<p><em>Message does not exist</em></p>
<pre><code class="language-solidity">error MessageNotExist();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bridgemodeswitch"><a class="header" href="#bridgemodeswitch">BridgeModeSwitch</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/bridge/BridgeModeSwitch.sol">Git Source</a></p>
<p><em>Contract for switching bridge mode. This is needed so that the protocol can have a flexibility
in case, for example, there is bridge outage and messages can't be sent to the bridge.
In this cases, crucial protocol operations, like tokenization, should be done mannually, either
by the protocol team or by the bridge oracles.</em></p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="_bridgemodeactive"><a class="header" href="#_bridgemodeactive">_bridgeModeActive</a></h3>
<p><em>Flag if bridge mode is active</em></p>
<pre><code class="language-solidity">bool private _bridgeModeActive;
</code></pre>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="bridgemodeactive-1"><a class="header" href="#bridgemodeactive-1">bridgeModeActive</a></h3>
<p><em>Returns if bridge mode is active</em></p>
<pre><code class="language-solidity">function bridgeModeActive() public view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if bridge mode is active</td></tr>
</tbody></table>
</div>
<h3 id="_setbridgemodeactive"><a class="header" href="#_setbridgemodeactive">_setBridgeModeActive</a></h3>
<p><em>Sets the bridge mode
Emits {BridgeModeChanged} event</em></p>
<pre><code class="language-solidity">function _setBridgeModeActive(bool active_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>active_</code></td><td><code>bool</code></td><td>Flag if bridge mode is active</td></tr>
</tbody></table>
</div>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="bridgemodechanged"><a class="header" href="#bridgemodechanged">BridgeModeChanged</a></h3>
<p><em>Emitted when bridge mode is changed</em></p>
<pre><code class="language-solidity">event BridgeModeChanged(bool indexed active_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="contracts/certificates/Certificates.sol/contract.Certificates.html">Certificates</a></li>
<li><a href="contracts/certificates/ERC1155D.sol/abstract.ERC1155D.html">ERC1155D</a></li>
<li><a href="contracts/certificates/URIBuilder.sol/contract.URIBuilder.html">URIBuilder</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="certificates"><a class="header" href="#certificates">Certificates</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certificates/Certificates.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/certificates/Certificates.sol//contracts/certificates/ERC1155D.sol/abstract.ERC1155D.html">ERC1155D</a>, AccessControlDefaultAdminRules</p>
<p><em>Collection of ERC1155 tokens with URI support
Represents precious metal assets with unique tokens (NFTs)</em></p>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="minter_role"><a class="header" href="#minter_role">MINTER_ROLE</a></h3>
<p><em>Role identifier for minter (keccak256(&quot;MINTER_ROLE&quot;))</em></p>
<pre><code class="language-solidity">bytes32 public constant MINTER_ROLE = hex&quot;9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6&quot;;
</code></pre>
<h3 id="burner_role"><a class="header" href="#burner_role">BURNER_ROLE</a></h3>
<p><em>Role identifier for burner (keccak256(&quot;BURNER_ROLE&quot;))</em></p>
<pre><code class="language-solidity">bytes32 public constant BURNER_ROLE = hex&quot;3c11d16cbaffd01df69ce1c404f6340ee057498f5f00246190ea54220576a848&quot;;
</code></pre>
<h3 id="_uribuilder"><a class="header" href="#_uribuilder">_uriBuilder</a></h3>
<p><em><code>URIBuilder</code> contract</em></p>
<pre><code class="language-solidity">URIBuilder private _uriBuilder;
</code></pre>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="constructor-6"><a class="header" href="#constructor-6">constructor</a></h3>
<pre><code class="language-solidity">constructor(address defaultAdmin_, address uriBuilder_)
    ERC1155D
    AccessControlDefaultAdminRules(2 days, defaultAdmin_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>defaultAdmin_</code></td><td><code>address</code></td><td>Address of the default admin</td></tr>
<tr><td><code>uriBuilder_</code></td><td><code>address</code></td><td>Address of the <code>URIBuilder</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="seturibuilder"><a class="header" href="#seturibuilder">setURIBuilder</a></h3>
<p><em>Sets <code>URIBuilder</code> contract address
Callable only by a user with <code>DEFAULT_ADMIN_ROLE</code> role
Emits a {URIBuilderSet} event</em></p>
<pre><code class="language-solidity">function setURIBuilder(address uriBuilder_) external onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>uriBuilder_</code></td><td><code>address</code></td><td>Address of the new <code>URIBuilder</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="mintbatch"><a class="header" href="#mintbatch">mintBatch</a></h3>
<p><em>Creates tokens with <code>ids</code> respectively by index, and assigns them to <code>to</code>
Callable only by a user with <code>MINTER_ROLE</code> role
Emits a {TransferBatch} event</em></p>
<pre><code class="language-solidity">function mintBatch(address to, uint256[] calldata ids) external onlyRole(MINTER_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td>Target address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>Identifier of the</td></tr>
</tbody></table>
</div>
<h3 id="burnbatch"><a class="header" href="#burnbatch">burnBatch</a></h3>
<p><em>Destroys tokens with <code>ids</code> from <code>from</code>
Callable only by a user with <code>BURNER_ROLE</code> role
Emits a {TransferBatch} event</em></p>
<pre><code class="language-solidity">function burnBatch(address from, uint256[] calldata ids) external onlyRole(BURNER_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Target address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of each token</td></tr>
</tbody></table>
</div>
<h3 id="admintransfer"><a class="header" href="#admintransfer">adminTransfer</a></h3>
<p><em>Transfers tokens with <code>ids</code> from <code>from</code> to <code>to</code>
Callable only by a user with <code>DEFAULT_ADMIN_ROLE</code> role
Emits a {TransferBatch} event</em></p>
<pre><code class="language-solidity">function adminTransfer(address from, address to, uint256[] calldata ids) external onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Source address</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Receiver address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of each token</td></tr>
</tbody></table>
</div>
<h3 id="safebatchtransferfrom"><a class="header" href="#safebatchtransferfrom">safeBatchTransferFrom</a></h3>
<p><em>Transfers tokens with <code>ids</code> from <code>from</code> account to <code>to</code> account
Different from the standard <code>transferFrom</code> methods because it does not
require to specify the amount of tokens to transfer by automatically setting
the amount to <code>1</code> for each token</em></p>
<pre><code class="language-solidity">function safeBatchTransferFrom(address from, address to, uint256[] calldata ids) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Source address</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Receiver address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of each token</td></tr>
</tbody></table>
</div>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId)
    public
    view
    virtual
    override(ERC1155D, AccessControlDefaultAdminRules)
    returns (bool);
</code></pre>
<h3 id="uri"><a class="header" href="#uri">uri</a></h3>
<pre><code class="language-solidity">function uri(uint256 id) public view override tokenExists(id) returns (string memory);
</code></pre>
<h3 id="uribuilder"><a class="header" href="#uribuilder">uriBuilder</a></h3>
<p><em>Returns <code>URIBuilder</code> contract address</em></p>
<pre><code class="language-solidity">function uriBuilder() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>URIBuilder</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="_seturibuilder"><a class="header" href="#_seturibuilder">_setURIBuilder</a></h3>
<p><em>Sets the <code>URIBuilder</code> contract
Emits a {URIBuilderSet} event</em></p>
<pre><code class="language-solidity">function _setURIBuilder(address uriBuilder_) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>uriBuilder_</code></td><td><code>address</code></td><td>Address of the new <code>URIBuilder</code> contract</td></tr>
</tbody></table>
</div>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="uribuilderset"><a class="header" href="#uribuilderset">URIBuilderSet</a></h3>
<p><em>Emitted when <code>URIBuilder</code> contract is changed</em></p>
<pre><code class="language-solidity">event URIBuilderSet(address indexed uriBuilder);
</code></pre>
<h2 id="errors-5"><a class="header" href="#errors-5">Errors</a></h2>
<h3 id="uribuildernotset"><a class="header" href="#uribuildernotset">URIBuilderNotSet</a></h3>
<p><em><code>URIBuilder</code> contract not set</em></p>
<pre><code class="language-solidity">error URIBuilderNotSet();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc1155d"><a class="header" href="#erc1155d">ERC1155D</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certificates/ERC1155D.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC165, IERC1155MetadataURI</p>
<p>*Imlementation of ERC-1155 standard with additional optimizations mentioned in the (ERC-1155D) [https://github.com/DonkeVerse/ERC1155D].
It aims to lower the gas consumption during crucial operations when large amounts of tokens are being handled.
It's optimizations lie in the following updates to ERC-1155 standard:</p>
<ul>
<li>Removed the flexibility defined by standard by allowing amount of only 1 token per ID. The consequence
of this is basically that the <code>balanceOf</code> function is now a simple lookup in a map, similar to ERC-721.
This basically means that instead of updating balance for sender and receiver, only the record of the token owner
is updated.</li>
<li>Utilizes <code>TransferBatch</code> event to reduce gas consumption when batch of tokens are being transferred.
This is due the emitting of the single event instead of multiple <code>Transfer</code> events, for example, with ERC-721.*</li>
</ul>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="_owners"><a class="header" href="#_owners">_owners</a></h3>
<pre><code class="language-solidity">mapping(uint256 tokenId =&gt; address owner) private _owners;
</code></pre>
<h3 id="_operatorapprovals"><a class="header" href="#_operatorapprovals">_operatorApprovals</a></h3>
<pre><code class="language-solidity">mapping(address owner =&gt; mapping(address operator =&gt; bool approved)) private _operatorApprovals;
</code></pre>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="callerownerorapproved"><a class="header" href="#callerownerorapproved">callerOwnerOrApproved</a></h3>
<pre><code class="language-solidity">modifier callerOwnerOrApproved(address from);
</code></pre>
<h3 id="tokenexists"><a class="header" href="#tokenexists">tokenExists</a></h3>
<pre><code class="language-solidity">modifier tokenExists(uint256 id);
</code></pre>
<h3 id="setapprovalforall"><a class="header" href="#setapprovalforall">setApprovalForAll</a></h3>
<pre><code class="language-solidity">function setApprovalForAll(address operator, bool approved) public override;
</code></pre>
<h3 id="safetransferfrom"><a class="header" href="#safetransferfrom">safeTransferFrom</a></h3>
<pre><code class="language-solidity">function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes memory data)
    public
    virtual
    override
    callerOwnerOrApproved(from);
</code></pre>
<h3 id="safebatchtransferfrom-1"><a class="header" href="#safebatchtransferfrom-1">safeBatchTransferFrom</a></h3>
<pre><code class="language-solidity">function safeBatchTransferFrom(
    address from,
    address to,
    uint256[] memory ids,
    uint256[] memory amounts,
    bytes memory data
) public virtual override callerOwnerOrApproved(from);
</code></pre>
<h3 id="isapprovedforall"><a class="header" href="#isapprovedforall">isApprovedForAll</a></h3>
<pre><code class="language-solidity">function isApprovedForAll(address account, address operator) public view override returns (bool);
</code></pre>
<h3 id="balanceof"><a class="header" href="#balanceof">balanceOf</a></h3>
<pre><code class="language-solidity">function balanceOf(address account, uint256 id) public view override returns (uint256);
</code></pre>
<h3 id="supportsinterface-1"><a class="header" href="#supportsinterface-1">supportsInterface</a></h3>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override(ERC165, IERC165) returns (bool);
</code></pre>
<h3 id="balanceofbatch"><a class="header" href="#balanceofbatch">balanceOfBatch</a></h3>
<pre><code class="language-solidity">function balanceOfBatch(address[] memory accounts, uint256[] memory ids)
    public
    view
    override
    returns (uint256[] memory);
</code></pre>
<h3 id="uri-1"><a class="header" href="#uri-1">uri</a></h3>
<pre><code class="language-solidity">function uri(uint256) public view virtual returns (string memory);
</code></pre>
<h3 id="ownerofbatch"><a class="header" href="#ownerofbatch">ownerOfBatch</a></h3>
<p><em>Returns owners for the tokens with given <code>ids</code></em></p>
<pre><code class="language-solidity">function ownerOfBatch(uint256[] calldata ids) external view returns (address[] memory owners);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of the tokens</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owners</code></td><td><code>address[]</code></td><td>Owners of the tokens</td></tr>
</tbody></table>
</div>
<h3 id="_safetransferfrom"><a class="header" href="#_safetransferfrom">_safeTransferFrom</a></h3>
<p><em>Transfers <code>amount</code> tokens of token type <code>id</code> from <code>from</code> to <code>to</code></em></p>
<pre><code class="language-solidity">function _safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes memory data) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Source address</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Target address</td></tr>
<tr><td><code>id</code></td><td><code>uint256</code></td><td>ID of the token type</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Transfer amount</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Additional data with no specified format, sent in call to <code>to</code></td></tr>
</tbody></table>
</div>
<h3 id="_safebatchtransferfrom"><a class="header" href="#_safebatchtransferfrom">_safeBatchTransferFrom</a></h3>
<p><em>Transfers <code>amounts</code> tokens of token type <code>ids</code> from <code>from</code> to <code>to</code></em></p>
<pre><code class="language-solidity">function _safeBatchTransferFrom(
    address from,
    address to,
    uint256[] memory ids,
    uint256[] memory amounts,
    bytes memory data
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Source address</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Target address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of each token type</td></tr>
<tr><td><code>amounts</code></td><td><code>uint256[]</code></td><td>Transfer amounts per token type</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Additional data with no specified format, sent in call to <code>to</code></td></tr>
</tbody></table>
</div>
<h3 id="_mintbatch"><a class="header" href="#_mintbatch">_mintBatch</a></h3>
<p><em>Creates <code>amounts</code> tokens of tokens with <code>ids</code>, respectively by index, and assigns them to <code>to</code>.</em></p>
<pre><code class="language-solidity">function _mintBatch(address to, uint256[] memory ids, bytes memory data) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td>Target address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of each token</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Additional data with no specified format, sent in call to <code>to</code></td></tr>
</tbody></table>
</div>
<h3 id="_burnbatch"><a class="header" href="#_burnbatch">_burnBatch</a></h3>
<p><em>Batch version of <code>_burn</code> function. Destroys tokens with identifiers <code>ids</code> respectively by index.</em></p>
<pre><code class="language-solidity">function _burnBatch(address from, uint256[] memory ids) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Target address</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>IDs of each token</td></tr>
</tbody></table>
</div>
<h3 id="_setapprovalforall"><a class="header" href="#_setapprovalforall">_setApprovalForAll</a></h3>
<p><em>Updates <code>operator</code> to operate on all of <code>owner</code> tokens based on <code>approved</code> flag</em></p>
<pre><code class="language-solidity">function _setApprovalForAll(address owner, address operator, bool approved) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>Address to approve</td></tr>
<tr><td><code>operator</code></td><td><code>address</code></td><td>Address to be approved</td></tr>
<tr><td><code>approved</code></td><td><code>bool</code></td><td>True if the operator is approved, false to revoke approval</td></tr>
</tbody></table>
</div>
<h3 id="_dosafetransferacceptancecheck"><a class="header" href="#_dosafetransferacceptancecheck">_doSafeTransferAcceptanceCheck</a></h3>
<p><em>Performs token acceptance check of single ERC1155D token during single transfer.</em></p>
<pre><code class="language-solidity">function _doSafeTransferAcceptanceCheck(
    address operator,
    address from,
    address to,
    uint256 id,
    uint256 amount,
    bytes memory data
) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>operator</code></td><td><code>address</code></td><td>Address of transfer operator.</td></tr>
<tr><td><code>from</code></td><td><code>address</code></td><td>Sender address.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Receiver address.</td></tr>
<tr><td><code>id</code></td><td><code>uint256</code></td><td>ID of the token being transferred.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of the token being transferred.</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Additional data with no specified format.</td></tr>
</tbody></table>
</div>
<h3 id="_dosafebatchtransferacceptancecheck"><a class="header" href="#_dosafebatchtransferacceptancecheck">_doSafeBatchTransferAcceptanceCheck</a></h3>
<p><em>Performs token acceptance check of multiple ERC1155D tokens during batch transfer.</em></p>
<pre><code class="language-solidity">function _doSafeBatchTransferAcceptanceCheck(
    address operator,
    address from,
    address to,
    uint256[] memory ids,
    uint256[] memory amounts,
    bytes memory data
) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>operator</code></td><td><code>address</code></td><td>Address of transfer operator.</td></tr>
<tr><td><code>from</code></td><td><code>address</code></td><td>Sender address.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Receiver address.</td></tr>
<tr><td><code>ids</code></td><td><code>uint256[]</code></td><td>ID of the token being transferred.</td></tr>
<tr><td><code>amounts</code></td><td><code>uint256[]</code></td><td>Amount of the token being transferred.</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Additional data with no specified format.</td></tr>
</tbody></table>
</div>
<h2 id="errors-6"><a class="header" href="#errors-6">Errors</a></h2>
<h3 id="arraylengthmismatch"><a class="header" href="#arraylengthmismatch">ArrayLengthMismatch</a></h3>
<pre><code class="language-solidity">error ArrayLengthMismatch();
</code></pre>
<h3 id="transfertozeroaddress"><a class="header" href="#transfertozeroaddress">TransferToZeroAddress</a></h3>
<pre><code class="language-solidity">error TransferToZeroAddress();
</code></pre>
<h3 id="transferfromzeroaddress"><a class="header" href="#transferfromzeroaddress">TransferFromZeroAddress</a></h3>
<pre><code class="language-solidity">error TransferFromZeroAddress();
</code></pre>
<h3 id="zeroaddressquery"><a class="header" href="#zeroaddressquery">ZeroAddressQuery</a></h3>
<pre><code class="language-solidity">error ZeroAddressQuery();
</code></pre>
<h3 id="tokennotexist"><a class="header" href="#tokennotexist">TokenNotExist</a></h3>
<pre><code class="language-solidity">error TokenNotExist();
</code></pre>
<h3 id="tokenalreadyminted"><a class="header" href="#tokenalreadyminted">TokenAlreadyMinted</a></h3>
<pre><code class="language-solidity">error TokenAlreadyMinted();
</code></pre>
<h3 id="callernotownerorapproved"><a class="header" href="#callernotownerorapproved">CallerNotOwnerOrApproved</a></h3>
<pre><code class="language-solidity">error CallerNotOwnerOrApproved();
</code></pre>
<h3 id="insufficientbalance"><a class="header" href="#insufficientbalance">InsufficientBalance</a></h3>
<pre><code class="language-solidity">error InsufficientBalance(address account);
</code></pre>
<h3 id="settingapprovaltoself"><a class="header" href="#settingapprovaltoself">SettingApprovalToSelf</a></h3>
<pre><code class="language-solidity">error SettingApprovalToSelf();
</code></pre>
<h3 id="transferoferc1155rejected"><a class="header" href="#transferoferc1155rejected">TransferOfERC1155Rejected</a></h3>
<pre><code class="language-solidity">error TransferOfERC1155Rejected();
</code></pre>
<h3 id="transfertononerc1155receiver"><a class="header" href="#transfertononerc1155receiver">TransferToNonERC1155Receiver</a></h3>
<pre><code class="language-solidity">error TransferToNonERC1155Receiver();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="uribuilder-1"><a class="header" href="#uribuilder-1">URIBuilder</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certificates/URIBuilder.sol">Git Source</a></p>
<p><em>Assembles the metadata for the certificate token.</em></p>
<h2 id="state-variables-8"><a class="header" href="#state-variables-8">State Variables</a></h2>
<h3 id="_inboundshipmentstorage"><a class="header" href="#_inboundshipmentstorage">_inboundShipmentStorage</a></h3>
<p><em><code>InboundShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">InboundShipmentStorage private immutable _inboundShipmentStorage;
</code></pre>
<h3 id="_publicbaseuri"><a class="header" href="#_publicbaseuri">_publicBaseURI</a></h3>
<p><em>Base URI for public data</em></p>
<pre><code class="language-solidity">string private _publicBaseURI;
</code></pre>
<h3 id="_privatebaseuri"><a class="header" href="#_privatebaseuri">_privateBaseURI</a></h3>
<p><em>Base URI for private data</em></p>
<pre><code class="language-solidity">string private _privateBaseURI;
</code></pre>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="constructor-7"><a class="header" href="#constructor-7">constructor</a></h3>
<pre><code class="language-solidity">constructor(address inboundShipmentStorage_, string memory publicBaseURI_, string memory privateBaseURI_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>inboundShipmentStorage_</code></td><td><code>address</code></td><td><code>InboundShipmentStorage</code> contract address</td></tr>
<tr><td><code>publicBaseURI_</code></td><td><code>string</code></td><td>Base URI for token public data</td></tr>
<tr><td><code>privateBaseURI_</code></td><td><code>string</code></td><td>Base URI for private data</td></tr>
</tbody></table>
</div>
<h3 id="builduri"><a class="header" href="#builduri">buildURI</a></h3>
<p><em>Builds the URI for a token</em></p>
<pre><code class="language-solidity">function buildURI(uint256 tokenId) external view returns (string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>ID of the token</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>URI for the token</td></tr>
</tbody></table>
</div>
<h3 id="inboundshipmentstorage"><a class="header" href="#inboundshipmentstorage">inboundShipmentStorage</a></h3>
<p><em>Returns the <code>InboundShipmentStorage</code> contract address</em></p>
<pre><code class="language-solidity">function inboundShipmentStorage() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>InboundShipmentStorage</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="publicbaseuri"><a class="header" href="#publicbaseuri">publicBaseURI</a></h3>
<p><em>Returns the base URI for public data</em></p>
<pre><code class="language-solidity">function publicBaseURI() public view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Base URI for public data</td></tr>
</tbody></table>
</div>
<h3 id="privatebaseuri"><a class="header" href="#privatebaseuri">privateBaseURI</a></h3>
<p><em>Returns the base URI for private data</em></p>
<pre><code class="language-solidity">function privateBaseURI() public view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Base URI for private data</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="contracts/certs-management//contracts/certs-management/common">common</a></li>
<li><a href="contracts/certs-management//contracts/certs-management/redemption">redemption</a></li>
<li><a href="contracts/certs-management//contracts/certs-management/tokenization">tokenization</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="contracts/certs-management/common/BaseManagementStorage.sol/contract.BaseManagementStorage.html">BaseManagementStorage</a></li>
<li><a href="contracts/certs-management/common/IRequestsEvents.sol/interface.IRequestsEvents.html">IRequestsEvents</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basemanagementstorage"><a class="header" href="#basemanagementstorage">BaseManagementStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certs-management/common/BaseManagementStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/certs-management/common/BaseManagementStorage.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<p><em>Base storage contract of the management data</em></p>
<h2 id="state-variables-9"><a class="header" href="#state-variables-9">State Variables</a></h2>
<h3 id="_requestcount"><a class="header" href="#_requestcount">_requestCount</a></h3>
<p><em>Count of the requests</em></p>
<pre><code class="language-solidity">uint256 private _requestCount;
</code></pre>
<h3 id="_shipmentidtorequestid"><a class="header" href="#_shipmentidtorequestid">_shipmentIdToRequestId</a></h3>
<p><em>Mapping of shipment identifier to request identifier</em></p>
<pre><code class="language-solidity">mapping(uint256 shipmentId =&gt; uint256 requestId) private _shipmentIdToRequestId;
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="constructor-8"><a class="header" href="#constructor-8">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="requestcount-1"><a class="header" href="#requestcount-1">requestCount</a></h3>
<p><em>Returns the count of the requests</em></p>
<pre><code class="language-solidity">function requestCount() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Count of the requests</td></tr>
</tbody></table>
</div>
<h3 id="requestexists-2"><a class="header" href="#requestexists-2">requestExists</a></h3>
<p><em>Returns flag if request exists</em></p>
<pre><code class="language-solidity">function requestExists(uint256 requestId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if request exists</td></tr>
</tbody></table>
</div>
<h3 id="requestforshipment"><a class="header" href="#requestforshipment">requestForShipment</a></h3>
<pre><code class="language-solidity">function requestForShipment(uint256 shipmentId) public view returns (uint256);
</code></pre>
<h3 id="_inclementrequestcount"><a class="header" href="#_inclementrequestcount">_inclementRequestCount</a></h3>
<p><em>Increments the count of the requests</em></p>
<pre><code class="language-solidity">function _inclementRequestCount() internal returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>New count of the requests</td></tr>
</tbody></table>
</div>
<h3 id="_setrequesttoshipments"><a class="header" href="#_setrequesttoshipments">_setRequestToShipments</a></h3>
<p><em>Sets shipments to the request</em></p>
<pre><code class="language-solidity">function _setRequestToShipments(uint256[] calldata shipmentIds_, uint256 requestId) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments in the request</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="requestforshipmentbatch"><a class="header" href="#requestforshipmentbatch">requestForShipmentBatch</a></h3>
<p><em>Returns the request identifiers associated with the shipments</em></p>
<pre><code class="language-solidity">function requestForShipmentBatch(uint256[] memory shipmentIds_) external view returns (uint256[] memory requestIds);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the requests</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="irequestsevents"><a class="header" href="#irequestsevents">IRequestsEvents</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certs-management/common/IRequestsEvents.sol">Git Source</a></p>
<p><em>Interface containing common events for the processors working with requests</em></p>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="requestcreated-1"><a class="header" href="#requestcreated-1">RequestCreated</a></h3>
<p><em>Emitted when a new request is created</em></p>
<pre><code class="language-solidity">event RequestCreated(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestrecreated"><a class="header" href="#requestrecreated">RequestRecreated</a></h3>
<p><em>Emitted when a request is recreated</em></p>
<pre><code class="language-solidity">event RequestRecreated(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestapproved-1"><a class="header" href="#requestapproved-1">RequestApproved</a></h3>
<p><em>Emitted when a request is approved</em></p>
<pre><code class="language-solidity">event RequestApproved(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestapprovalcompleted-1"><a class="header" href="#requestapprovalcompleted-1">RequestApprovalCompleted</a></h3>
<p><em>Emitted when a request collected enough approvals</em></p>
<pre><code class="language-solidity">event RequestApprovalCompleted(uint256 indexed requestId);
</code></pre>
<h3 id="requestcompleted"><a class="header" href="#requestcompleted">RequestCompleted</a></h3>
<p><em>Emitted when a request is completed</em></p>
<pre><code class="language-solidity">event RequestCompleted(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestrejected-1"><a class="header" href="#requestrejected-1">RequestRejected</a></h3>
<p><em>Emitted when a request is rejected</em></p>
<pre><code class="language-solidity">event RequestRejected(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="requestreverted-1"><a class="header" href="#requestreverted-1">RequestReverted</a></h3>
<p><em>Emitted when a request is reverted</em></p>
<pre><code class="language-solidity">event RequestReverted(uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-5"><a class="header" href="#contents-5">Contents</a></h1>
<ul>
<li><a href="contracts/certs-management/redemption/RedemptionProcessor.sol/contract.RedemptionProcessor.html">RedemptionProcessor</a></li>
<li><a href="contracts/certs-management/redemption/RedemptionStorage.sol/contract.RedemptionStorage.html">RedemptionStorage</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="redemptionprocessor"><a class="header" href="#redemptionprocessor">RedemptionProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certs-management/redemption/RedemptionProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/certs-management/redemption/RedemptionProcessor.sol//contracts/certs-management/common/IRequestsEvents.sol/interface.IRequestsEvents.html">IRequestsEvents</a>, IRedemptionRecovery, IRedemptionCallback, ERC2771Context, <a href="contracts/certs-management/redemption/RedemptionProcessor.sol//contracts/bridge/BridgeInteractor.sol/abstract.BridgeInteractor.html">BridgeInteractor</a>, ERC1155Holder, <a href="contracts/certs-management/redemption/RedemptionProcessor.sol//contracts/bridge/BridgeMessagesMapper.sol/abstract.BridgeMessagesMapper.html">BridgeMessagesMapper</a></p>
<p><em>Contract responsible for processing redemption and refund requests. It's responsible for following
the steps defined with <code>CREATE_REDEMPTION</code> and <code>REFUND_TOKENS</code> processes and to provide update of
the redemption and refund relevant data. Communicates with the L1 contracts via bridge by implementing
<code>BridgeInteractor</code> contract. Contract can also handle meta transactions by implementing <code>ERC2771Context</code>
contract.
Redemption process is defined with a goal of maintaining the protocol integrity when precious metals
are to be removed from the vaults. In that case, this real world event will reflect on-chain by burning
the NFT certificates representing precious metal units, as well as their token representation on L1.
L1 tokens will be send to special burner wallet by users willing to redeem their L1 tokens for precious metals.
This is done to ensure the 1:1 ratio between the real world assets and their on-chain representation.
The result of the redemption process should be burning of NFT certificates and L1 tokens, with one exception.
In case precious metals should be moved between two vaults, the standard procedure where precious metal goes
through inbound shipment process and later on optionally tokenisation process should be followed, without
minting of new certificates. Therefore, these certificates should not be destroyed at the end of the
redemption process, as by procedure, immediate tokenisation process should follow. This is achieved by
based on the shipment type which is checked during the redemption process.
In case of redemption request being rejected for any reason, the funds should be returned to the user
who transferred his L1 tokens to burner wallet before start of redemption process. This is done by going
trough the refund process, which is defined with <code>REFUND_TOKENS</code> identifier. The refund is related to
the redemption request to ensure there is no case, for example, of double refunding. In case refund is completed,
the related redemption request cannot be recreated.
Contract is aware of setting if the bridge is active or not. In case of inactivity, it will not send
messages and will allow futher execution of the tokenisation steps. In this case, protocol integrity
will relay on the manual execution of the operations on the other side of the bridge previously done
by the messages send.
The following are the ordered function calls for redemption process, as well as the roles allowed to
execute them (defined by process during deployment):
1.<code>createRequest</code> / <code>recreateRequest</code> - TM
2.<code>approveRequest</code> - TMA, TME
3.<code>burnCertificates</code> - <code>BridgeMediator</code> contract
4.<code>completeRequest</code> - TMA, TME
-.<code>fixBurnMessage</code> - <code>BridgeMediator</code> contract
-.<code>rejectRequest</code> - depends on the step
The following are the ordered function calls for refund process, as well as the roles allowed to execute
them (defined by process during deployment):
1.<code>createRefund</code> - TM
2.<code>approveRefund</code> - TMA, TME, TM
-.<code>fixRefundMessage</code> - <code>BridgeMediator</code> contract
-.<code>rejectRequest</code> - depends on the step</em></p>
<h2 id="state-variables-10"><a class="header" href="#state-variables-10">State Variables</a></h2>
<h3 id="_processmanager"><a class="header" href="#_processmanager">_processManager</a></h3>
<p><em><code>ProcessManager</code> contract</em></p>
<pre><code class="language-solidity">ProcessManager private immutable _processManager;
</code></pre>
<h3 id="_certscollection"><a class="header" href="#_certscollection">_certsCollection</a></h3>
<p><em><code>Certificates</code> contract</em></p>
<pre><code class="language-solidity">Certificates private immutable _certsCollection;
</code></pre>
<h3 id="_walletmanager"><a class="header" href="#_walletmanager">_walletManager</a></h3>
<p><em><code>WalletManger</code> contract</em></p>
<pre><code class="language-solidity">WalletManager private immutable _walletManager;
</code></pre>
<h3 id="_redemptionstorage"><a class="header" href="#_redemptionstorage">_redemptionStorage</a></h3>
<p><em><code>RedemptionStorage</code> contract</em></p>
<pre><code class="language-solidity">RedemptionStorage private immutable _redemptionStorage;
</code></pre>
<h3 id="_inboundshipmentstorage-1"><a class="header" href="#_inboundshipmentstorage-1">_inboundShipmentStorage</a></h3>
<p><em><code>InboundShipmentProcessor</code> contract</em></p>
<pre><code class="language-solidity">InboundShipmentStorage private immutable _inboundShipmentStorage;
</code></pre>
<h3 id="_outboundshipmentstorage"><a class="header" href="#_outboundshipmentstorage">_outboundShipmentStorage</a></h3>
<p><em><code>OutboundShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">OutboundShipmentStorage private immutable _outboundShipmentStorage;
</code></pre>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="requestexists-3"><a class="header" href="#requestexists-3">requestExists</a></h3>
<pre><code class="language-solidity">modifier requestExists(uint256 requestId);
</code></pre>
<h3 id="validshipments"><a class="header" href="#validshipments">validShipments</a></h3>
<pre><code class="language-solidity">modifier validShipments(uint256[] calldata shipmentIds);
</code></pre>
<h3 id="constructor-9"><a class="header" href="#constructor-9">constructor</a></h3>
<pre><code class="language-solidity">constructor(
    address trustedForwarder_,
    address bridgeMediator_,
    address processManager_,
    address certsCollection_,
    address walletManager_,
    address inboundShipmentStorage_,
    address outboundShipmentStorage_,
    address redemptionStorage_
) ERC2771Context(trustedForwarder_) BridgeInteractor(bridgeMediator_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td>Address of the trusted forwarder</td></tr>
<tr><td><code>bridgeMediator_</code></td><td><code>address</code></td><td>Address of the <code>BridgeMediator</code> contract</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
<tr><td><code>certsCollection_</code></td><td><code>address</code></td><td>Address of the <code>Certificates</code> contract</td></tr>
<tr><td><code>walletManager_</code></td><td><code>address</code></td><td>Address of the <code>WalletManager</code> contract</td></tr>
<tr><td><code>inboundShipmentStorage_</code></td><td><code>address</code></td><td>Address of the <code>InboundShipmentStorage</code> contract</td></tr>
<tr><td><code>outboundShipmentStorage_</code></td><td><code>address</code></td><td>Address of the <code>OutboundShipmentStorage</code> contract</td></tr>
<tr><td><code>redemptionStorage_</code></td><td><code>address</code></td><td>Address of the <code>RedemptionStorage</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="createrequest-1"><a class="header" href="#createrequest-1">createRequest</a></h3>
<p><em>Creates new redemption request</em></p>
<pre><code class="language-solidity">function createRequest(uint256[] calldata shipmentIds) external validShipments(shipmentIds);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments associated with the request</td></tr>
</tbody></table>
</div>
<h3 id="recreaterequest"><a class="header" href="#recreaterequest">recreateRequest</a></h3>
<p><em>Recreates redemption request after rejection</em></p>
<pre><code class="language-solidity">function recreateRequest(uint256 requestId, uint256[] calldata shipmentIds)
    external
    requestExists(requestId)
    validShipments(shipmentIds);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments associated with the request</td></tr>
</tbody></table>
</div>
<h3 id="approverequest-1"><a class="header" href="#approverequest-1">approveRequest</a></h3>
<p><em>Approve a redemeption request</em></p>
<pre><code class="language-solidity">function approveRequest(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="ontokensburned"><a class="header" href="#ontokensburned">onTokensBurned</a></h3>
<pre><code class="language-solidity">function onTokensBurned(bytes32 messageId) external onlyMediator dataForMessageExists(messageId);
</code></pre>
<h3 id="completerequest"><a class="header" href="#completerequest">completeRequest</a></h3>
<p><em>Complete a redemption request</em></p>
<pre><code class="language-solidity">function completeRequest(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="rejectrequest-1"><a class="header" href="#rejectrequest-1">rejectRequest</a></h3>
<p><em>Rejects a redemption request</em></p>
<pre><code class="language-solidity">function rejectRequest(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="fixburntokensmessage"><a class="header" href="#fixburntokensmessage">fixBurnTokensMessage</a></h3>
<pre><code class="language-solidity">function fixBurnTokensMessage(bytes32 messageId)
    external
    onlyMediator
    dataForMessageExists(messageId)
    messageNotFixed(messageId);
</code></pre>
<h3 id="createrefund"><a class="header" href="#createrefund">createRefund</a></h3>
<p><em>Starts refund process for request with <code>requestId</code></em></p>
<pre><code class="language-solidity">function createRefund(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request refund is related to</td></tr>
</tbody></table>
</div>
<h3 id="approverefund"><a class="header" href="#approverefund">approveRefund</a></h3>
<p><em>Approves refund for the request with <code>requestId</code></em></p>
<pre><code class="language-solidity">function approveRefund(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request refund is approved for</td></tr>
</tbody></table>
</div>
<h3 id="rejectrefund"><a class="header" href="#rejectrefund">rejectRefund</a></h3>
<p><em>Rejects the refund for the request with <code>requestId</code></em></p>
<pre><code class="language-solidity">function rejectRefund(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request refund is rejected for</td></tr>
</tbody></table>
</div>
<h3 id="fixrefundtokensmessage"><a class="header" href="#fixrefundtokensmessage">fixRefundTokensMessage</a></h3>
<pre><code class="language-solidity">function fixRefundTokensMessage(bytes32 messageId)
    external
    onlyMediator
    dataForMessageExists(messageId)
    messageNotFixed(messageId);
</code></pre>
<h3 id="_createrequestdata"><a class="header" href="#_createrequestdata">_createRequestData</a></h3>
<p><em>Creates <code>RedemptionStorage.Request</code> structure</em></p>
<pre><code class="language-solidity">function _createRequestData(uint256[] calldata shipmentIds, uint32 processId)
    private
    pure
    returns (RedemptionStorage.Request memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments in the request</td></tr>
<tr><td><code>processId</code></td><td><code>uint32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>RedemptionStorage.Request</code></td><td><code>RedemptionStorage.Request</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="_createrefunddata"><a class="header" href="#_createrefunddata">_createRefundData</a></h3>
<p><em>Creates <code>RedemptionStorage.Refund</code> structure</em></p>
<pre><code class="language-solidity">function _createRefundData(uint32 processId) private pure returns (RedemptionStorage.Refund memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processId</code></td><td><code>uint32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>RedemptionStorage.Refund</code></td><td><code>RedemptionStorage.Refund</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="_sendburntokensmessage"><a class="header" href="#_sendburntokensmessage">_sendBurnTokensMessage</a></h3>
<p><em>Sends burn tokens message
Executed only if bridge is active
Emits {BurnTokensMessageSent} event</em></p>
<pre><code class="language-solidity">function _sendBurnTokensMessage(uint256 requestId) private bridgeActive;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_sendrefundmessage"><a class="header" href="#_sendrefundmessage">_sendRefundMessage</a></h3>
<p><em>Sends refund tokens message
Executed only if bridge is active
Emits {RefundTokensMessageSent} event</em></p>
<pre><code class="language-solidity">function _sendRefundMessage(uint256 requestId) private bridgeActive;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_transfercerts"><a class="header" href="#_transfercerts">_transferCerts</a></h3>
<p><em>Transfers certificates depending on the shipment type and <code>reverted</code> flag</em></p>
<pre><code class="language-solidity">function _transferCerts(uint256[] memory shipmentIds, bool reverted) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments certificates will be transferred</td></tr>
<tr><td><code>reverted</code></td><td><code>bool</code></td><td>Flag if request reverted</td></tr>
</tbody></table>
</div>
<h3 id="_retrievecerts"><a class="header" href="#_retrievecerts">_retrieveCerts</a></h3>
<p><em>Retrieves the certificates so they are locked up during the redemption process</em></p>
<pre><code class="language-solidity">function _retrieveCerts(uint256[] memory shipmentIds) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments certificates will be retrieved</td></tr>
</tbody></table>
</div>
<h3 id="_revertcertsretrival"><a class="header" href="#_revertcertsretrival">_revertCertsRetrival</a></h3>
<p><em>Reverts the transfer of the certificates</em></p>
<pre><code class="language-solidity">function _revertCertsRetrival(uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request which shipments certificates will be reverted</td></tr>
</tbody></table>
</div>
<h3 id="_ontokensburned"><a class="header" href="#_ontokensburned">_onTokensBurned</a></h3>
<p><em>Executes after token burning operations depending on the request config</em></p>
<pre><code class="language-solidity">function _onTokensBurned(uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_signrequestprocess"><a class="header" href="#_signrequestprocess">_signRequestProcess</a></h3>
<p><em>Sign the process for the request if possible and return whether the step was updated</em></p>
<pre><code class="language-solidity">function _signRequestProcess(address signer, uint256 requestId) private returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether the step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="_signrefundprocess"><a class="header" href="#_signrefundprocess">_signRefundProcess</a></h3>
<p><em>Sign the process for the refund if possible and return whether the step was updated</em></p>
<pre><code class="language-solidity">function _signRefundProcess(address signer, uint256 requestId) private returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether the step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="_createmessageparams"><a class="header" href="#_createmessageparams">_createMessageParams</a></h3>
<p><em>Creates the message config for the <code>burnTokens</code> and <code>refundTokens</code> message
as they share the logic for determinating which shipments are burnable/redeemable</em></p>
<pre><code class="language-solidity">function _createMessageParams(uint256 requestId)
    private
    view
    returns (ForeignBridgeTypes.TokenOpsMessageConfig[] memory messageConfigs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageConfigs</code></td><td><code>ForeignBridgeTypes.TokenOpsMessageConfig[]</code></td><td>Array of messages configurations</td></tr>
</tbody></table>
</div>
<h3 id="_cleanupbarrelateddata"><a class="header" href="#_cleanupbarrelateddata">_cleanupBarRelatedData</a></h3>
<p><em>Cleans up the bar related data</em></p>
<pre><code class="language-solidity">function _cleanupBarRelatedData(uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_revertifunexpectedrequeststatus"><a class="header" href="#_revertifunexpectedrequeststatus">_revertIfUnexpectedRequestStatus</a></h3>
<p><em>Checks if the status of the request is equal to the expected status</em></p>
<pre><code class="language-solidity">function _revertIfUnexpectedRequestStatus(uint256 requestId, ReqStatus expectedStatus) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>expectedStatus</code></td><td><code>ReqStatus</code></td><td>Expected status of the request</td></tr>
</tbody></table>
</div>
<h3 id="_revertifinvalidrefundstatus"><a class="header" href="#_revertifinvalidrefundstatus">_revertIfInvalidRefundStatus</a></h3>
<p><em>Checks and reverts if the status of the refund is not equal to the expected status</em></p>
<pre><code class="language-solidity">function _revertIfInvalidRefundStatus(uint256 requestId, RefundStatus expectedStatus) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>expectedStatus</code></td><td><code>RefundStatus</code></td><td>Expected status of the refund</td></tr>
</tbody></table>
</div>
<h3 id="_revertifrequeststatusvalid"><a class="header" href="#_revertifrequeststatusvalid">_revertIfRequestStatusValid</a></h3>
<p><em>Checks and reverts if the request status is valid</em></p>
<pre><code class="language-solidity">function _revertIfRequestStatusValid(uint256 requestId) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_revertifrefundactiveorcompleted"><a class="header" href="#_revertifrefundactiveorcompleted">_revertIfRefundActiveOrCompleted</a></h3>
<p><em>Checks and reverts if the refund is active or completed</em></p>
<pre><code class="language-solidity">function _revertIfRefundActiveOrCompleted(uint256 requestId) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_revertifrequestexpectsmessage"><a class="header" href="#_revertifrequestexpectsmessage">_revertIfRequestExpectsMessage</a></h3>
<p><em>Checks and reverts if the request expects <code>burnCertificates</code> to be executed</em></p>
<pre><code class="language-solidity">function _revertIfRequestExpectsMessage(uint256 requestId) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_shipmentredeemable"><a class="header" href="#_shipmentredeemable">_shipmentRedeemable</a></h3>
<p><em>Returns whether the shipment is redeemable</em></p>
<pre><code class="language-solidity">function _shipmentRedeemable(uint8 shipmentType) private pure returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentType</code></td><td><code>uint8</code></td><td>Type of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if the shipment is redeemable</td></tr>
</tbody></table>
</div>
<h3 id="_shipmentpartofactiverequest"><a class="header" href="#_shipmentpartofactiverequest">_shipmentPartOfActiveRequest</a></h3>
<p><em>Returns whether the shipment is part of the active request</em></p>
<pre><code class="language-solidity">function _shipmentPartOfActiveRequest(uint256 requestId) private view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the shipment is part of the active request</td></tr>
</tbody></table>
</div>
<h3 id="_setdataformessage-2"><a class="header" href="#_setdataformessage-2">_setDataForMessage</a></h3>
<p><em>Sets data for the message</em></p>
<pre><code class="language-solidity">function _setDataForMessage(bytes32 messageId, uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_dataformessage"><a class="header" href="#_dataformessage">_dataForMessage</a></h3>
<p><em>Returns <code>uint256</code> representation of the <code>bytes32</code> message data</em></p>
<pre><code class="language-solidity">function _dataForMessage(bytes32 messageId) private view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td><code>uint256</code> representation of the <code>bytes32</code> message data</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8reqstatus"><a class="header" href="#_asuint8reqstatus">_asUint8ReqStatus</a></h3>
<p><em>Converts <code>ReqStatus</code> enum to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8ReqStatus(ReqStatus status) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status</code></td><td><code>ReqStatus</code></td><td>ReqStatus enum value</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of the <code>ReqStatus</code> enum</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8refundstatus"><a class="header" href="#_asuint8refundstatus">_asUint8RefundStatus</a></h3>
<p><em>Converts <code>RefundStatus</code> enum to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8RefundStatus(RefundStatus status) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status</code></td><td><code>RefundStatus</code></td><td>RefundStatus enum value</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of the <code>RefundStatus</code> enum</td></tr>
</tbody></table>
</div>
<h2 id="events-5"><a class="header" href="#events-5">Events</a></h2>
<h3 id="burntokensmessagesent"><a class="header" href="#burntokensmessagesent">BurnTokensMessageSent</a></h3>
<p><em>Emitted when <code>burnTokens</code> message is sent</em></p>
<pre><code class="language-solidity">event BurnTokensMessageSent(uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<h3 id="refundtokensmessagesent"><a class="header" href="#refundtokensmessagesent">RefundTokensMessageSent</a></h3>
<p><em>Emmited when <code>refundTokens</code> message is sent</em></p>
<pre><code class="language-solidity">event RefundTokensMessageSent(uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<h3 id="certificatesburned"><a class="header" href="#certificatesburned">CertificatesBurned</a></h3>
<p><em>Emitted when NFT certificates are burned</em></p>
<pre><code class="language-solidity">event CertificatesBurned(uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<h3 id="refundstarted"><a class="header" href="#refundstarted">RefundStarted</a></h3>
<p><em>Emitted when refund process started</em></p>
<pre><code class="language-solidity">event RefundStarted(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="refundapproved"><a class="header" href="#refundapproved">RefundApproved</a></h3>
<p><em>Emitted when refund process approved</em></p>
<pre><code class="language-solidity">event RefundApproved(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="refundcompleted"><a class="header" href="#refundcompleted">RefundCompleted</a></h3>
<pre><code class="language-solidity">event RefundCompleted(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="refundrejected"><a class="header" href="#refundrejected">RefundRejected</a></h3>
<p><em>Emitted when refund is rejected</em></p>
<pre><code class="language-solidity">event RefundRejected(address indexed sender, uint256 indexed requestId);
</code></pre>
<h2 id="errors-7"><a class="header" href="#errors-7">Errors</a></h2>
<h3 id="requestnotexist-1"><a class="header" href="#requestnotexist-1">RequestNotExist</a></h3>
<p><em>Request does not exist</em></p>
<pre><code class="language-solidity">error RequestNotExist(uint256 requestId);
</code></pre>
<h3 id="shipmentinanotherrequest"><a class="header" href="#shipmentinanotherrequest">ShipmentInAnotherRequest</a></h3>
<p><em>Shipment already in another request</em></p>
<pre><code class="language-solidity">error ShipmentInAnotherRequest(uint256 shipmentId, uint256 requestId);
</code></pre>
<h3 id="shipmentnotapproved"><a class="header" href="#shipmentnotapproved">ShipmentNotApproved</a></h3>
<p><em>Shipment not approved</em></p>
<pre><code class="language-solidity">error ShipmentNotApproved(uint256 shipmentId);
</code></pre>
<h3 id="shipmentnotredeemable"><a class="header" href="#shipmentnotredeemable">ShipmentNotRedeemable</a></h3>
<p><em>Shipment not redeemable</em></p>
<pre><code class="language-solidity">error ShipmentNotRedeemable(uint256 shipmentId);
</code></pre>
<h3 id="invalidrequeststatus-1"><a class="header" href="#invalidrequeststatus-1">InvalidRequestStatus</a></h3>
<p><em>Request status different then expected</em></p>
<pre><code class="language-solidity">error InvalidRequestStatus(uint256 requestId, ReqStatus expectedStatus, ReqStatus actualStatus);
</code></pre>
<h3 id="invalidrefundstatus"><a class="header" href="#invalidrefundstatus">InvalidRefundStatus</a></h3>
<p><em>Invalid refund status</em></p>
<pre><code class="language-solidity">error InvalidRefundStatus(uint256 requestId, RefundStatus expectedStatus, RefundStatus actualStatus);
</code></pre>
<h3 id="requestcannotberejected"><a class="header" href="#requestcannotberejected">RequestCannotBeRejected</a></h3>
<p><em>Request cannot be rejected</em></p>
<pre><code class="language-solidity">error RequestCannotBeRejected(uint256 requestId);
</code></pre>
<h3 id="requeststatusnotinvalid"><a class="header" href="#requeststatusnotinvalid">RequestStatusNotInvalid</a></h3>
<p><em>Request status is not invalid</em></p>
<pre><code class="language-solidity">error RequestStatusNotInvalid(uint256 requestId);
</code></pre>
<h3 id="refundinprogress"><a class="header" href="#refundinprogress">RefundInProgress</a></h3>
<p><em>Refund is in progress</em></p>
<pre><code class="language-solidity">error RefundInProgress(uint256 requestId);
</code></pre>
<h3 id="requestrefunded"><a class="header" href="#requestrefunded">RequestRefunded</a></h3>
<p><em>Request is already refunded</em></p>
<pre><code class="language-solidity">error RequestRefunded(uint256 requestId);
</code></pre>
<h2 id="enums-1"><a class="header" href="#enums-1">Enums</a></h2>
<h3 id="reqstatus-1"><a class="header" href="#reqstatus-1">ReqStatus</a></h3>
<p><em>Possible statuses of the request</em></p>
<pre><code class="language-solidity">enum ReqStatus {
    NONE,
    CREATED,
    APPROVED,
    PENDING_COMPLETION,
    COMPLETED,
    REJECTED,
    REVERTED
}
</code></pre>
<h3 id="refundstatus"><a class="header" href="#refundstatus">RefundStatus</a></h3>
<p><em>Possible statuses of the refund</em></p>
<pre><code class="language-solidity">enum RefundStatus {
    NONE,
    CREATED,
    APPROVED,
    REJECTED,
    REVERTED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="redemptionstorage"><a class="header" href="#redemptionstorage">RedemptionStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certs-management/redemption/RedemptionStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/certs-management/redemption/RedemptionStorage.sol//contracts/certs-management/common/BaseManagementStorage.sol/contract.BaseManagementStorage.html">BaseManagementStorage</a></p>
<p><em>Storage contract for redemption and refund requests.
Does not impose any restrictions or checks on reading the data.
A contract using it should do the necessary checks on values and integrity of the data received.</em></p>
<h2 id="state-variables-11"><a class="header" href="#state-variables-11">State Variables</a></h2>
<h3 id="_requests-1"><a class="header" href="#_requests-1">_requests</a></h3>
<p><em>Mapping of request identfier to its data</em></p>
<pre><code class="language-solidity">mapping(uint256 requestId =&gt; Request request) private _requests;
</code></pre>
<h3 id="_refunds"><a class="header" href="#_refunds">_refunds</a></h3>
<p><em>Mapping of request identfier to its data</em></p>
<pre><code class="language-solidity">mapping(uint256 requestId =&gt; Refund refund) private _refunds;
</code></pre>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="constructor-10"><a class="header" href="#constructor-10">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) BaseManagementStorage(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="createrequest-2"><a class="header" href="#createrequest-2">createRequest</a></h3>
<p><em>Creates a new <code>Request</code> and stores it in the storage
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function createRequest(Request calldata request_) external onlyAuthorized returns (uint256 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>request_</code></td><td><code>Request</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="createrefund-1"><a class="header" href="#createrefund-1">createRefund</a></h3>
<p><em>Creates a new <code>Refund</code> for <code>requestId</code> and stores it in the storage
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function createRefund(uint256 requestId, Refund calldata refund_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>refund_</code></td><td><code>Refund</code></td><td>Refund data</td></tr>
</tbody></table>
</div>
<h3 id="setrefundstatus"><a class="header" href="#setrefundstatus">setRefundStatus</a></h3>
<p><em>Sets the refund status
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setRefundStatus(uint256 requestId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the refund</td></tr>
</tbody></table>
</div>
<h3 id="updaterequest"><a class="header" href="#updaterequest">updateRequest</a></h3>
<p><em>Updates a <code>Request</code> with <code>requestId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function updateRequest(uint256 requestId, Request calldata request_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>request_</code></td><td><code>Request</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="setstatus-1"><a class="header" href="#setstatus-1">setStatus</a></h3>
<p><em>Sets status of the request
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setStatus(uint256 requestId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the request</td></tr>
</tbody></table>
</div>
<h3 id="request-2"><a class="header" href="#request-2">request</a></h3>
<p><em>Returns the request data</em></p>
<pre><code class="language-solidity">function request(uint256 requestId) external view returns (Request memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Request</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<h3 id="shipmentids"><a class="header" href="#shipmentids">shipmentIds</a></h3>
<p><em>Returns the shipment identifiers related to the request</em></p>
<pre><code class="language-solidity">function shipmentIds(uint256 requestId) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Shipment identifiers</td></tr>
</tbody></table>
</div>
<h3 id="processid-1"><a class="header" href="#processid-1">processId</a></h3>
<p><em>Returns the process identifier of the request</em></p>
<pre><code class="language-solidity">function processId(uint256 requestId) external view returns (uint248);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint248</code></td><td>Process identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="status-1"><a class="header" href="#status-1">status</a></h3>
<p><em>Returns the status of the request</em></p>
<pre><code class="language-solidity">function status(uint256 requestId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Status of the request</td></tr>
</tbody></table>
</div>
<h3 id="refundstatus-1"><a class="header" href="#refundstatus-1">refundStatus</a></h3>
<p><em>Returns the refund status</em></p>
<pre><code class="language-solidity">function refundStatus(uint256 requestId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Refund status</td></tr>
</tbody></table>
</div>
<h3 id="refundprocessid"><a class="header" href="#refundprocessid">refundProcessId</a></h3>
<p><em>Returns the process identifier of the refund</em></p>
<pre><code class="language-solidity">function refundProcessId(uint256 requestId) external view returns (uint248);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint248</code></td><td>Process identifier of the refund</td></tr>
</tbody></table>
</div>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="request-3"><a class="header" href="#request-3">Request</a></h3>
<p><em>Structure representing redemption request data</em></p>
<pre><code class="language-solidity">struct Request {
    uint32 processId;
    uint8 status;
    uint256[] shipmentIds;
}
</code></pre>
<h3 id="refund"><a class="header" href="#refund">Refund</a></h3>
<p><em>Structure representing refund data</em></p>
<pre><code class="language-solidity">struct Refund {
    uint32 processId;
    uint8 status;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-6"><a class="header" href="#contents-6">Contents</a></h1>
<ul>
<li><a href="contracts/certs-management/tokenization/TokenizationProcessor.sol/contract.TokenizationProcessor.html">TokenizationProcessor</a></li>
<li><a href="contracts/certs-management/tokenization/TokenizationStorage.sol/contract.TokenizationStorage.html">TokenizationStorage</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tokenizationprocessor"><a class="header" href="#tokenizationprocessor">TokenizationProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certs-management/tokenization/TokenizationProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ITokenizationRecovery, <a href="contracts/certs-management/tokenization/TokenizationProcessor.sol//contracts/certs-management/common/IRequestsEvents.sol/interface.IRequestsEvents.html">IRequestsEvents</a>, ERC2771Context, <a href="contracts/certs-management/tokenization/TokenizationProcessor.sol//contracts/bridge/BridgeInteractor.sol/abstract.BridgeInteractor.html">BridgeInteractor</a>, ERC1155Holder, <a href="contracts/certs-management/tokenization/TokenizationProcessor.sol//contracts/bridge/BridgeMessagesMapper.sol/abstract.BridgeMessagesMapper.html">BridgeMessagesMapper</a></p>
<p><em>Contract responsible for managing the tokenization requests. It's responsible for following
the steps defined with <code>CREATE_TOKENIZATION</code> process and to provide updates of the tokenisation
relevant data. It uses <code>TokenizationStorage</code> to store the data and multiple contracts to interact
with and update the data. Communicates with the L1 contracts via bridge by implementing <code>BridgeInteractor</code>
contract. Contract can also handle meta transactions by implementing <code>ERC2771Context</code> contract.
The tokenization process is defined with a goal of tokenizing previously create NFT certificates on L1.
At the end of the process, NFT certificates are stored in a special wallet called <code>Global Certificate</code>
which is holding all the certificates tokenized on L1. It's a single wallet holding all the certificates
that can be checked for in order to prove that L1 tokens are 1:1 ratio with the tokenized precious metals.
Contract is aware of setting if the bridge is active or not. In case of inactivity, it will not send
messages and will allow futher execution of the tokenisation steps. In this case, protocol integrity
will relay on the manual execution of the operations on the other side of the bridge previously done
by the messages send.
The following are the ordered function calls for tokenization process, as well as the roles allowed to
execute them (defined by process during deployment):
1.<code>createRequest</code> / <code>recreateRequest</code> -&gt; TM
2.<code>approveRequest</code> -&gt; TMA, TME, AU
3.<code>completeRequest</code> -&gt; AU
-.<code>rejectRequest</code> -&gt; Depends on the step
-.<code>fixReleaseTokensMessage</code> -&gt; <code>BridgeMediator</code> contract</em></p>
<h2 id="state-variables-12"><a class="header" href="#state-variables-12">State Variables</a></h2>
<h3 id="_processmanager-1"><a class="header" href="#_processmanager-1">_processManager</a></h3>
<p><em><code>ProcessManager</code> contract</em></p>
<pre><code class="language-solidity">ProcessManager private immutable _processManager;
</code></pre>
<h3 id="_certscollection-1"><a class="header" href="#_certscollection-1">_certsCollection</a></h3>
<p><em><code>Certificates</code> contract address</em></p>
<pre><code class="language-solidity">Certificates private immutable _certsCollection;
</code></pre>
<h3 id="_walletmanager-1"><a class="header" href="#_walletmanager-1">_walletManager</a></h3>
<p><em><code>WalletManager</code> contract address</em></p>
<pre><code class="language-solidity">WalletManager private immutable _walletManager;
</code></pre>
<h3 id="_inboundshipmentstorage-2"><a class="header" href="#_inboundshipmentstorage-2">_inboundShipmentStorage</a></h3>
<p><em><code>InboundShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">InboundShipmentStorage private immutable _inboundShipmentStorage;
</code></pre>
<h3 id="_tokenizationstorage"><a class="header" href="#_tokenizationstorage">_tokenizationStorage</a></h3>
<p><em><code>TokenizationStorage</code> contract</em></p>
<pre><code class="language-solidity">TokenizationStorage private immutable _tokenizationStorage;
</code></pre>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="requestexists-4"><a class="header" href="#requestexists-4">requestExists</a></h3>
<pre><code class="language-solidity">modifier requestExists(uint256 requestId);
</code></pre>
<h3 id="validshipments-1"><a class="header" href="#validshipments-1">validShipments</a></h3>
<pre><code class="language-solidity">modifier validShipments(uint256[] calldata shipmentIds);
</code></pre>
<h3 id="validstatus-1"><a class="header" href="#validstatus-1">validStatus</a></h3>
<pre><code class="language-solidity">modifier validStatus(uint256 requestId, Status expectedStatus);
</code></pre>
<h3 id="constructor-11"><a class="header" href="#constructor-11">constructor</a></h3>
<pre><code class="language-solidity">constructor(
    address trustedForwarder_,
    address bridgeMediator_,
    address processManager_,
    address inboundShipmentStorage_,
    address tokenizationStorage_,
    address certsCollection_,
    address walletManager_
) ERC2771Context(trustedForwarder_) BridgeInteractor(bridgeMediator_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td>Address of the <code>TrustedForwarder</code> contract</td></tr>
<tr><td><code>bridgeMediator_</code></td><td><code>address</code></td><td>Address of the <code>BridgeMediator</code> contract</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
<tr><td><code>inboundShipmentStorage_</code></td><td><code>address</code></td><td>Address of the <code>InboundShipmentStorage</code> contract</td></tr>
<tr><td><code>tokenizationStorage_</code></td><td><code>address</code></td><td>Address of the <code>TokenizationStorage</code> contract</td></tr>
<tr><td><code>certsCollection_</code></td><td><code>address</code></td><td>Address of the <code>Certificates</code> contract</td></tr>
<tr><td><code>walletManager_</code></td><td><code>address</code></td><td>Address of the <code>WalletManager</code> contracts</td></tr>
</tbody></table>
</div>
<h3 id="createrequest-3"><a class="header" href="#createrequest-3">createRequest</a></h3>
<p><em>Creates tokenisation request
Emits {RequestCreated} event</em></p>
<pre><code class="language-solidity">function createRequest(uint256[] calldata shipmentIds) external validShipments(shipmentIds);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments to be tokenized and part of the request</td></tr>
</tbody></table>
</div>
<h3 id="recreaterequest-1"><a class="header" href="#recreaterequest-1">recreateRequest</a></h3>
<p><em>Recreates tokenisation request
Emits {RequestRecreated} event</em></p>
<pre><code class="language-solidity">function recreateRequest(uint256 requestId, uint256[] calldata shipmentIds)
    external
    requestExists(requestId)
    validShipments(shipmentIds);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments to be tokenized and part of the request</td></tr>
</tbody></table>
</div>
<h3 id="approverequest-2"><a class="header" href="#approverequest-2">approveRequest</a></h3>
<p><em>Approves tokenisation request
Emits {RequestApproved} event</em></p>
<pre><code class="language-solidity">function approveRequest(uint256 requestId) external requestExists(requestId) validStatus(requestId, Status.CREATED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="completerequest-1"><a class="header" href="#completerequest-1">completeRequest</a></h3>
<p><em>Confirms that tokens are released and completes the request
Emits {RequestCompleted} event</em></p>
<pre><code class="language-solidity">function completeRequest(uint256 requestId) external requestExists(requestId) validStatus(requestId, Status.APPROVED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="rejectrequest-2"><a class="header" href="#rejectrequest-2">rejectRequest</a></h3>
<p><em>Rejects the request
Emits {RequestRejected} event</em></p>
<pre><code class="language-solidity">function rejectRequest(uint256 requestId) external requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="fixreleasetokensmessage"><a class="header" href="#fixreleasetokensmessage">fixReleaseTokensMessage</a></h3>
<p><em>Fixes the state of the protocol in case of the <code>releaseTokens</code> message failure
Callable only by bridge mediator contract
Emits {RequestReverted} event</em></p>
<pre><code class="language-solidity">function fixReleaseTokensMessage(bytes32 messageId)
    external
    onlyMediator
    dataForMessageExists(messageId)
    messageNotFixed(messageId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<h3 id="_sendminttokensmessage"><a class="header" href="#_sendminttokensmessage">_sendMintTokensMessage</a></h3>
<p><em>Sends <code>mintTokens</code> message to the bridge
Emits {MintTokensMessageSent} event</em></p>
<pre><code class="language-solidity">function _sendMintTokensMessage(uint256 requestId) private bridgeActive;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_sendreleasetokensmessage"><a class="header" href="#_sendreleasetokensmessage">_sendReleaseTokensMessage</a></h3>
<p><em>Sends <code>releaseTokens</code> message to the bridge
Emits {ReleaseTokensMessageSent} event</em></p>
<pre><code class="language-solidity">function _sendReleaseTokensMessage(uint256 requestId) private bridgeActive;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_sendtokenopsmessage"><a class="header" href="#_sendtokenopsmessage">_sendTokenOpsMessage</a></h3>
<p><em>Sends token message to the bridge</em></p>
<pre><code class="language-solidity">function _sendTokenOpsMessage(uint256 requestId, bytes4 methodSelector) private returns (bytes32 messageId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>methodSelector</code></td><td><code>bytes4</code></td><td>Selector of the method to call on the bridge receiver</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<h3 id="_revertcertstransfer"><a class="header" href="#_revertcertstransfer">_revertCertsTransfer</a></h3>
<p><em>Reverts the NFT Certificates transfer</em></p>
<pre><code class="language-solidity">function _revertCertsTransfer(uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_transfercerts-1"><a class="header" href="#_transfercerts-1">_transferCerts</a></h3>
<p><em>Transfers the NFT Certificates depending on whether its the result of reverting process which depends on the <code>reverted</code> flag</em></p>
<pre><code class="language-solidity">function _transferCerts(uint256[] memory shipmentIds, bool reverted) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
<tr><td><code>reverted</code></td><td><code>bool</code></td><td>Flag whether the transfer is reverted</td></tr>
</tbody></table>
</div>
<h3 id="_transfercertstoglobalcertwallet"><a class="header" href="#_transfercertstoglobalcertwallet">_transferCertsToGlobalCertWallet</a></h3>
<p><em>Transfers all of the certificates for <code>requestId</code> to the <code>Global Certificate</code> wallet</em></p>
<pre><code class="language-solidity">function _transferCertsToGlobalCertWallet(uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_signprocess"><a class="header" href="#_signprocess">_signProcess</a></h3>
<p><em>Sign the process for the request if possible and return whether the step was updated</em></p>
<pre><code class="language-solidity">function _signProcess(address signer, uint256 requestId) private returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether the step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="_createrequestdata-1"><a class="header" href="#_createrequestdata-1">_createRequestData</a></h3>
<p><em>Creates <code>TokenizationStorage.Request</code> structure</em></p>
<pre><code class="language-solidity">function _createRequestData(uint256[] calldata shipmentIds, uint32 processId)
    private
    pure
    returns (TokenizationStorage.Request memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments in the request</td></tr>
<tr><td><code>processId</code></td><td><code>uint32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>TokenizationStorage.Request</code></td><td><code>TokenizationStorage.Request</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="_createmessageparams-1"><a class="header" href="#_createmessageparams-1">_createMessageParams</a></h3>
<p><em>Assembles a data that should be sent over the bridge</em></p>
<pre><code class="language-solidity">function _createMessageParams(uint256 requestId)
    private
    view
    returns (ForeignBridgeTypes.TokenOpsMessageConfig[] memory mintMessageParams);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mintMessageParams</code></td><td><code>ForeignBridgeTypes.TokenOpsMessageConfig[]</code></td><td>Array of <code>TokenOpsMessageConfig</code> structure with the mint data</td></tr>
</tbody></table>
</div>
<h3 id="_revertifrequestcannotberecreated"><a class="header" href="#_revertifrequestcannotberecreated">_revertIfRequestCannotBeRecreated</a></h3>
<p><em>Checks and reverts if the request cannot be recreated</em></p>
<pre><code class="language-solidity">function _revertIfRequestCannotBeRecreated(uint256 requestId) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_shipmenttokenizable"><a class="header" href="#_shipmenttokenizable">_shipmentTokenizable</a></h3>
<p><em>Returns flag if the shipment is tokenizable</em></p>
<pre><code class="language-solidity">function _shipmentTokenizable(uint8 shipmentType) private pure returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentType</code></td><td><code>uint8</code></td><td>Type of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if the shipment is tokenizable</td></tr>
</tbody></table>
</div>
<h3 id="_shipmentpartofactiverequest-1"><a class="header" href="#_shipmentpartofactiverequest-1">_shipmentPartOfActiveRequest</a></h3>
<p><em>Returns flag if the shipment is part of the active request</em></p>
<pre><code class="language-solidity">function _shipmentPartOfActiveRequest(uint256 requestId) private view returns (bool inActiveRequest);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>inActiveRequest</code></td><td><code>bool</code></td><td>Flag if the shipment is part of the active request</td></tr>
</tbody></table>
</div>
<h3 id="_setdataformessage-3"><a class="header" href="#_setdataformessage-3">_setDataForMessage</a></h3>
<p><em>Sets data for the message</em></p>
<pre><code class="language-solidity">function _setDataForMessage(bytes32 messageId, uint256 requestId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="_dataformessage-1"><a class="header" href="#_dataformessage-1">_dataForMessage</a></h3>
<p><em>Returns <code>uint256</code> representation of the <code>bytes32</code> message data</em></p>
<pre><code class="language-solidity">function _dataForMessage(bytes32 messageId) private view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>messageId</code></td><td><code>bytes32</code></td><td>Identifier of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td><code>uint256</code> representation of the <code>bytes32</code> message data</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8status-1"><a class="header" href="#_asuint8status-1">_asUint8Status</a></h3>
<p><em>Converts <code>Status</code> enum to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8Status(Status status) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status</code></td><td><code>Status</code></td><td>Status enum</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of the <code>Status</code> enum</td></tr>
</tbody></table>
</div>
<h2 id="events-6"><a class="header" href="#events-6">Events</a></h2>
<h3 id="minttokensmessagesent"><a class="header" href="#minttokensmessagesent">MintTokensMessageSent</a></h3>
<p><em>Emitted when a <code>mintTokens</code> message is send to the bridge</em></p>
<pre><code class="language-solidity">event MintTokensMessageSent(uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<h3 id="releasetokensmessagesent"><a class="header" href="#releasetokensmessagesent">ReleaseTokensMessageSent</a></h3>
<p><em>Emitted when a <code>releaseTokens</code> message is sent to the bridge</em></p>
<pre><code class="language-solidity">event ReleaseTokensMessageSent(uint256 indexed requestId, bytes32 indexed messageId);
</code></pre>
<h2 id="errors-8"><a class="header" href="#errors-8">Errors</a></h2>
<h3 id="requestnotexist-2"><a class="header" href="#requestnotexist-2">RequestNotExist</a></h3>
<p><em>Request does not exist</em></p>
<pre><code class="language-solidity">error RequestNotExist(uint256 requestId);
</code></pre>
<h3 id="shipmentnottokenizable"><a class="header" href="#shipmentnottokenizable">ShipmentNotTokenizable</a></h3>
<p><em>Shipment not tokenizable</em></p>
<pre><code class="language-solidity">error ShipmentNotTokenizable(uint256 shipmentId);
</code></pre>
<h3 id="shipmentnotapproved-1"><a class="header" href="#shipmentnotapproved-1">ShipmentNotApproved</a></h3>
<p><em>Shipment not approved</em></p>
<pre><code class="language-solidity">error ShipmentNotApproved(uint256 shipmentId);
</code></pre>
<h3 id="shipmentinanotherrequest-1"><a class="header" href="#shipmentinanotherrequest-1">ShipmentInAnotherRequest</a></h3>
<p><em>Shipment already in another request</em></p>
<pre><code class="language-solidity">error ShipmentInAnotherRequest(uint256 shipmentId, uint256 requestId);
</code></pre>
<h3 id="invalidrequeststatus-2"><a class="header" href="#invalidrequeststatus-2">InvalidRequestStatus</a></h3>
<p><em>Unexpected request status</em></p>
<pre><code class="language-solidity">error InvalidRequestStatus(uint256 requestId, Status expectedStatus, Status actualStatus);
</code></pre>
<h3 id="requestcannotberecreated"><a class="header" href="#requestcannotberecreated">RequestCannotBeRecreated</a></h3>
<p><em>Request cannot be recreated</em></p>
<pre><code class="language-solidity">error RequestCannotBeRecreated(uint256 requestId);
</code></pre>
<h2 id="enums-2"><a class="header" href="#enums-2">Enums</a></h2>
<h3 id="status-2"><a class="header" href="#status-2">Status</a></h3>
<p><em>Possible statuses of the tokenization request</em></p>
<pre><code class="language-solidity">enum Status {
    NONE,
    CREATED,
    APPROVED,
    COMPLETED,
    REJECTED,
    REVERTED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tokenizationstorage"><a class="header" href="#tokenizationstorage">TokenizationStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/certs-management/tokenization/TokenizationStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/certs-management/tokenization/TokenizationStorage.sol//contracts/certs-management/common/BaseManagementStorage.sol/contract.BaseManagementStorage.html">BaseManagementStorage</a></p>
<p><em>Storage contract for tokenization requests. Does not impose any restrictions or checks on reading the data.
A contract using it should do the necessary checks on values and integrity of the data received.</em></p>
<h2 id="state-variables-13"><a class="header" href="#state-variables-13">State Variables</a></h2>
<h3 id="_requests-2"><a class="header" href="#_requests-2">_requests</a></h3>
<p><em>Mapping of request identfier to its data</em></p>
<pre><code class="language-solidity">mapping(uint256 requestId =&gt; Request request) private _requests;
</code></pre>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="constructor-12"><a class="header" href="#constructor-12">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) BaseManagementStorage(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="createrequest-4"><a class="header" href="#createrequest-4">createRequest</a></h3>
<p><em>Creates a new <code>Request</code> and stores it in the storage
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function createRequest(Request calldata request_) external onlyAuthorized returns (uint256 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>request_</code></td><td><code>Request</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="updaterequest-1"><a class="header" href="#updaterequest-1">updateRequest</a></h3>
<p><em>Updates a <code>Request</code> with <code>requestId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function updateRequest(uint256 requestId, Request calldata request_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>request_</code></td><td><code>Request</code></td><td>Request data</td></tr>
</tbody></table>
</div>
<h3 id="setstatus-2"><a class="header" href="#setstatus-2">setStatus</a></h3>
<p><em>Sets status of the request
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setStatus(uint256 requestId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the request</td></tr>
</tbody></table>
</div>
<h3 id="status-3"><a class="header" href="#status-3">status</a></h3>
<p><em>Returns the status of the request</em></p>
<pre><code class="language-solidity">function status(uint256 requestId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Status of the request</td></tr>
</tbody></table>
</div>
<h3 id="processid-2"><a class="header" href="#processid-2">processId</a></h3>
<p><em>Returns the process identifier of the request</em></p>
<pre><code class="language-solidity">function processId(uint256 requestId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Process identifier of the request</td></tr>
</tbody></table>
</div>
<h3 id="request-4"><a class="header" href="#request-4">request</a></h3>
<p><em>Returns the request data</em></p>
<pre><code class="language-solidity">function request(uint256 requestId) external view returns (Request memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Request</code></td><td>Request data represented with <code>Request</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="shipmentids-1"><a class="header" href="#shipmentids-1">shipmentIds</a></h3>
<p><em>Returns the shipment identifiers related to the request</em></p>
<pre><code class="language-solidity">function shipmentIds(uint256 requestId) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>List of shipment identifiers</td></tr>
</tbody></table>
</div>
<h2 id="structs-4"><a class="header" href="#structs-4">Structs</a></h2>
<h3 id="request-5"><a class="header" href="#request-5">Request</a></h3>
<p><em>Structure representing tokenization request data</em></p>
<pre><code class="language-solidity">struct Request {
    uint8 status;
    uint32 processId;
    uint256[] shipmentIds;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-7"><a class="header" href="#contents-7">Contents</a></h1>
<ul>
<li><a href="contracts/common/ArrayUtils.sol/library.ArrayUtils.html">ArrayUtils</a></li>
<li><a href="contracts/common/BaseProcessor.sol/abstract.BaseProcessor.html">BaseProcessor</a></li>
<li><a href="contracts/common/BridgeInterable.sol/abstract.BridgeInterable.html">BridgeInterable</a></li>
<li><a href="contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></li>
<li><a href="contracts/common/HolderWallet.sol/contract.HolderWallet.html">HolderWallet</a></li>
<li><a href="contracts/common/RelayerAware.sol/abstract.RelayerAware.html">RelayerAware</a></li>
<li><a href="contracts/common/WalletManager.sol/contract.WalletManager.html">WalletManager</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrayutils"><a class="header" href="#arrayutils">ArrayUtils</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/ArrayUtils.sol">Git Source</a></p>
<p><em>Utility library of inline array functions</em></p>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="_asboolsarray"><a class="header" href="#_asboolsarray">_asBoolsArray</a></h3>
<p><em>Returns of array of bools of a <code>length</code> items with a value of <code>element</code></em></p>
<pre><code class="language-solidity">function _asBoolsArray(uint256 length, bool element) internal pure returns (bool[] memory array);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>length</code></td><td><code>uint256</code></td><td>Length of the array</td></tr>
<tr><td><code>element</code></td><td><code>bool</code></td><td>Element to fill the array with</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>array</code></td><td><code>bool[]</code></td><td>Array containing <code>element</code></td></tr>
</tbody></table>
</div>
<h3 id="_asstringsarray"><a class="header" href="#_asstringsarray">_asStringsArray</a></h3>
<p><em>Returns array of strings with a <code>length</code> items and a values of <code>element</code></em></p>
<pre><code class="language-solidity">function _asStringsArray(uint256 length, string memory element) internal pure returns (string[] memory array);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>length</code></td><td><code>uint256</code></td><td>Length of the array</td></tr>
<tr><td><code>element</code></td><td><code>string</code></td><td>Element to fill the array with</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>array</code></td><td><code>string[]</code></td><td>Array containing <code>element</code></td></tr>
</tbody></table>
</div>
<h3 id="_asuint256array"><a class="header" href="#_asuint256array">_asUint256Array</a></h3>
<p><em>Returns uint256 array of a <code>length</code> items with a value of <code>element</code></em></p>
<pre><code class="language-solidity">function _asUint256Array(uint256 length, uint256 element) internal pure returns (uint256[] memory array);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>length</code></td><td><code>uint256</code></td><td>Length of the array</td></tr>
<tr><td><code>element</code></td><td><code>uint256</code></td><td>Element to fill the array with</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>array</code></td><td><code>uint256[]</code></td><td>Array containing <code>element</code></td></tr>
</tbody></table>
</div>
<h3 id="_asaddressarray"><a class="header" href="#_asaddressarray">_asAddressArray</a></h3>
<p><em>Returns addresses array of a <code>length</code> items with a value of <code>element</code></em></p>
<pre><code class="language-solidity">function _asAddressArray(uint256 length, address element) internal pure returns (address[] memory array);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>length</code></td><td><code>uint256</code></td><td>Length of the array</td></tr>
<tr><td><code>element</code></td><td><code>address</code></td><td>Element to fill the array with</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>array</code></td><td><code>address[]</code></td><td>Array containing <code>element</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="baseprocessor"><a class="header" href="#baseprocessor">BaseProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/BaseProcessor.sol">Git Source</a></p>
<p><em>Base contract for processors</em></p>
<h2 id="state-variables-14"><a class="header" href="#state-variables-14">State Variables</a></h2>
<h3 id="_processmanager-2"><a class="header" href="#_processmanager-2">_processManager</a></h3>
<pre><code class="language-solidity">ProcessManager internal immutable _processManager;
</code></pre>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="constructor-13"><a class="header" href="#constructor-13">constructor</a></h3>
<pre><code class="language-solidity">constructor(address processManager_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="processmanager"><a class="header" href="#processmanager">processManager</a></h3>
<p><em>Returns the <code>ProcessManager</code> contract</em></p>
<pre><code class="language-solidity">function processManager() external view returns (ProcessManager);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>ProcessManager</code></td><td><code>ProcessManager</code> contract address</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="bridgeinterable"><a class="header" href="#bridgeinterable">BridgeInterable</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/BridgeInterable.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/common/BridgeInterable.sol//contracts/bridge/BridgeInteractor.sol/abstract.BridgeInteractor.html">BridgeInteractor</a>, <a href="contracts/common/BridgeInterable.sol//contracts/bridge/BridgeMessagesMapper.sol/abstract.BridgeMessagesMapper.html">BridgeMessagesMapper</a></p>
<p><em>Abstract contract that enables interaction with the bridge and foreign contracts via mediator</em></p>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="constructor-14"><a class="header" href="#constructor-14">constructor</a></h3>
<pre><code class="language-solidity">constructor(address bridgeMediator_) BridgeInteractor(bridgeMediator_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bridgeMediator_</code></td><td><code>address</code></td><td>Address of the <code>BridgeMediator</code> contract</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="callguard"><a class="header" href="#callguard">CallGuard</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/CallGuard.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable2Step</p>
<p><em>Defines the logic for restricted method calling.</em></p>
<h2 id="state-variables-15"><a class="header" href="#state-variables-15">State Variables</a></h2>
<h3 id="_authorized"><a class="header" href="#_authorized">_authorized</a></h3>
<p><em>Mapping from account to flag if authorized to execute restricted methods</em></p>
<pre><code class="language-solidity">mapping(address account =&gt; bool authorized) private _authorized;
</code></pre>
<h2 id="functions-18"><a class="header" href="#functions-18">Functions</a></h2>
<h3 id="onlyauthorized"><a class="header" href="#onlyauthorized">onlyAuthorized</a></h3>
<pre><code class="language-solidity">modifier onlyAuthorized();
</code></pre>
<h3 id="constructor-15"><a class="header" href="#constructor-15">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) Ownable2Step;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the storage</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="setauthorized"><a class="header" href="#setauthorized">setAuthorized</a></h3>
<p><em>Sets authorized status for <code>account</code> to <code>status</code>
Callable only by owner
Emits {AuthorizationStatusChanged} event</em></p>
<pre><code class="language-solidity">function setAuthorized(address account, bool status) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to change status for</td></tr>
<tr><td><code>status</code></td><td><code>bool</code></td><td>New status</td></tr>
</tbody></table>
</div>
<h3 id="_setauthorized"><a class="header" href="#_setauthorized">_setAuthorized</a></h3>
<p><em>Changes the authorized status for <code>account</code>
Emits {AuthorizationStatusChanged} event</em></p>
<pre><code class="language-solidity">function _setAuthorized(address account, bool status) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to change status for</td></tr>
<tr><td><code>status</code></td><td><code>bool</code></td><td>New status</td></tr>
</tbody></table>
</div>
<h3 id="authorized"><a class="header" href="#authorized">authorized</a></h3>
<p><em>Returns the authorized status for <code>account</code></em></p>
<pre><code class="language-solidity">function authorized(address account) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to check status for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Authorized status</td></tr>
</tbody></table>
</div>
<h2 id="events-7"><a class="header" href="#events-7">Events</a></h2>
<h3 id="authorizationstatuschanged"><a class="header" href="#authorizationstatuschanged">AuthorizationStatusChanged</a></h3>
<p><em>Emitted when authorization status for <code>account</code> is changed</em></p>
<pre><code class="language-solidity">event AuthorizationStatusChanged(address indexed account, bool indexed status);
</code></pre>
<h2 id="errors-9"><a class="header" href="#errors-9">Errors</a></h2>
<h3 id="sendernotauthorized"><a class="header" href="#sendernotauthorized">SenderNotAuthorized</a></h3>
<p>Sender is not a authorized caller</p>
<pre><code class="language-solidity">error SenderNotAuthorized();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="holderwallet"><a class="header" href="#holderwallet">HolderWallet</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/HolderWallet.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable2Step, ERC1155Holder</p>
<p><em>Simple smart contract wallet that holds ERC1155 tokens</em></p>
<h2 id="state-variables-16"><a class="header" href="#state-variables-16">State Variables</a></h2>
<h3 id="_collection"><a class="header" href="#_collection">_collection</a></h3>
<p><em><code>ERC1155</code> collection address</em></p>
<pre><code class="language-solidity">IERC1155 private immutable _collection;
</code></pre>
<h2 id="functions-19"><a class="header" href="#functions-19">Functions</a></h2>
<h3 id="constructor-16"><a class="header" href="#constructor-16">constructor</a></h3>
<pre><code class="language-solidity">constructor(address collection) Ownable2Step;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>collection</code></td><td><code>address</code></td><td>ERC1155 collection address</td></tr>
</tbody></table>
</div>
<h3 id="setoperator"><a class="header" href="#setoperator">setOperator</a></h3>
<p><em>Sets the operator status for <code>operator</code>
Callable only by <code>owner</code></em></p>
<pre><code class="language-solidity">function setOperator(address operator, bool isOperator) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>operator</code></td><td><code>address</code></td><td>Operator to update status for</td></tr>
<tr><td><code>isOperator</code></td><td><code>bool</code></td><td>New operator status</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="relayeraware"><a class="header" href="#relayeraware">RelayerAware</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/RelayerAware.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC2771Context</p>
<p><em>Abstract contract that enables relayer awareness to the contracts</em></p>
<h2 id="functions-20"><a class="header" href="#functions-20">Functions</a></h2>
<h3 id="constructor-17"><a class="header" href="#constructor-17">constructor</a></h3>
<pre><code class="language-solidity">constructor(address trustedForwarder_) ERC2771Context(trustedForwarder_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="walletmanager"><a class="header" href="#walletmanager">WalletManager</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/common/WalletManager.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable2Step</p>
<p><em>Contract for managing core protocol wallet addresses</em></p>
<h2 id="state-variables-17"><a class="header" href="#state-variables-17">State Variables</a></h2>
<h3 id="_global_cert_wallet"><a class="header" href="#_global_cert_wallet">_GLOBAL_CERT_WALLET</a></h3>
<pre><code class="language-solidity">bytes32 private constant _GLOBAL_CERT_WALLET = keccak256(&quot;GLOBAL_CERT_WALLET&quot;);
</code></pre>
<h3 id="_custody_wallet"><a class="header" href="#_custody_wallet">_CUSTODY_WALLET</a></h3>
<pre><code class="language-solidity">bytes32 private constant _CUSTODY_WALLET = keccak256(&quot;CUSTODY_WALLET&quot;);
</code></pre>
<h3 id="wallets"><a class="header" href="#wallets">wallets</a></h3>
<p><em>Mapping from wallet ID to wallet address</em></p>
<pre><code class="language-solidity">mapping(bytes32 =&gt; address) public wallets;
</code></pre>
<h2 id="functions-21"><a class="header" href="#functions-21">Functions</a></h2>
<h3 id="constructor-18"><a class="header" href="#constructor-18">constructor</a></h3>
<pre><code class="language-solidity">constructor(address _owner) Ownable2Step;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
</tbody></table>
</div>
<h3 id="setwallet"><a class="header" href="#setwallet">setWallet</a></h3>
<p><em>Sets the wallet address for the given wallet ID
Callable only by the owner</em></p>
<pre><code class="language-solidity">function setWallet(bytes32 walletId_, address wallet_) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>walletId_</code></td><td><code>bytes32</code></td><td>Wallet ID</td></tr>
<tr><td><code>wallet_</code></td><td><code>address</code></td><td>Wallet address</td></tr>
</tbody></table>
</div>
<h3 id="wallet"><a class="header" href="#wallet">wallet</a></h3>
<p><em>Returns the wallet address for the given wallet ID</em></p>
<pre><code class="language-solidity">function wallet(bytes32 walletId_) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>walletId_</code></td><td><code>bytes32</code></td><td>Wallet ID</td></tr>
</tbody></table>
</div>
<h3 id="global_cert_wallet"><a class="header" href="#global_cert_wallet">GLOBAL_CERT_WALLET</a></h3>
<p><em>Returns the global certificate wallet address</em></p>
<pre><code class="language-solidity">function GLOBAL_CERT_WALLET() external pure returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Global certificate wallet address</td></tr>
</tbody></table>
</div>
<h3 id="custody_wallet"><a class="header" href="#custody_wallet">CUSTODY_WALLET</a></h3>
<p><em>Returns the custody wallet address</em></p>
<pre><code class="language-solidity">function CUSTODY_WALLET() external pure returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Custody wallet address</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-8"><a class="header" href="#contents-8">Contents</a></h1>
<ul>
<li><a href="contracts/forwarder/Forwarder.sol/contract.Forwarder.html">Forwarder</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="forwarder"><a class="header" href="#forwarder">Forwarder</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/forwarder/Forwarder.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable2Step, ERC2771Forwarder</p>
<p>Note This import is from <code>master</code> branch of OpenZeppelin contracts. Its a separate module compared to officialy released packacked
Intention is to use this only for <code>ERC2771Forwarder</code> and <code>ERC2771Context</code> smart contracts.
For the rest of the protocol, the official released package is going to be used.</p>
<p><em>Smart contract that enables meta transactions
Note This contract relies on an unpublished version of OpenZeppelin contracts, specifically ERC2771Forwarder contract
(https://github.com/OpenZeppelin/openzeppelin-contracts/pull/4346) which is planned to be released with the version 5.0
in the late September (https://github.com/OpenZeppelin/defender-docs/issues/214).
Note In order to tackle an known issue of potencial frontrunning when batch of transactions is send, relayers are introduced
so that only authorized accounts can execute transactions. As this contract is intended to be called from the known relayer,
this will also disallow arbitrary accounts to execute transactions for whatever reason. One of the reasons this is OK is that
in this case, as only relayer can execute transaction, it is not possible to frontrun the transaction which would then result
in relayers transaction to probably revert and therefore having false negative result, even though transaction was executed by someone else.</em></p>
<h2 id="state-variables-18"><a class="header" href="#state-variables-18">State Variables</a></h2>
<h3 id="_checkrelayer"><a class="header" href="#_checkrelayer">_checkRelayer</a></h3>
<p><em>Flag whether the sender should be checked for relayer status</em></p>
<pre><code class="language-solidity">bool private _checkRelayer;
</code></pre>
<h3 id="_relayers"><a class="header" href="#_relayers">_relayers</a></h3>
<p><em>Mapping from account to whether it is a relayer</em></p>
<pre><code class="language-solidity">mapping(address account =&gt; bool isRelayer) private _relayers;
</code></pre>
<h2 id="functions-22"><a class="header" href="#functions-22">Functions</a></h2>
<h3 id="onlyrelayer"><a class="header" href="#onlyrelayer">onlyRelayer</a></h3>
<pre><code class="language-solidity">modifier onlyRelayer();
</code></pre>
<h3 id="constructor-19"><a class="header" href="#constructor-19">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory name_, address[] memory relayers_) ERC2771Forwarder(name_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name_</code></td><td><code>string</code></td><td>The user readable name of the signing domain, i.e. the name of the DApp or the protocol.</td></tr>
<tr><td><code>relayers_</code></td><td><code>address[]</code></td><td>The array of initial relayers</td></tr>
</tbody></table>
</div>
<h3 id="setrelayerstatus"><a class="header" href="#setrelayerstatus">setRelayerStatus</a></h3>
<p><em>Sets relater status
Callable only by <code>owner</code>
Emits {RelayerStatusUpdated} event</em></p>
<pre><code class="language-solidity">function setRelayerStatus(address relayer, bool status) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>relayer</code></td><td><code>address</code></td><td>The relayer address</td></tr>
<tr><td><code>status</code></td><td><code>bool</code></td><td>The new status</td></tr>
</tbody></table>
</div>
<h3 id="setcheckrelayer"><a class="header" href="#setcheckrelayer">setCheckRelayer</a></h3>
<p><em>Sets the flag whether the sender should be checked if relayer
Callable only by <code>owner</code>
Emits {CheckRelayerUpdated} event</em></p>
<pre><code class="language-solidity">function setCheckRelayer(bool checkRelayer) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>checkRelayer</code></td><td><code>bool</code></td><td>The new value</td></tr>
</tbody></table>
</div>
<h3 id="execute"><a class="header" href="#execute">execute</a></h3>
<pre><code class="language-solidity">function execute(ForwardRequestData calldata request) public payable virtual override onlyRelayer;
</code></pre>
<h3 id="executebatch"><a class="header" href="#executebatch">executeBatch</a></h3>
<pre><code class="language-solidity">function executeBatch(ForwardRequestData[] calldata requests, address payable refundReceiver)
    public
    payable
    virtual
    override
    onlyRelayer;
</code></pre>
<h3 id="isrelayer"><a class="header" href="#isrelayer">isRelayer</a></h3>
<p><em>Returns whether the account is a relayer</em></p>
<pre><code class="language-solidity">function isRelayer(address account) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>The account to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether the account is a relayer</td></tr>
</tbody></table>
</div>
<h3 id="_setrelayercheck"><a class="header" href="#_setrelayercheck">_setRelayerCheck</a></h3>
<p><em>Sets the flag whether the sender should be checked if relayer
Emits {CheckRelayerUpdated} event</em></p>
<pre><code class="language-solidity">function _setRelayerCheck(bool checkRelayer) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>checkRelayer</code></td><td><code>bool</code></td><td>The new value</td></tr>
</tbody></table>
</div>
<h3 id="_setrelayerstatus"><a class="header" href="#_setrelayerstatus">_setRelayerStatus</a></h3>
<p><em>Sets relater status
Emits {RelayerStatusUpdated} event</em></p>
<pre><code class="language-solidity">function _setRelayerStatus(address relayer, bool status) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>relayer</code></td><td><code>address</code></td><td>The relayer address</td></tr>
<tr><td><code>status</code></td><td><code>bool</code></td><td>The new status</td></tr>
</tbody></table>
</div>
<h2 id="events-8"><a class="header" href="#events-8">Events</a></h2>
<h3 id="relayerstatuschanged"><a class="header" href="#relayerstatuschanged">RelayerStatusChanged</a></h3>
<p><em>Emitted when a relayer status has changed</em></p>
<pre><code class="language-solidity">event RelayerStatusChanged(address indexed relayer, bool status);
</code></pre>
<h3 id="checkrelayerchanged"><a class="header" href="#checkrelayerchanged">CheckRelayerChanged</a></h3>
<p><em>Emitted when the flag if relayer should be checked has changed</em></p>
<pre><code class="language-solidity">event CheckRelayerChanged(bool newValue);
</code></pre>
<h2 id="errors-10"><a class="header" href="#errors-10">Errors</a></h2>
<h3 id="callernotrelayer"><a class="header" href="#callernotrelayer">CallerNotRelayer</a></h3>
<p><em>Triggered when caller is not a relayer</em></p>
<pre><code class="language-solidity">error CallerNotRelayer();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-9"><a class="header" href="#contents-9">Contents</a></h1>
<ul>
<li><a href="contracts/multistep/Process.sol/struct.Signature.html">Signature</a></li>
<li><a href="contracts/multistep/Process.sol/struct.Process.html">Process</a></li>
<li><a href="contracts/multistep/Process.sol/library.ProcessLib.html">ProcessLib</a></li>
<li><a href="contracts/multistep/ProcessFactory.sol/contract.ProcessFactory.html">ProcessFactory</a></li>
<li><a href="contracts/multistep/ProcessManager.sol/contract.ProcessManager.html">ProcessManager</a></li>
<li><a href="contracts/multistep/ProcessTypes.sol/constants.ProcessTypes.html">ProcessTypes constants</a></li>
<li><a href="contracts/multistep/Step.sol/struct.Step.html">Step</a></li>
<li><a href="contracts/multistep/Step.sol/library.StepLib.html">StepLib</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="signature"><a class="header" href="#signature">Signature</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/Process.sol">Git Source</a></p>
<p><em>Structure containing the information about a signature</em></p>
<pre><code class="language-solidity">struct Signature {
    address signer;
    uint8 role;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="process"><a class="header" href="#process">Process</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/Process.sol">Git Source</a></p>
<p><em>Structure containing the information about a process</em></p>
<pre><code class="language-solidity">struct Process {
    Step[] steps;
    Signature[][] signatures;
    uint256 currentStepId;
    address rejector;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="processlib"><a class="header" href="#processlib">ProcessLib</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/Process.sol">Git Source</a></p>
<p><em>Convinience library for <code>Process</code> struct</em></p>
<h2 id="functions-23"><a class="header" href="#functions-23">Functions</a></h2>
<h3 id="sign"><a class="header" href="#sign">sign</a></h3>
<p><em>Signs the current step
NOTE Does not check if user is able to sign the step. This should be done before calling this function</em></p>
<pre><code class="language-solidity">function sign(Process storage self, address signer, uint8 role) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>role</code></td><td><code>uint8</code></td><td>Role of the signer</td></tr>
</tbody></table>
</div>
<h3 id="reject"><a class="header" href="#reject">reject</a></h3>
<p><em>Rejects the process</em></p>
<pre><code class="language-solidity">function reject(Process storage self, address rejector) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
<tr><td><code>rejector</code></td><td><code>address</code></td><td>Address of the rejector</td></tr>
</tbody></table>
</div>
<h3 id="cansign"><a class="header" href="#cansign">canSign</a></h3>
<p><em>Checks if the signer can sign the current step</em></p>
<pre><code class="language-solidity">function canSign(Process storage self, address signer, uint8 role) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>role</code></td><td><code>uint8</code></td><td>Role of the signer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if signer can sign the current step</td></tr>
</tbody></table>
</div>
<h3 id="canreject"><a class="header" href="#canreject">canReject</a></h3>
<p><em>Checks if the signer can reject the current step</em></p>
<pre><code class="language-solidity">function canReject(Process storage self, uint8 role) internal view returns (bool roleAllowed);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
<tr><td><code>role</code></td><td><code>uint8</code></td><td>Role of the signer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>roleAllowed</code></td><td><code>bool</code></td><td>Flag if signer can reject the current step</td></tr>
</tbody></table>
</div>
<h3 id="isfinished"><a class="header" href="#isfinished">isFinished</a></h3>
<p><em>Checks if the process is finished</em></p>
<pre><code class="language-solidity">function isFinished(Process storage self) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if process is finished</td></tr>
</tbody></table>
</div>
<h3 id="currentstep"><a class="header" href="#currentstep">currentStep</a></h3>
<p><em>Returns the current step as <code>Step</code> structure in the process</em></p>
<pre><code class="language-solidity">function currentStep(Process storage self) internal view returns (Step memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Step</code></td><td>Current step</td></tr>
</tbody></table>
</div>
<h3 id="_isroleallowedtosigncurrentstep"><a class="header" href="#_isroleallowedtosigncurrentstep">_isRoleAllowedToSignCurrentStep</a></h3>
<p><em>Checks if the role is allowed to sign the current step</em></p>
<pre><code class="language-solidity">function _isRoleAllowedToSignCurrentStep(Process storage self, uint8 role) private view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Process</code></td><td>Process structure</td></tr>
<tr><td><code>role</code></td><td><code>uint8</code></td><td>Role of the signer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>allowed Flag if role is allowed to sign the current step</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="processfactory"><a class="header" href="#processfactory">ProcessFactory</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/ProcessFactory.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable2Step</p>
<p><em>Factory contract for creating processes based on the configuration</em></p>
<h2 id="state-variables-19"><a class="header" href="#state-variables-19">State Variables</a></h2>
<h3 id="_configs"><a class="header" href="#_configs">_configs</a></h3>
<p><em>Process identifier to array of steps</em></p>
<pre><code class="language-solidity">mapping(bytes32 configId =&gt; Step[] steps) private _configs;
</code></pre>
<h2 id="functions-24"><a class="header" href="#functions-24">Functions</a></h2>
<h3 id="processconfigexist"><a class="header" href="#processconfigexist">processConfigExist</a></h3>
<p><em>Checks if process configuration exists</em></p>
<pre><code class="language-solidity">modifier processConfigExist(bytes32 configId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>configId</code></td><td><code>bytes32</code></td><td>Identifier of the process configuration</td></tr>
</tbody></table>
</div>
<h3 id="constructor-20"><a class="header" href="#constructor-20">constructor</a></h3>
<pre><code class="language-solidity">constructor(ProcessConfigParam[] memory processConfigs) Ownable2Step;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processConfigs</code></td><td><code>ProcessConfigParam[]</code></td><td>Array of <code>ProcessParam</code> structures</td></tr>
</tbody></table>
</div>
<h3 id="addprocess"><a class="header" href="#addprocess">addProcess</a></h3>
<p><em>Adds a new process configuration</em></p>
<pre><code class="language-solidity">function addProcess(bytes32 configId, Step[] calldata steps) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>configId</code></td><td><code>bytes32</code></td><td>Identifier of the process configuration</td></tr>
<tr><td><code>steps</code></td><td><code>Step[]</code></td><td>Array of steps</td></tr>
</tbody></table>
</div>
<h3 id="createprocess"><a class="header" href="#createprocess">createProcess</a></h3>
<p><em>Creates a new process based for <code>configId</code></em></p>
<pre><code class="language-solidity">function createProcess(bytes32 configId) external view processConfigExist(configId) returns (Process memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>configId</code></td><td><code>bytes32</code></td><td>Identifier of the process configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Process</code></td><td>New process represented as <code>Process</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="processsteps"><a class="header" href="#processsteps">processSteps</a></h3>
<p><em>Returns the array of <code>Step</code> for <code>configId</code></em></p>
<pre><code class="language-solidity">function processSteps(bytes32 configId) external view processConfigExist(configId) returns (Step[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>configId</code></td><td><code>bytes32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Step[]</code></td><td>steps Array of steps</td></tr>
</tbody></table>
</div>
<h3 id="_addprocess"><a class="header" href="#_addprocess">_addProcess</a></h3>
<pre><code class="language-solidity">function _addProcess(bytes32 configId, Step[] memory steps) private;
</code></pre>
<h2 id="events-9"><a class="header" href="#events-9">Events</a></h2>
<h3 id="configadded"><a class="header" href="#configadded">ConfigAdded</a></h3>
<p><em>Emitted when a new process configuration is added</em></p>
<pre><code class="language-solidity">event ConfigAdded(bytes32 configId);
</code></pre>
<h2 id="errors-11"><a class="header" href="#errors-11">Errors</a></h2>
<h3 id="processconfignotexist"><a class="header" href="#processconfignotexist">ProcessConfigNotExist</a></h3>
<p><em>Process configuration not existing for <code>configId</code></em></p>
<pre><code class="language-solidity">error ProcessConfigNotExist(bytes32 configId);
</code></pre>
<h3 id="processconfigexist-1"><a class="header" href="#processconfigexist-1">ProcessConfigExist</a></h3>
<p><em>Process configuration already existing for <code>configId</code></em></p>
<pre><code class="language-solidity">error ProcessConfigExist(bytes32 configId);
</code></pre>
<h3 id="nostepsforconfig"><a class="header" href="#nostepsforconfig">NoStepsForConfig</a></h3>
<p><em>Invalid process config at <code>index</code></em></p>
<pre><code class="language-solidity">error NoStepsForConfig(bytes32 configId);
</code></pre>
<h3 id="invalidstep"><a class="header" href="#invalidstep">InvalidStep</a></h3>
<p><em>Invalid step for config with <code>configId</code> at index <code>configIndex</code></em></p>
<pre><code class="language-solidity">error InvalidStep(bytes32 configId, uint256 stepIndex);
</code></pre>
<h2 id="structs-5"><a class="header" href="#structs-5">Structs</a></h2>
<h3 id="processconfigparam"><a class="header" href="#processconfigparam">ProcessConfigParam</a></h3>
<p><em>Structure used during definition of the process configuration</em></p>
<pre><code class="language-solidity">struct ProcessConfigParam {
    bytes32 id;
    Step[] steps;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="processmanager-1"><a class="header" href="#processmanager-1">ProcessManager</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/ProcessManager.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/multistep/ProcessManager.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<p><em>Contract for managing processes. It should be inherited by the contracts
that require to manage processes</em></p>
<h2 id="state-variables-20"><a class="header" href="#state-variables-20">State Variables</a></h2>
<h3 id="_rolesmanager"><a class="header" href="#_rolesmanager">_rolesManager</a></h3>
<p><em><code>RolesManager</code> contract</em></p>
<pre><code class="language-solidity">RolesManager private immutable _rolesManager;
</code></pre>
<h3 id="_processfactory"><a class="header" href="#_processfactory">_processFactory</a></h3>
<p><em><code>ProcessFactory</code> contract</em></p>
<pre><code class="language-solidity">ProcessFactory private _processFactory;
</code></pre>
<h3 id="_count"><a class="header" href="#_count">_count</a></h3>
<p><em>Counter for the number of processes</em></p>
<pre><code class="language-solidity">uint256 private _count;
</code></pre>
<h3 id="_processes"><a class="header" href="#_processes">_processes</a></h3>
<p><em>Mapping of process ID to process</em></p>
<pre><code class="language-solidity">mapping(uint256 processId =&gt; Process process) private _processes;
</code></pre>
<h2 id="functions-25"><a class="header" href="#functions-25">Functions</a></h2>
<h3 id="processexist"><a class="header" href="#processexist">processExist</a></h3>
<pre><code class="language-solidity">modifier processExist(uint256 processId);
</code></pre>
<h3 id="constructor-21"><a class="header" href="#constructor-21">constructor</a></h3>
<pre><code class="language-solidity">constructor(address rolesManager_, address processFactory_, address owner_, address[] memory authorized_)
    CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>rolesManager_</code></td><td><code>address</code></td><td><code>RolesManager</code> contract address</td></tr>
<tr><td><code>processFactory_</code></td><td><code>address</code></td><td><code>ProcessFactory</code> contract address</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="startprocess"><a class="header" href="#startprocess">startProcess</a></h3>
<p><em>Creates a new process defined with <code>processConfigId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function startProcess(address initiator, bytes32 processConfigId) external onlyAuthorized returns (uint32 processId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>initiator</code></td><td><code>address</code></td><td>Address of the initiator</td></tr>
<tr><td><code>processConfigId</code></td><td><code>bytes32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processId</code></td><td><code>uint32</code></td><td>Identifier of the created process</td></tr>
</tbody></table>
</div>
<h3 id="signprocess"><a class="header" href="#signprocess">signProcess</a></h3>
<p><em>Signs the process with <code>processId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function signProcess(address signer, uint256 processId)
    external
    processExist(processId)
    onlyAuthorized
    returns (bool stepUpdated);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>processId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stepUpdated</code></td><td><code>bool</code></td><td>Flag whether the step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="rejectprocess"><a class="header" href="#rejectprocess">rejectProcess</a></h3>
<p><em>Rejects the process with <code>processId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function rejectProcess(address signer, uint256 processId) external processExist(processId) onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>processId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<h3 id="process-1"><a class="header" href="#process-1">process</a></h3>
<p><em>Returns the process details for the process with <code>processId</code></em></p>
<pre><code class="language-solidity">function process(uint256 processId) external view processExist(processId) returns (Process memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Process</code></td><td>Process details</td></tr>
</tbody></table>
</div>
<h3 id="processfactory-1"><a class="header" href="#processfactory-1">processFactory</a></h3>
<p><em>Returns the <code>ProcessFactory</code> address</em></p>
<pre><code class="language-solidity">function processFactory() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>ProcessFactory</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="rolesmanager"><a class="header" href="#rolesmanager">rolesManager</a></h3>
<p><em>Returns the <code>RolesManager</code> address</em></p>
<pre><code class="language-solidity">function rolesManager() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>RolesManager</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="_signprocess-1"><a class="header" href="#_signprocess-1">_signProcess</a></h3>
<p><em>Signs the process with <code>processId</code> by <code>signer</code></em></p>
<pre><code class="language-solidity">function _signProcess(address signer, uint256 processId) private returns (bool stepUpdated);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>processId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stepUpdated</code></td><td><code>bool</code></td><td>Flag if step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="_roleasuint8"><a class="header" href="#_roleasuint8">_roleAsUint8</a></h3>
<p><em>Returns uint8 representation of the role of the <code>account</code></em></p>
<pre><code class="language-solidity">function _roleAsUint8(address account) private view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Address of the account</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Role of the <code>account</code> as uint8</td></tr>
</tbody></table>
</div>
<h2 id="errors-12"><a class="header" href="#errors-12">Errors</a></h2>
<h3 id="processnotexist"><a class="header" href="#processnotexist">ProcessNotExist</a></h3>
<pre><code class="language-solidity">error ProcessNotExist();
</code></pre>
<h3 id="cannotsignprocess"><a class="header" href="#cannotsignprocess">CannotSignProcess</a></h3>
<pre><code class="language-solidity">error CannotSignProcess();
</code></pre>
<h3 id="cannotrejectprocess"><a class="header" href="#cannotrejectprocess">CannotRejectProcess</a></h3>
<pre><code class="language-solidity">error CannotRejectProcess();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants"><a class="header" href="#constants">Constants</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/ProcessTypes.sol">Git Source</a></p>
<h3 id="create_inbound_shipment"><a class="header" href="#create_inbound_shipment">CREATE_INBOUND_SHIPMENT</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_INBOUND_SHIPMENT = hex&quot;3a3a1cb1509c949c6d16c452eadfb46499d0b482a284597cbf5eb29ce6f295ff&quot;;
</code></pre>
<h3 id="set_tokenizable_bars"><a class="header" href="#set_tokenizable_bars">SET_TOKENIZABLE_BARS</a></h3>
<pre><code class="language-solidity">bytes32 constant SET_TOKENIZABLE_BARS = hex&quot;82596c81a562ad8d3098c85d5d0abec74a2a2dd4de4473987e1ef57e62296326&quot;;
</code></pre>
<h3 id="create_tokenization"><a class="header" href="#create_tokenization">CREATE_TOKENIZATION</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_TOKENIZATION = hex&quot;dbaf38a7677b2c8c92f285e7a42c5320c5a2a56a7fd3527d2acba13c3768f418&quot;;
</code></pre>
<h3 id="create_redemption"><a class="header" href="#create_redemption">CREATE_REDEMPTION</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_REDEMPTION = hex&quot;00472df0c6873a21dd743fdfb5e9b5f7e88793e0810b85a171c467b7aabac976&quot;;
</code></pre>
<h3 id="create_outbound_shipment"><a class="header" href="#create_outbound_shipment">CREATE_OUTBOUND_SHIPMENT</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_OUTBOUND_SHIPMENT = hex&quot;a382e67c0c2eaa8478834c4c691bbe8c24dfb89f4193c57287c6bee3050e3b97&quot;;
</code></pre>
<h3 id="refund_tokens"><a class="header" href="#refund_tokens">REFUND_TOKENS</a></h3>
<pre><code class="language-solidity">bytes32 constant REFUND_TOKENS = hex&quot;4ca7c37e59864e65301b683e05e65b14cebfa8d0418e89a798784d301ad3d82e&quot;;
</code></pre>
<h3 id="create_freeze"><a class="header" href="#create_freeze">CREATE_FREEZE</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_FREEZE = hex&quot;1a0715c5f9b22ee24237d2ffdecca3830982fe43e8b5893f17820da1141469a3&quot;;
</code></pre>
<h3 id="create_unfreeze"><a class="header" href="#create_unfreeze">CREATE_UNFREEZE</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_UNFREEZE = hex&quot;51f711d166d858c561ba7d06d84e9cfaede6a5be06279d95e58dc65c3e4d9325&quot;;
</code></pre>
<h3 id="create_seize"><a class="header" href="#create_seize">CREATE_SEIZE</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_SEIZE = hex&quot;03ebcb089b495974d899be84280480faf09b0d9c5e93dfa53ab869ddbc042779&quot;;
</code></pre>
<h3 id="create_whitelist_group"><a class="header" href="#create_whitelist_group">CREATE_WHITELIST_GROUP</a></h3>
<pre><code class="language-solidity">bytes32 constant CREATE_WHITELIST_GROUP = hex&quot;138045151e53f8da832eca31b2b024d3c9b9b840ae1dab7b747d67fbb2017bba&quot;;
</code></pre>
<h3 id="update_whitelist_group"><a class="header" href="#update_whitelist_group">UPDATE_WHITELIST_GROUP</a></h3>
<pre><code class="language-solidity">bytes32 constant UPDATE_WHITELIST_GROUP = hex&quot;9c6333a0b8ff0de4802f795776953cc55c13dfa1e090a3bc6c3d8695fdb492e6&quot;;
</code></pre>
<h3 id="set_user_whitelist_group"><a class="header" href="#set_user_whitelist_group">SET_USER_WHITELIST_GROUP</a></h3>
<pre><code class="language-solidity">bytes32 constant SET_USER_WHITELIST_GROUP = hex&quot;8e1492c5b4fcdde4d631d317bbe8253aa01fbdbaf00fbd163114a7dd87c8b223&quot;;
</code></pre>
<h3 id="update_transaction_fee_rate"><a class="header" href="#update_transaction_fee_rate">UPDATE_TRANSACTION_FEE_RATE</a></h3>
<pre><code class="language-solidity">bytes32 constant UPDATE_TRANSACTION_FEE_RATE = hex&quot;dd14d50e107c25d3f0bc95b708097408874abd482f4ae8f81dc0c2f715813eb2&quot;;
</code></pre>
<h3 id="update_fee_amount_range"><a class="header" href="#update_fee_amount_range">UPDATE_FEE_AMOUNT_RANGE</a></h3>
<pre><code class="language-solidity">bytes32 constant UPDATE_FEE_AMOUNT_RANGE = hex&quot;b8a309b3aab0cfafa43b5823d161474a7064b026488e94d1a82f4bdbafdd89d7&quot;;
</code></pre>
<h3 id="tm_add"><a class="header" href="#tm_add">TM_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant TM_ADD = hex&quot;a0b7355b6a70606d27a2f7216c7f5e372a434a2ca1e784f6106612be658d4294&quot;;
</code></pre>
<h3 id="tm_remove"><a class="header" href="#tm_remove">TM_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant TM_REMOVE = hex&quot;775e6fce29fbe7a203f7c263cdeec4656482219a4f508dec4612e00a52514d3b&quot;;
</code></pre>
<h3 id="wa_add"><a class="header" href="#wa_add">WA_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant WA_ADD = hex&quot;f12952cb3d893fff3e59f3e8323454cc70930f4bbe41d11aac89458b1359e0c9&quot;;
</code></pre>
<h3 id="wa_remove"><a class="header" href="#wa_remove">WA_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant WA_REMOVE = hex&quot;cd9e157965b5645ed18727ff42552a9e5e266099610f0da5ecd9c87eae119acd&quot;;
</code></pre>
<h3 id="tme_add"><a class="header" href="#tme_add">TME_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant TME_ADD = hex&quot;7ef569fd940efd6639493d5d5ba51e4edb82261e2e9fe8e695a885821c4429cd&quot;;
</code></pre>
<h3 id="tme_remove"><a class="header" href="#tme_remove">TME_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant TME_REMOVE = hex&quot;410d13db254038e0c26b15ecf853909dab48fe0e1a0e2bcdeeba74332004b90c&quot;;
</code></pre>
<h3 id="tma_add"><a class="header" href="#tma_add">TMA_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant TMA_ADD = hex&quot;6ecdf4c7b11c4f99b1a1c930aa14accdeda85a0620f4edd40bab819af680a1e4&quot;;
</code></pre>
<h3 id="tma_remove"><a class="header" href="#tma_remove">TMA_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant TMA_REMOVE = hex&quot;5e83053b044cbb6f82ee6b15f85221ea027f722a50593e933a1c1689fbfa996b&quot;;
</code></pre>
<h3 id="au_add"><a class="header" href="#au_add">AU_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant AU_ADD = hex&quot;01c4cc170fcd5ac515585b27aeca5a6acd81f3423fc19e87ad0cc0c065972520&quot;;
</code></pre>
<h3 id="au_remove"><a class="header" href="#au_remove">AU_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant AU_REMOVE = hex&quot;09fa003f11b87dc7fc0bfcb1595d49cf350dafeeb6244ba7f40f5384ae1f8ad9&quot;;
</code></pre>
<h3 id="uma_add"><a class="header" href="#uma_add">UMA_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant UMA_ADD = hex&quot;e08000618463fc9be30eb768e87dd910be696462045737cec8402eb67b3488b8&quot;;
</code></pre>
<h3 id="uma_remove"><a class="header" href="#uma_remove">UMA_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant UMA_REMOVE = hex&quot;2be3159518a6bd4b7a404a7352174bc4127263c2cbaafc206444dcdb617ab7f9&quot;;
</code></pre>
<h3 id="dir_add"><a class="header" href="#dir_add">DIR_ADD</a></h3>
<pre><code class="language-solidity">bytes32 constant DIR_ADD = hex&quot;c7e717c73600f7c591220b9a0d97128542b026df0f40ebf1887051364eb36e90&quot;;
</code></pre>
<h3 id="dir_remove"><a class="header" href="#dir_remove">DIR_REMOVE</a></h3>
<pre><code class="language-solidity">bytes32 constant DIR_REMOVE = hex&quot;e9992e353d5fee1ccb3015004b85c3c775de6c8eb07144f6ed755e894b7b5d29&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="step"><a class="header" href="#step">Step</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/Step.sol">Git Source</a></p>
<p><em>Structure containing all the information about a step in the process.
Data is packed to save gas. The last element of the array is the threshold
needed to finish the step.
Example: | ROLE_X (0) | ROLE_Y (5) | ROLE_Z (1) | THRESHOLD |
It is expected that role can be represented with uint8 type.</em></p>
<pre><code class="language-solidity">struct Step {
    uint8[] packedData;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="steplib"><a class="header" href="#steplib">StepLib</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/multistep/Step.sol">Git Source</a></p>
<p><em>Convinience library for <code>Step</code> struct</em></p>
<h2 id="functions-26"><a class="header" href="#functions-26">Functions</a></h2>
<h3 id="isvalid"><a class="header" href="#isvalid">isValid</a></h3>
<p><em>Checks if the step is valid</em></p>
<pre><code class="language-solidity">function isValid(Step memory self) internal pure returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Step</code></td><td><code>Step</code> structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool Flag whether the step is valid</td></tr>
</tbody></table>
</div>
<h3 id="allowmultisignperrole"><a class="header" href="#allowmultisignperrole">allowMultisignPerRole</a></h3>
<p><em>Returns if multisign with the same role is allowed
NOTE It's expected that Step is checked if valid before calling this function</em></p>
<pre><code class="language-solidity">function allowMultisignPerRole(Step memory self) internal pure returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Step</code></td><td><code>Step</code> structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if multisign with the same role is allowed</td></tr>
</tbody></table>
</div>
<h3 id="threshold"><a class="header" href="#threshold">threshold</a></h3>
<p><em>Returns the threshold for the step
NOTE It's expected that Step is checked if valid before calling this function</em></p>
<pre><code class="language-solidity">function threshold(Step memory self) internal pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Step</code></td><td><code>Step</code> structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>uint256 Threshold for the step</td></tr>
</tbody></table>
</div>
<h3 id="roleslength"><a class="header" href="#roleslength">rolesLength</a></h3>
<p><em>Returns the number of roles in the step
NOTE It's expected that Step is checked if valid before calling this function</em></p>
<pre><code class="language-solidity">function rolesLength(Step memory self) internal pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Step</code></td><td><code>Step</code> structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>uint256 Number of roles in the step</td></tr>
</tbody></table>
</div>
<h3 id="packeddatalength"><a class="header" href="#packeddatalength">packedDataLength</a></h3>
<p><em>Returns packed data length</em></p>
<pre><code class="language-solidity">function packedDataLength(Step memory self) internal pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>Step</code></td><td><code>Step</code> structure</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>uint256 Packed data length</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-10"><a class="header" href="#contents-10">Contents</a></h1>
<ul>
<li><a href="contracts/roles/BaseRoleProcessor.sol/abstract.BaseRoleProcessor.html">BaseRoleProcessor</a></li>
<li><a href="contracts/roles/RoleAssignProcessor.sol/contract.RoleAssignProcessor.html">RoleAssignProcessor</a></li>
<li><a href="contracts/roles/RoleRemoveProcessor.sol/contract.RoleRemoveProcessor.html">RoleRemoveProcessor</a></li>
<li><a href="contracts/roles/RoleRequestsStorage.sol/contract.RoleRequestsStorage.html">RoleRequestsStorage</a></li>
<li><a href="contracts/roles/RolesManager.sol/contract.RolesManager.html">RolesManager</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseroleprocessor"><a class="header" href="#baseroleprocessor">BaseRoleProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/roles/BaseRoleProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC2771Context</p>
<p><em>Base contract for managing the role assign/remove process. Defines common logic for approving/rejecting requests.
Designed as the wrapper arround processes defined in <code>ProcessManager</code> contract and managed by <code>ProcessManager</code> contract.
It's responsible to follow the steps defined per process and provide high-level updates of the role assign/remove request relevant data.
It uses <code>RoleRequestsStorage</code> to store the role assign/remove request data and <code>RolesManager</code> to assign/remove role.</em></p>
<h2 id="state-variables-21"><a class="header" href="#state-variables-21">State Variables</a></h2>
<h3 id="_rolerequestsstorage"><a class="header" href="#_rolerequestsstorage">_roleRequestsStorage</a></h3>
<p><em><code>RoleRequestsStorage</code> contract</em></p>
<pre><code class="language-solidity">RoleRequestsStorage internal immutable _roleRequestsStorage;
</code></pre>
<h3 id="_processmanager-3"><a class="header" href="#_processmanager-3">_processManager</a></h3>
<p><em><code>ProcessManager</code> contract</em></p>
<pre><code class="language-solidity">ProcessManager internal immutable _processManager;
</code></pre>
<h3 id="_rolesmanager-1"><a class="header" href="#_rolesmanager-1">_rolesManager</a></h3>
<p><em><code>RolesManager</code> contract</em></p>
<pre><code class="language-solidity">RolesManager internal immutable _rolesManager;
</code></pre>
<h2 id="functions-27"><a class="header" href="#functions-27">Functions</a></h2>
<h3 id="requestexists-5"><a class="header" href="#requestexists-5">requestExists</a></h3>
<pre><code class="language-solidity">modifier requestExists(uint256 requestId);
</code></pre>
<h3 id="validrequest"><a class="header" href="#validrequest">validRequest</a></h3>
<pre><code class="language-solidity">modifier validRequest(address user);
</code></pre>
<h3 id="validstatus-2"><a class="header" href="#validstatus-2">validStatus</a></h3>
<pre><code class="language-solidity">modifier validStatus(uint256 requestId, uint8 expectedStatus);
</code></pre>
<h3 id="constructor-22"><a class="header" href="#constructor-22">constructor</a></h3>
<pre><code class="language-solidity">constructor(address trustedForwarder_, address processManager_, address roleRequestsStorage_, address rolesManager_)
    ERC2771Context(trustedForwarder_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td><code>ERC2771Context</code> trusted forwarder address</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td><code>ProcessManager</code> contract address</td></tr>
<tr><td><code>roleRequestsStorage_</code></td><td><code>address</code></td><td><code>RoleRequestsStorage</code> contract address</td></tr>
<tr><td><code>rolesManager_</code></td><td><code>address</code></td><td><code>RolesManager</code> contract address</td></tr>
</tbody></table>
</div>
<h3 id="rolechangerequesttype"><a class="header" href="#rolechangerequesttype">roleChangeRequestType</a></h3>
<p><em>Returns role change request type represented as <code>RoleChangeRequestType</code> enum</em></p>
<pre><code class="language-solidity">function roleChangeRequestType() internal pure virtual returns (RoleRequestsStorage.RoleChangeRequestType);
</code></pre>
<h3 id="createdstatus"><a class="header" href="#createdstatus">createdStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the created status</em></p>
<pre><code class="language-solidity">function createdStatus() internal pure virtual returns (uint8);
</code></pre>
<h3 id="approvedstatus"><a class="header" href="#approvedstatus">approvedStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the approved status</em></p>
<pre><code class="language-solidity">function approvedStatus() internal pure virtual returns (uint8);
</code></pre>
<h3 id="rejectedstatus"><a class="header" href="#rejectedstatus">rejectedStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the rejected status</em></p>
<pre><code class="language-solidity">function rejectedStatus() internal pure virtual returns (uint8);
</code></pre>
<h3 id="validstatusforapproval"><a class="header" href="#validstatusforapproval">validStatusForApproval</a></h3>
<p><em>Returns <code>uint8</code> representation of valid status for request approval</em></p>
<pre><code class="language-solidity">function validStatusForApproval() internal pure virtual returns (uint8);
</code></pre>
<h3 id="approverequest-3"><a class="header" href="#approverequest-3">approveRequest</a></h3>
<p><em>Approves role change request</em></p>
<pre><code class="language-solidity">function approveRequest(uint256 requestId)
    external
    requestExists(requestId)
    validStatus(requestId, validStatusForApproval());
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<h3 id="rejectrequest-3"><a class="header" href="#rejectrequest-3">rejectRequest</a></h3>
<p><em>Rejects role change request</em></p>
<pre><code class="language-solidity">function rejectRequest(uint256 requestId) external virtual requestExists(requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<h3 id="processmanager-2"><a class="header" href="#processmanager-2">processManager</a></h3>
<p><em>Returns <code>ProcessManager</code> contract address</em></p>
<pre><code class="language-solidity">function processManager() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="rolerequestsstorage"><a class="header" href="#rolerequestsstorage">roleRequestsStorage</a></h3>
<p><em>Returns <code>RoleRequestsStorage</code> contract address</em></p>
<pre><code class="language-solidity">function roleRequestsStorage() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>RoleRequestsStorage</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="rolesmanager-1"><a class="header" href="#rolesmanager-1">rolesManager</a></h3>
<p><em>Returns <code>RolesManager</code> contract address</em></p>
<pre><code class="language-solidity">function rolesManager() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>RolesManager</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="_checkifsignerisvalid"><a class="header" href="#_checkifsignerisvalid">_checkIfSignerIsValid</a></h3>
<p><em>Checks if sender is valid</em></p>
<pre><code class="language-solidity">function _checkIfSignerIsValid(address sender, uint256 requestId) internal view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>Address of the sender</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<h3 id="_initiaterolechangerequest"><a class="header" href="#_initiaterolechangerequest">_initiateRoleChangeRequest</a></h3>
<p><em>Initiate role change request</em></p>
<pre><code class="language-solidity">function _initiateRoleChangeRequest(address sender, bytes32 processConfigId, address user, RolesManager.Role role)
    internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>processConfigId</code></td><td><code>bytes32</code></td><td>Identifier of the process</td></tr>
<tr><td><code>user</code></td><td><code>address</code></td><td>User to whom the role will be assigned</td></tr>
<tr><td><code>role</code></td><td><code>RolesManager.Role</code></td><td>Role to be assigned</td></tr>
</tbody></table>
</div>
<h3 id="_initiateprocess"><a class="header" href="#_initiateprocess">_initiateProcess</a></h3>
<p><em>Initiates the process and signs the first step</em></p>
<pre><code class="language-solidity">function _initiateProcess(address initiator, bytes32 processConfigId) private returns (uint256 processId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>initiator</code></td><td><code>address</code></td><td>Address of the initiator</td></tr>
<tr><td><code>processConfigId</code></td><td><code>bytes32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<h3 id="_createrolechangerequest"><a class="header" href="#_createrolechangerequest">_createRoleChangeRequest</a></h3>
<p><em>Wraps <code>user</code>, <code>role</code> and <code>processId</code> into <code>RoleChangeRequest</code> struct</em></p>
<pre><code class="language-solidity">function _createRoleChangeRequest(address user, RolesManager.Role role, uint256 processId)
    private
    pure
    returns (RoleRequestsStorage.RoleChangeRequest memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User to whom the role will be assigned</td></tr>
<tr><td><code>role</code></td><td><code>RolesManager.Role</code></td><td>Role to be assigned</td></tr>
<tr><td><code>processId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>RoleRequestsStorage.RoleChangeRequest</code></td><td>Role change request data represented as <code>RoleChangeRequest</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="_setrolechangerequest"><a class="header" href="#_setrolechangerequest">_setRoleChangeRequest</a></h3>
<p><em>Sets role change request inside <code>RoleRequestsStorage</code></em></p>
<pre><code class="language-solidity">function _setRoleChangeRequest(RoleRequestsStorage.RoleChangeRequest memory roleChangeRequest)
    private
    returns (uint256 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>roleChangeRequest</code></td><td><code>RoleRequestsStorage.RoleChangeRequest</code></td><td>Role change request to be set</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<h3 id="_checkifsignerisuser"><a class="header" href="#_checkifsignerisuser">_checkIfSignerIsUser</a></h3>
<p><em>Checks if sender is user</em></p>
<pre><code class="language-solidity">function _checkIfSignerIsUser(address sender, address user) private pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>Address of the sender</td></tr>
<tr><td><code>user</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<h2 id="events-10"><a class="header" href="#events-10">Events</a></h2>
<h3 id="rolechangerequestcreated"><a class="header" href="#rolechangerequestcreated">RoleChangeRequestCreated</a></h3>
<p><em>Emitted when role change request is created</em></p>
<pre><code class="language-solidity">event RoleChangeRequestCreated(address indexed sender, uint256 indexed requestId, uint256 processId);
</code></pre>
<h3 id="rolechangerequestapproved"><a class="header" href="#rolechangerequestapproved">RoleChangeRequestApproved</a></h3>
<p><em>Emitted when role change request is approved</em></p>
<pre><code class="language-solidity">event RoleChangeRequestApproved(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="rolechangerequestcompleted"><a class="header" href="#rolechangerequestcompleted">RoleChangeRequestCompleted</a></h3>
<p><em>Emitted when role change request approval is completed</em></p>
<pre><code class="language-solidity">event RoleChangeRequestCompleted(address indexed sender, uint256 indexed requestId);
</code></pre>
<h3 id="rolechangerequestrejected"><a class="header" href="#rolechangerequestrejected">RoleChangeRequestRejected</a></h3>
<p><em>Emitted when role change request is rejected</em></p>
<pre><code class="language-solidity">event RoleChangeRequestRejected(address indexed sender, uint256 indexed requestId);
</code></pre>
<h2 id="errors-13"><a class="header" href="#errors-13">Errors</a></h2>
<h3 id="userzeroaddress"><a class="header" href="#userzeroaddress">UserZeroAddress</a></h3>
<p><em>User address is zero</em></p>
<pre><code class="language-solidity">error UserZeroAddress();
</code></pre>
<h3 id="rolechangerequestnotexist"><a class="header" href="#rolechangerequestnotexist">RoleChangeRequestNotExist</a></h3>
<p><em>Role change request with <code>requestId</code> does not exist</em></p>
<pre><code class="language-solidity">error RoleChangeRequestNotExist(uint256 requestId);
</code></pre>
<h3 id="invalidrolechangerequeststatus"><a class="header" href="#invalidrolechangerequeststatus">InvalidRoleChangeRequestStatus</a></h3>
<p><em>Invalid role change request status for request identified with <code>requestId</code></em></p>
<pre><code class="language-solidity">error InvalidRoleChangeRequestStatus(uint256 requestId, uint8 expectedStatus, uint8 currentStatus);
</code></pre>
<h3 id="processconfigidnotexist"><a class="header" href="#processconfigidnotexist">ProcessConfigIdNotExist</a></h3>
<p><em>Process config ID for <code>role</code> does not exist</em></p>
<pre><code class="language-solidity">error ProcessConfigIdNotExist(RolesManager.Role role);
</code></pre>
<h3 id="signingrequestforself"><a class="header" href="#signingrequestforself">SigningRequestForSelf</a></h3>
<p><em>Caller is trying to sign a request for the self</em></p>
<pre><code class="language-solidity">error SigningRequestForSelf();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roleassignprocessor"><a class="header" href="#roleassignprocessor">RoleAssignProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/roles/RoleAssignProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/roles/RoleAssignProcessor.sol//contracts/roles/BaseRoleProcessor.sol/abstract.BaseRoleProcessor.html">BaseRoleProcessor</a></p>
<p>*Contract for managing the role assign process.
The following are the intended function calls in order to complete the role assign process:</p>
<ol>
<li>createRequest -&gt; Depends on the step</li>
<li>approveRequest -&gt; Depends on the step</li>
<li>rejectRequest -&gt; Depends on the step*</li>
</ol>
<h2 id="functions-28"><a class="header" href="#functions-28">Functions</a></h2>
<h3 id="constructor-23"><a class="header" href="#constructor-23">constructor</a></h3>
<pre><code class="language-solidity">constructor(address trustedForwarder_, address processManager_, address roleRequestsStorage_, address rolesManager_)
    BaseRoleProcessor(trustedForwarder_, processManager_, roleRequestsStorage_, rolesManager_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td><code>ERC2771Context</code> trusted forwarder address</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td><code>ProcessManager</code> contract address</td></tr>
<tr><td><code>roleRequestsStorage_</code></td><td><code>address</code></td><td><code>RoleRequestsStorage</code> contract address</td></tr>
<tr><td><code>rolesManager_</code></td><td><code>address</code></td><td><code>RolesManager</code> contract address</td></tr>
</tbody></table>
</div>
<h3 id="rolechangerequesttype-1"><a class="header" href="#rolechangerequesttype-1">roleChangeRequestType</a></h3>
<p><em>Returns role change request type represented as <code>RoleChangeRequestType</code> enum</em></p>
<pre><code class="language-solidity">function roleChangeRequestType() internal pure virtual override returns (RoleRequestsStorage.RoleChangeRequestType);
</code></pre>
<h3 id="createrequest-5"><a class="header" href="#createrequest-5">createRequest</a></h3>
<p><em>Creates assign role request</em></p>
<pre><code class="language-solidity">function createRequest(address user, RolesManager.Role role) external validRequest(user);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User to whom the role will be assigned</td></tr>
<tr><td><code>role</code></td><td><code>RolesManager.Role</code></td><td>Role to be assigned</td></tr>
</tbody></table>
</div>
<h3 id="createdstatus-1"><a class="header" href="#createdstatus-1">createdStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the created status</em></p>
<pre><code class="language-solidity">function createdStatus() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="approvedstatus-1"><a class="header" href="#approvedstatus-1">approvedStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the approved status</em></p>
<pre><code class="language-solidity">function approvedStatus() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="rejectedstatus-1"><a class="header" href="#rejectedstatus-1">rejectedStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the rejected status</em></p>
<pre><code class="language-solidity">function rejectedStatus() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="validstatusforapproval-1"><a class="header" href="#validstatusforapproval-1">validStatusForApproval</a></h3>
<p><em>Returns <code>uint8</code> representation of valid status for request approval</em></p>
<pre><code class="language-solidity">function validStatusForApproval() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="_getprocessconfigidforrole"><a class="header" href="#_getprocessconfigidforrole">_getProcessConfigIdForRole</a></h3>
<p><em>Lookup for fetching process config ID for role assignment</em></p>
<pre><code class="language-solidity">function _getProcessConfigIdForRole(RolesManager.Role role) private pure returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>role</code></td><td><code>RolesManager.Role</code></td><td>Role for which process config ID for role assignment should be retrieved</td></tr>
</tbody></table>
</div>
<h2 id="errors-14"><a class="header" href="#errors-14">Errors</a></h2>
<h3 id="assigningroletoself"><a class="header" href="#assigningroletoself">AssigningRoleToSelf</a></h3>
<p><em>Caller is trying to assign a role to the self</em></p>
<pre><code class="language-solidity">error AssigningRoleToSelf();
</code></pre>
<h3 id="useralreadyhasrole"><a class="header" href="#useralreadyhasrole">UserAlreadyHasRole</a></h3>
<p><em>User already has a role</em></p>
<pre><code class="language-solidity">error UserAlreadyHasRole();
</code></pre>
<h2 id="enums-3"><a class="header" href="#enums-3">Enums</a></h2>
<h3 id="status-4"><a class="header" href="#status-4">Status</a></h3>
<p><em>Possible role assign request statuses</em></p>
<pre><code class="language-solidity">enum Status {
    NONE,
    CREATED,
    APPROVED,
    REJECTED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roleremoveprocessor"><a class="header" href="#roleremoveprocessor">RoleRemoveProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/roles/RoleRemoveProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/roles/RoleRemoveProcessor.sol//contracts/roles/BaseRoleProcessor.sol/abstract.BaseRoleProcessor.html">BaseRoleProcessor</a></p>
<p>*Contract for managing the role remove process.
The following are the intended function calls to complete the role removal process:</p>
<ol>
<li>createRequest -&gt; Depends on the step</li>
<li>verifyRequest -&gt; Depends on the step</li>
<li>approveRequest -&gt; Depends on the step</li>
<li>rejectRequest -&gt; Depends on the step*</li>
</ol>
<h2 id="functions-29"><a class="header" href="#functions-29">Functions</a></h2>
<h3 id="constructor-24"><a class="header" href="#constructor-24">constructor</a></h3>
<pre><code class="language-solidity">constructor(address trustedForwarder_, address processManager_, address roleRequestsStorage_, address rolesManager_)
    BaseRoleProcessor(trustedForwarder_, processManager_, roleRequestsStorage_, rolesManager_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td><code>ERC2771Context</code> trusted forwarder address</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td><code>ProcessManager</code> contract address</td></tr>
<tr><td><code>roleRequestsStorage_</code></td><td><code>address</code></td><td><code>RoleRequestsStorage</code> contract address</td></tr>
<tr><td><code>rolesManager_</code></td><td><code>address</code></td><td><code>RolesManager</code> contract address</td></tr>
</tbody></table>
</div>
<h3 id="rolechangerequesttype-2"><a class="header" href="#rolechangerequesttype-2">roleChangeRequestType</a></h3>
<p><em>Returns role change request type represented as <code>RoleChangeRequestType</code> enum</em></p>
<pre><code class="language-solidity">function roleChangeRequestType() internal pure virtual override returns (RoleRequestsStorage.RoleChangeRequestType);
</code></pre>
<h3 id="createrequest-6"><a class="header" href="#createrequest-6">createRequest</a></h3>
<p><em>Creates role removal request</em></p>
<pre><code class="language-solidity">function createRequest(address user) external validRequest(user);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User to whom the role will be removed</td></tr>
</tbody></table>
</div>
<h3 id="verifyrequest"><a class="header" href="#verifyrequest">verifyRequest</a></h3>
<p><em>Verifies role removal request</em></p>
<pre><code class="language-solidity">function verifyRequest(uint256 requestId)
    external
    requestExists(requestId)
    validStatus(requestId, uint8(Status.CREATED));
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role removal request</td></tr>
</tbody></table>
</div>
<h3 id="createdstatus-2"><a class="header" href="#createdstatus-2">createdStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the created status</em></p>
<pre><code class="language-solidity">function createdStatus() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="approvedstatus-2"><a class="header" href="#approvedstatus-2">approvedStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the approved status</em></p>
<pre><code class="language-solidity">function approvedStatus() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="rejectedstatus-2"><a class="header" href="#rejectedstatus-2">rejectedStatus</a></h3>
<p><em>Returns <code>uint8</code> representation of the rejected status</em></p>
<pre><code class="language-solidity">function rejectedStatus() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="validstatusforapproval-2"><a class="header" href="#validstatusforapproval-2">validStatusForApproval</a></h3>
<p><em>Returns <code>uint8</code> representation of valid status for request approval</em></p>
<pre><code class="language-solidity">function validStatusForApproval() internal pure virtual override returns (uint8);
</code></pre>
<h3 id="_getprocessconfigidforrole-1"><a class="header" href="#_getprocessconfigidforrole-1">_getProcessConfigIdForRole</a></h3>
<p><em>Lookup for fetching process config ID for role removal</em></p>
<pre><code class="language-solidity">function _getProcessConfigIdForRole(RolesManager.Role role) private pure returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>role</code></td><td><code>RolesManager.Role</code></td><td>Role for which process config ID for role removal should be retrieved</td></tr>
</tbody></table>
</div>
<h2 id="events-11"><a class="header" href="#events-11">Events</a></h2>
<h3 id="rolechangerequestverified"><a class="header" href="#rolechangerequestverified">RoleChangeRequestVerified</a></h3>
<p><em>Emitted when role removal request is verified</em></p>
<pre><code class="language-solidity">event RoleChangeRequestVerified(address indexed sender, uint256 indexed requestId);
</code></pre>
<h2 id="errors-15"><a class="header" href="#errors-15">Errors</a></h2>
<h3 id="removingroleforself"><a class="header" href="#removingroleforself">RemovingRoleForSelf</a></h3>
<p><em>Caller is trying to remove a role for the self</em></p>
<pre><code class="language-solidity">error RemovingRoleForSelf();
</code></pre>
<h2 id="enums-4"><a class="header" href="#enums-4">Enums</a></h2>
<h3 id="status-5"><a class="header" href="#status-5">Status</a></h3>
<p><em>Possible role remove request statuses</em></p>
<pre><code class="language-solidity">enum Status {
    NONE,
    CREATED,
    VERIFIED,
    APPROVED,
    REJECTED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rolerequestsstorage-1"><a class="header" href="#rolerequestsstorage-1">RoleRequestsStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/roles/RoleRequestsStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/roles/RoleRequestsStorage.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<p><em>Contract for storing role change request data. Inherits {CallGuard} to include access control
for the methods that change the state of the storage.</em></p>
<h2 id="state-variables-22"><a class="header" href="#state-variables-22">State Variables</a></h2>
<h3 id="_count-1"><a class="header" href="#_count-1">_count</a></h3>
<p><em>Role change request counter</em></p>
<pre><code class="language-solidity">uint256 private _count;
</code></pre>
<h3 id="_rolechangerequests"><a class="header" href="#_rolechangerequests">_roleChangeRequests</a></h3>
<p><em>Mapping of role change request ID to its data</em></p>
<pre><code class="language-solidity">mapping(uint256 requestId =&gt; RoleChangeRequest request) private _roleChangeRequests;
</code></pre>
<h2 id="functions-30"><a class="header" href="#functions-30">Functions</a></h2>
<h3 id="constructor-25"><a class="header" href="#constructor-25">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the storage</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="createrequest-7"><a class="header" href="#createrequest-7">createRequest</a></h3>
<p><em>Creates a new <code>RoleChangeRequest</code> and stores it in the storage
Callable only by <code>modifier</code></em></p>
<pre><code class="language-solidity">function createRequest(RoleChangeRequest calldata request_) external onlyAuthorized returns (uint256 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>request_</code></td><td><code>RoleChangeRequest</code></td><td>Role change request data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<h3 id="setstatus-3"><a class="header" href="#setstatus-3">setStatus</a></h3>
<p><em>Sets status of the role change request
Callable only by <code>modifier</code></em></p>
<pre><code class="language-solidity">function setStatus(uint256 requestId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the role change request</td></tr>
</tbody></table>
</div>
<h3 id="requestcount-2"><a class="header" href="#requestcount-2">requestCount</a></h3>
<p><em>Returns the number of role change requests</em></p>
<pre><code class="language-solidity">function requestCount() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Number of role change requests</td></tr>
</tbody></table>
</div>
<h3 id="requestexists-6"><a class="header" href="#requestexists-6">requestExists</a></h3>
<p><em>Returns if role change request exists</em></p>
<pre><code class="language-solidity">function requestExists(uint256 requestId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if role change request exists, otherwise false</td></tr>
</tbody></table>
</div>
<h3 id="request-6"><a class="header" href="#request-6">request</a></h3>
<p><em>Returns role change request data if role change request exists, otherwise reverts</em></p>
<pre><code class="language-solidity">function request(uint256 requestId) external view returns (RoleChangeRequest memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>RoleChangeRequest</code></td><td>Role change request data</td></tr>
</tbody></table>
</div>
<h3 id="status-6"><a class="header" href="#status-6">status</a></h3>
<p><em>Returns role change request status</em></p>
<pre><code class="language-solidity">function status(uint256 requestId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Role change request status</td></tr>
</tbody></table>
</div>
<h3 id="user"><a class="header" href="#user">user</a></h3>
<p><em>Returns user for whom the role change request is created</em></p>
<pre><code class="language-solidity">function user(uint256 requestId) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>User for whom the role change request is created</td></tr>
</tbody></table>
</div>
<h3 id="processid-3"><a class="header" href="#processid-3">processId</a></h3>
<p><em>Returns process identifier associated with role change request</em></p>
<pre><code class="language-solidity">function processId(uint256 requestId) external view returns (uint72);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the role change request</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint72</code></td><td>Process identifier</td></tr>
</tbody></table>
</div>
<h2 id="structs-6"><a class="header" href="#structs-6">Structs</a></h2>
<h3 id="rolechangerequest"><a class="header" href="#rolechangerequest">RoleChangeRequest</a></h3>
<p><em>Structure representing role change request</em></p>
<pre><code class="language-solidity">struct RoleChangeRequest {
    address user;
    RolesManager.Role role;
    RoleChangeRequestType requestType;
    uint8 status;
    uint72 processId;
}
</code></pre>
<h2 id="enums-5"><a class="header" href="#enums-5">Enums</a></h2>
<h3 id="rolechangerequesttype-3"><a class="header" href="#rolechangerequesttype-3">RoleChangeRequestType</a></h3>
<p><em>Possible role change request types</em></p>
<pre><code class="language-solidity">enum RoleChangeRequestType {
    NONE,
    ASSIGN,
    REMOVE
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rolesmanager-2"><a class="header" href="#rolesmanager-2">RolesManager</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/roles/RolesManager.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/roles/RolesManager.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<p><em>Contract containing accounts and their assigned roles. A account can have only one role
assigned at the time.</em></p>
<h2 id="state-variables-23"><a class="header" href="#state-variables-23">State Variables</a></h2>
<h3 id="_roles"><a class="header" href="#_roles">_roles</a></h3>
<p><em>Mapping of user to its role</em></p>
<pre><code class="language-solidity">mapping(address user =&gt; Role role) private _roles;
</code></pre>
<h2 id="functions-31"><a class="header" href="#functions-31">Functions</a></h2>
<h3 id="constructor-26"><a class="header" href="#constructor-26">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_, RolesParam memory rolesParam_)
    CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
<tr><td><code>rolesParam_</code></td><td><code>RolesParam</code></td><td>Structure containing roles and their assigned accounts</td></tr>
</tbody></table>
</div>
<h3 id="setrole"><a class="header" href="#setrole">setRole</a></h3>
<p><em>Since no user has a role, the first check can be skipped</em></p>
<p><em>Sets role of a user
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setRole(address user, Role role_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User whose role should be set</td></tr>
<tr><td><code>role_</code></td><td><code>Role</code></td><td>Role to be set</td></tr>
</tbody></table>
</div>
<h3 id="role"><a class="header" href="#role">role</a></h3>
<p><em>Returns role of a user</em></p>
<pre><code class="language-solidity">function role(address user) external view returns (Role);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User whose role should be returned</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Role</code></td><td>Role of the user</td></tr>
</tbody></table>
</div>
<h3 id="_setrole"><a class="header" href="#_setrole">_setRole</a></h3>
<p><em>Sets role of a user
Emits {UserRoleChanged} event</em></p>
<pre><code class="language-solidity">function _setRole(address user, Role role_) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User whose role should be set</td></tr>
<tr><td><code>role_</code></td><td><code>Role</code></td><td>Role to be set</td></tr>
</tbody></table>
</div>
<h3 id="_revertifuseralreadyhasrole"><a class="header" href="#_revertifuseralreadyhasrole">_revertIfUserAlreadyHasRole</a></h3>
<p><em>Checks and reverts if user already has a role</em></p>
<pre><code class="language-solidity">function _revertIfUserAlreadyHasRole(address user) private view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User to check if already has a role</td></tr>
</tbody></table>
</div>
<h2 id="events-12"><a class="header" href="#events-12">Events</a></h2>
<h3 id="userrolechanged"><a class="header" href="#userrolechanged">UserRoleChanged</a></h3>
<p><em>Emitted when a role of a user is changed</em></p>
<pre><code class="language-solidity">event UserRoleChanged(address indexed user, Role role);
</code></pre>
<h2 id="errors-16"><a class="header" href="#errors-16">Errors</a></h2>
<h3 id="useralreadyhasrole-1"><a class="header" href="#useralreadyhasrole-1">UserAlreadyHasRole</a></h3>
<p><em>User already has a role</em></p>
<pre><code class="language-solidity">error UserAlreadyHasRole(address user, Role role);
</code></pre>
<h2 id="structs-7"><a class="header" href="#structs-7">Structs</a></h2>
<h3 id="rolesparam"><a class="header" href="#rolesparam">RolesParam</a></h3>
<p><em>Structure representing contracts constructor parameters</em></p>
<pre><code class="language-solidity">struct RolesParam {
    address[] WAs;
    address[] TMs;
    address[] TMAs;
    address[] TMEs;
    address[] UMAs;
    address[] AUs;
    address[] DIRs;
}
</code></pre>
<h2 id="enums-6"><a class="header" href="#enums-6">Enums</a></h2>
<h3 id="role-1"><a class="header" href="#role-1">Role</a></h3>
<p><em>Possible roles</em></p>
<pre><code class="language-solidity">enum Role {
    NONE,
    WAREHOUSE_ADMIN,
    TOKEN_MANAGER,
    TOKEN_MANAGER_ADMIN,
    TOKEN_MANAGER_EXECUTIVE,
    USER_MANAGER_ADMIN,
    AUDITOR,
    DIRECTOR
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-11"><a class="header" href="#contents-11">Contents</a></h1>
<ul>
<li><a href="contracts/shipment//contracts/shipment/inbound">inbound</a></li>
<li><a href="contracts/shipment//contracts/shipment/outbound">outbound</a></li>
<li><a href="contracts/shipment/BaseShipmentStorage.sol/abstract.BaseShipmentStorage.html">BaseShipmentStorage</a></li>
<li><a href="contracts/shipment/SharedShipmentStorage.sol/contract.SharedShipmentStorage.html">SharedShipmentStorage</a></li>
<li><a href="contracts/shipment/ShipmentTypes.sol/library.ShipmentTypes.html">ShipmentTypes</a></li>
<li><a href="contracts/shipment/ShipmentUtils.sol/library.ShipmentUtils.html">ShipmentUtils</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-12"><a class="header" href="#contents-12">Contents</a></h1>
<ul>
<li><a href="contracts/shipment/inbound/InboundShipmentProcessor.sol/contract.InboundShipmentProcessor.html">InboundShipmentProcessor</a></li>
<li><a href="contracts/shipment/inbound/InboundShipmentStorage.sol/contract.InboundShipmentStorage.html">InboundShipmentStorage</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inboundshipmentprocessor"><a class="header" href="#inboundshipmentprocessor">InboundShipmentProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/inbound/InboundShipmentProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC2771Context</p>
<p><em>Contract for managing inbound shipment process. It's designed to be a wrapper around processes
defined in <code>ProcessFactory</code> and managed by <code>ProcessManager</code> contract. It's responsible
for following the steps defined per process and provide high-level updates of the shipment
relevant data. It uses <code>InboundShipmentStorage</code> to store the shipment data. This way, in case
process changes, this contract can be re-deployed with a new implementation and with the
data still being available.
The following are the intended function calls in order to execute the shipment process:
1.<code>createShipment</code> / <code>recreateShipment</code> -&gt; WA
2.<code>confirmShipmentData</code> -&gt; WA
3.<code>verifyShipmentData</code> -&gt; TM
4.<code>approveShipment</code> -&gt; DIR &amp; DIR
-.<code>rejectShipment</code> -&gt; Any of the above roles depending on the stage of the process
-.<code>setTokenizableBars</code> -&gt; TM</em></p>
<h2 id="state-variables-24"><a class="header" href="#state-variables-24">State Variables</a></h2>
<h3 id="_processmanager-4"><a class="header" href="#_processmanager-4">_processManager</a></h3>
<p><em><code>ProcessManager</code> contract</em></p>
<pre><code class="language-solidity">ProcessManager private immutable _processManager;
</code></pre>
<h3 id="_certscollection-2"><a class="header" href="#_certscollection-2">_certsCollection</a></h3>
<p><em><code>Certificates</code> contract</em></p>
<pre><code class="language-solidity">Certificates private immutable _certsCollection;
</code></pre>
<h3 id="_walletmanager-2"><a class="header" href="#_walletmanager-2">_walletManager</a></h3>
<p><em><code>WalletManager</code> contract</em></p>
<pre><code class="language-solidity">WalletManager private immutable _walletManager;
</code></pre>
<h3 id="_inboundshipmentstorage-3"><a class="header" href="#_inboundshipmentstorage-3">_inboundShipmentStorage</a></h3>
<p><em><code>InboundShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">InboundShipmentStorage private immutable _inboundShipmentStorage;
</code></pre>
<h3 id="_sharedshipmentstorage"><a class="header" href="#_sharedshipmentstorage">_sharedShipmentStorage</a></h3>
<p><em><code>SharedShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">SharedShipmentStorage private immutable _sharedShipmentStorage;
</code></pre>
<h2 id="functions-32"><a class="header" href="#functions-32">Functions</a></h2>
<h3 id="shipmentexists"><a class="header" href="#shipmentexists">shipmentExists</a></h3>
<pre><code class="language-solidity">modifier shipmentExists(uint256 shipmentId);
</code></pre>
<h3 id="validshipment"><a class="header" href="#validshipment">validShipment</a></h3>
<pre><code class="language-solidity">modifier validShipment(uint256 shipmentId, ShipmentParam calldata shipment);
</code></pre>
<h3 id="validstatus-3"><a class="header" href="#validstatus-3">validStatus</a></h3>
<pre><code class="language-solidity">modifier validStatus(uint256 shipmentId, ShipmentStatus expectedStatus);
</code></pre>
<h3 id="constructor-27"><a class="header" href="#constructor-27">constructor</a></h3>
<pre><code class="language-solidity">constructor(
    address trustedForwarder_,
    address processManager_,
    address certsCollection_,
    address walletManager_,
    address inboundShipmentStorage_,
    address sharedShipmentStorage_
) ERC2771Context(trustedForwarder_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td><code>ERC2771Context</code> trusted forwarder address</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td><code>ProcessManager</code> contract address</td></tr>
<tr><td><code>certsCollection_</code></td><td><code>address</code></td><td><code>Certificates</code> contract address</td></tr>
<tr><td><code>walletManager_</code></td><td><code>address</code></td><td><code>WalletManager</code> contract address</td></tr>
<tr><td><code>inboundShipmentStorage_</code></td><td><code>address</code></td><td><code>ShipmentStorage</code> contract address</td></tr>
<tr><td><code>sharedShipmentStorage_</code></td><td><code>address</code></td><td><code>SharedShipmentStorage</code> contract address</td></tr>
</tbody></table>
</div>
<h3 id="createshipment"><a class="header" href="#createshipment">createShipment</a></h3>
<p><em>Creates the shipment and starts the associated process</em></p>
<pre><code class="language-solidity">function createShipment(bytes32 filesCommit) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filesCommit</code></td><td><code>bytes32</code></td><td>Hashed checksum of the files containing shipment data</td></tr>
</tbody></table>
</div>
<h3 id="recreateshipment"><a class="header" href="#recreateshipment">recreateShipment</a></h3>
<p><em>Recreates existing shipment and restarts the associated process</em></p>
<pre><code class="language-solidity">function recreateShipment(uint256 shipmentId, bytes32 filesCommit)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.REJECTED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>filesCommit</code></td><td><code>bytes32</code></td><td>Hashed checksum of the files containing shipment data</td></tr>
</tbody></table>
</div>
<h3 id="confirmshipmentdata"><a class="header" href="#confirmshipmentdata">confirmShipmentData</a></h3>
<p><em>Confirms the shipment data</em></p>
<pre><code class="language-solidity">function confirmShipmentData(uint256 shipmentId, ShipmentParam calldata shipmentParam)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.CREATED)
    validShipment(shipmentId, shipmentParam);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>shipmentParam</code></td><td><code>ShipmentParam</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<h3 id="verifyshipmentdata"><a class="header" href="#verifyshipmentdata">verifyShipmentData</a></h3>
<p><em>Verifies the shipment data</em></p>
<pre><code class="language-solidity">function verifyShipmentData(uint256 shipmentId)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.CONFIRMED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="approveshipment"><a class="header" href="#approveshipment">approveShipment</a></h3>
<p><em>Approves the shipment</em></p>
<pre><code class="language-solidity">function approveShipment(uint256 shipmentId)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.VERIFIED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="rejectshipment"><a class="header" href="#rejectshipment">rejectShipment</a></h3>
<p><em>Rejects the shipment</em></p>
<pre><code class="language-solidity">function rejectShipment(uint256 shipmentId) external shipmentExists(shipmentId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="settokenizablebars"><a class="header" href="#settokenizablebars">setTokenizableBars</a></h3>
<p><em>Sets tokenizable bars for the shipment</em></p>
<pre><code class="language-solidity">function setTokenizableBars(uint256 shipmentId, uint256[] calldata tokenizableBarIds)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.APPROVED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>tokenizableBarIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the tokenizable bars</td></tr>
</tbody></table>
</div>
<h3 id="processmanager-3"><a class="header" href="#processmanager-3">processManager</a></h3>
<p><em>Returns <code>ProcessManager</code> contract address</em></p>
<pre><code class="language-solidity">function processManager() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>ProcessManager</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="certscollection"><a class="header" href="#certscollection">certsCollection</a></h3>
<p><em>Returns <code>Certificates</code> contract address</em></p>
<pre><code class="language-solidity">function certsCollection() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>Certificates</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="walletmanager-1"><a class="header" href="#walletmanager-1">walletManager</a></h3>
<p><em>Returns <code>WalletManager</code> contract address</em></p>
<pre><code class="language-solidity">function walletManager() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>WalletManager</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="inboundshipmentstorage-1"><a class="header" href="#inboundshipmentstorage-1">inboundShipmentStorage</a></h3>
<p><em>Returns <code>InboundShipmentStorage</code> contract address</em></p>
<pre><code class="language-solidity">function inboundShipmentStorage() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>InboundShipmentStorage</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="sharedshipmentstorage"><a class="header" href="#sharedshipmentstorage">sharedShipmentStorage</a></h3>
<p><em>Returns <code>SharedShipmentStorage</code> contract address</em></p>
<pre><code class="language-solidity">function sharedShipmentStorage() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the <code>SharedShipmentStorage</code> contract</td></tr>
</tbody></table>
</div>
<h3 id="_createshipmentdata"><a class="header" href="#_createshipmentdata">_createShipmentData</a></h3>
<p><em>Wraps <code>ShipmentParam</code> struct and <code>processId</code> into <code>InboundShipmentStorage.Shipment</code> struct</em></p>
<pre><code class="language-solidity">function _createShipmentData(ShipmentParam memory shipmentParam, uint32 processId, ShipmentStatus status)
    private
    pure
    returns (InboundShipmentStorage.Shipment memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentParam</code></td><td><code>ShipmentParam</code></td><td>Shipment data</td></tr>
<tr><td><code>processId</code></td><td><code>uint32</code></td><td>Identifier of the process</td></tr>
<tr><td><code>status</code></td><td><code>ShipmentStatus</code></td><td>Status of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="_signprocess-2"><a class="header" href="#_signprocess-2">_signProcess</a></h3>
<p><em>Sign the process for the request if possible and return whether the step was updated</em></p>
<pre><code class="language-solidity">function _signProcess(address signer, uint256 requestId) private returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether the step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8status-2"><a class="header" href="#_asuint8status-2">_asUint8Status</a></h3>
<p><em>Converts <code>ShipmentStatus</code> to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8Status(ShipmentStatus status_) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status_</code></td><td><code>ShipmentStatus</code></td><td>Status to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of <code>ShipmentStatus</code> enum</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8type"><a class="header" href="#_asuint8type">_asUint8Type</a></h3>
<p><em>Converts <code>ShipmentType</code> to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8Type(ShipmentType type_) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>type_</code></td><td><code>ShipmentType</code></td><td>Type to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of <code>ShipmentType</code> enum</td></tr>
</tbody></table>
</div>
<h2 id="events-13"><a class="header" href="#events-13">Events</a></h2>
<h3 id="shipmentcreated"><a class="header" href="#shipmentcreated">ShipmentCreated</a></h3>
<p><em>Emitted when shipment process is created</em></p>
<pre><code class="language-solidity">event ShipmentCreated(address indexed sender, uint256 indexed shipmentId, uint256 processId);
</code></pre>
<h3 id="shipmentrecreated"><a class="header" href="#shipmentrecreated">ShipmentRecreated</a></h3>
<p><em>Emitted when shipment process is recreated</em></p>
<pre><code class="language-solidity">event ShipmentRecreated(address indexed sender, uint256 indexed shipmentId, uint256 processId);
</code></pre>
<h3 id="shipmentdataverified"><a class="header" href="#shipmentdataverified">ShipmentDataVerified</a></h3>
<p><em>Emitted when shipment data is verified</em></p>
<pre><code class="language-solidity">event ShipmentDataVerified(address indexed sender, uint256 indexed shipmentId);
</code></pre>
<h3 id="shipmentdataconfirmed"><a class="header" href="#shipmentdataconfirmed">ShipmentDataConfirmed</a></h3>
<p><em>Emitted when shipment data is confirmed</em></p>
<pre><code class="language-solidity">event ShipmentDataConfirmed(address indexed sender, uint256 indexed shipmentId);
</code></pre>
<h3 id="shipmentapproved"><a class="header" href="#shipmentapproved">ShipmentApproved</a></h3>
<p><em>Emitted when shipment is signed</em></p>
<pre><code class="language-solidity">event ShipmentApproved(address indexed sender, uint256 indexed shipmentId);
</code></pre>
<h3 id="shipmentapprovalcomplete"><a class="header" href="#shipmentapprovalcomplete">ShipmentApprovalComplete</a></h3>
<p><em>Emitted when shipment collected enough approvals</em></p>
<pre><code class="language-solidity">event ShipmentApprovalComplete(uint256 indexed shipmentId);
</code></pre>
<h3 id="shipmentrejected"><a class="header" href="#shipmentrejected">ShipmentRejected</a></h3>
<p><em>Emitted when shipment is rejected</em></p>
<pre><code class="language-solidity">event ShipmentRejected(address indexed sender, uint256 indexed shipmentId);
</code></pre>
<h3 id="tokenizablebarsset"><a class="header" href="#tokenizablebarsset">TokenizableBarsSet</a></h3>
<p><em>Emitted when tokenizable bars are set</em></p>
<pre><code class="language-solidity">event TokenizableBarsSet(address indexed sender, uint256 indexed shipmentId, uint256[] tokenizableBarIds);
</code></pre>
<h2 id="errors-17"><a class="header" href="#errors-17">Errors</a></h2>
<h3 id="invalidshipmentstatus"><a class="header" href="#invalidshipmentstatus">InvalidShipmentStatus</a></h3>
<p><em>Invalid shipment status for shipment identified with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">error InvalidShipmentStatus(uint256 shipmentId, ShipmentStatus expectedStatus, ShipmentStatus currentStatus);
</code></pre>
<h3 id="depositorzeroaddress"><a class="header" href="#depositorzeroaddress">DepositorZeroAddress</a></h3>
<p><em>Depositor address is zero</em></p>
<pre><code class="language-solidity">error DepositorZeroAddress();
</code></pre>
<h3 id="barsarrayempty"><a class="header" href="#barsarrayempty">BarsArrayEmpty</a></h3>
<p><em>Empty array of bars</em></p>
<pre><code class="language-solidity">error BarsArrayEmpty();
</code></pre>
<h3 id="metalsarrayempty"><a class="header" href="#metalsarrayempty">MetalsArrayEmpty</a></h3>
<p><em>Empty array of metals</em></p>
<pre><code class="language-solidity">error MetalsArrayEmpty();
</code></pre>
<h3 id="totalweightzero"><a class="header" href="#totalweightzero">TotalWeightZero</a></h3>
<p><em>Invalid total weight of the bars</em></p>
<pre><code class="language-solidity">error TotalWeightZero();
</code></pre>
<h3 id="invalidshipmenttype"><a class="header" href="#invalidshipmenttype">InvalidShipmentType</a></h3>
<p><em>Invalid shipment type</em></p>
<pre><code class="language-solidity">error InvalidShipmentType();
</code></pre>
<h3 id="invalidbarreservedstatus"><a class="header" href="#invalidbarreservedstatus">InvalidBarReservedStatus</a></h3>
<p><em>Bar with <code>barId</code> is not reserved</em></p>
<pre><code class="language-solidity">error InvalidBarReservedStatus(uint256 barId, bool expectedStatus);
</code></pre>
<h3 id="filerevealfailed"><a class="header" href="#filerevealfailed">FileRevealFailed</a></h3>
<p><em>File commit and reveal comparison failed</em></p>
<pre><code class="language-solidity">error FileRevealFailed();
</code></pre>
<h3 id="baralreadyregistered"><a class="header" href="#baralreadyregistered">BarAlreadyRegistered</a></h3>
<p><em>Bar is already registered in shipment identified with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">error BarAlreadyRegistered(uint256 shipmentId);
</code></pre>
<h3 id="certnotownedbyproperwallet"><a class="header" href="#certnotownedbyproperwallet">CertNotOwnedByProperWallet</a></h3>
<p><em>Bar with <code>barId</code> does not exist</em></p>
<pre><code class="language-solidity">error CertNotOwnedByProperWallet(uint256 barId);
</code></pre>
<h3 id="shipmentnotexist"><a class="header" href="#shipmentnotexist">ShipmentNotExist</a></h3>
<p><em>Shipment with <code>shipmentId</code> does not exist</em></p>
<pre><code class="language-solidity">error ShipmentNotExist(uint256 shipmentId);
</code></pre>
<h3 id="barnotinshipment"><a class="header" href="#barnotinshipment">BarNotInShipment</a></h3>
<p><em>Bar with <code>barId</code> is not in shipment identified with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">error BarNotInShipment(uint256 shipmentId, uint256 barId);
</code></pre>
<h3 id="tokenizablebarsalreadyset"><a class="header" href="#tokenizablebarsalreadyset">TokenizableBarsAlreadySet</a></h3>
<p><em>Tokenizable bars are already set for the shipment</em></p>
<pre><code class="language-solidity">error TokenizableBarsAlreadySet();
</code></pre>
<h2 id="structs-8"><a class="header" href="#structs-8">Structs</a></h2>
<h3 id="shipmentparam"><a class="header" href="#shipmentparam">ShipmentParam</a></h3>
<p><em>Structure representing inbound shipment data passed as parameter of function call</em></p>
<pre><code class="language-solidity">struct ShipmentParam {
    address depositor;
    uint40 vaultId;
    bool fullyTokenizable;
    bytes32 filesReveal;
    string folderCID;
    ShipmentType shipmentType;
    ShipmentTypes.MetalParam[] metals;
    uint256[] barIds;
}
</code></pre>
<h2 id="enums-7"><a class="header" href="#enums-7">Enums</a></h2>
<h3 id="shipmentstatus"><a class="header" href="#shipmentstatus">ShipmentStatus</a></h3>
<p><em>Possible shipment statuses</em></p>
<pre><code class="language-solidity">enum ShipmentStatus {
    NONE,
    CREATED,
    CONFIRMED,
    VERIFIED,
    APPROVED,
    REJECTED
}
</code></pre>
<h3 id="shipmenttype"><a class="header" href="#shipmenttype">ShipmentType</a></h3>
<p><em>Possible shipment types</em></p>
<pre><code class="language-solidity">enum ShipmentType {
    NONE,
    REGULAR,
    CHANGE_VAULT
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inboundshipmentstorage-2"><a class="header" href="#inboundshipmentstorage-2">InboundShipmentStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/inbound/InboundShipmentStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/shipment/inbound/InboundShipmentStorage.sol//contracts/shipment/BaseShipmentStorage.sol/abstract.BaseShipmentStorage.html">BaseShipmentStorage</a></p>
<p><em>Storage contract for inbound shipments data. Does not impose any restrictions or checks on reading the data.
A contract using it should do the necessary checks on values and integrity of the data received.</em></p>
<h2 id="state-variables-25"><a class="header" href="#state-variables-25">State Variables</a></h2>
<h3 id="_shipments"><a class="header" href="#_shipments">_shipments</a></h3>
<p><em>Mapping of shipment identifier to shipments data</em></p>
<pre><code class="language-solidity">mapping(uint256 shipmentId =&gt; Shipment shipment) private _shipments;
</code></pre>
<h3 id="_filescommits"><a class="header" href="#_filescommits">_filesCommits</a></h3>
<p><em>Mapping of shipment identifier to files commit</em></p>
<pre><code class="language-solidity">mapping(uint256 shipmentId =&gt; bytes32 filesCommit) private _filesCommits;
</code></pre>
<h2 id="functions-33"><a class="header" href="#functions-33">Functions</a></h2>
<h3 id="constructor-28"><a class="header" href="#constructor-28">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) BaseShipmentStorage(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the storage</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="createshipment-1"><a class="header" href="#createshipment-1">createShipment</a></h3>
<p><em>Creates a new <code>Shipment</code> and stores files checksum for it
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function createShipment(uint32 processId_, bytes32 filesCommit_, uint8 status_)
    external
    onlyAuthorized
    returns (uint256 shipmentId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>processId_</code></td><td><code>uint32</code></td><td>Process identifier</td></tr>
<tr><td><code>filesCommit_</code></td><td><code>bytes32</code></td><td>Hashed checksum of the files containing shipment data</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="updateshipment"><a class="header" href="#updateshipment">updateShipment</a></h3>
<p><em>Updates a <code>Shipment</code> by updating the files checksum
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function updateShipment(uint256 shipmentId, uint32 processId_, bytes32 filesCommit_, uint8 status_)
    external
    onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>processId_</code></td><td><code>uint32</code></td><td>Process identifier</td></tr>
<tr><td><code>filesCommit_</code></td><td><code>bytes32</code></td><td>Hashed checksum of the files containing shipment data</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="setshipmentdata"><a class="header" href="#setshipmentdata">setShipmentData</a></h3>
<p><em>Sets the data related to the shipment with <code>shipmentId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setShipmentData(uint256 shipmentId, Shipment calldata shipment_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>shipment_</code></td><td><code>Shipment</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<h3 id="settokenizablebarids"><a class="header" href="#settokenizablebarids">setTokenizableBarIds</a></h3>
<p><em>Sets the tokenizable bars related data for the shipment
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setTokenizableBarIds(uint256 shipmentId, uint256[] calldata barIds_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the tokenizable bars in the shipment</td></tr>
</tbody></table>
</div>
<h3 id="setstatus-4"><a class="header" href="#setstatus-4">setStatus</a></h3>
<p><em>Sets status of the shipment
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setStatus(uint256 shipmentId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="shipment"><a class="header" href="#shipment">shipment</a></h3>
<p><em>Returns shipment data if shipment exists, otherwise reverts</em></p>
<pre><code class="language-solidity">function shipment(uint256 shipmentId) external view returns (Shipment memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Shipment</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<h3 id="depositor"><a class="header" href="#depositor">depositor</a></h3>
<p><em>Returns the depositor of the shipment</em></p>
<pre><code class="language-solidity">function depositor(uint256 shipmentId) public view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Depositor of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="processid-4"><a class="header" href="#processid-4">processId</a></h3>
<p><em>Returns process identifier for shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function processId(uint256 shipmentId) external view returns (uint32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint32</code></td><td>Process identifier</td></tr>
</tbody></table>
</div>
<h3 id="status-7"><a class="header" href="#status-7">status</a></h3>
<p><em>Returns shipment status for shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function status(uint256 shipmentId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Shipment status</td></tr>
</tbody></table>
</div>
<h3 id="statusbatch"><a class="header" href="#statusbatch">statusBatch</a></h3>
<p><em>Return statuses of the shipments with <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function statusBatch(uint256[] memory shipmentIds) external view returns (uint8[] memory statuses);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>statuses</code></td><td><code>uint8[]</code></td><td>Statuses of the shipments</td></tr>
</tbody></table>
</div>
<h3 id="shipmenttype-1"><a class="header" href="#shipmenttype-1">shipmentType</a></h3>
<p><em>Returns the shipment type for shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function shipmentType(uint256 shipmentId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Shipment type</td></tr>
</tbody></table>
</div>
<h3 id="shipmenttypebatch"><a class="header" href="#shipmenttypebatch">shipmentTypeBatch</a></h3>
<p><em>Returns the batch of the shipment types for <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function shipmentTypeBatch(uint256[] memory shipmentIds) external view returns (uint8[] memory types);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>types</code></td><td><code>uint8[]</code></td><td>Array of the shipment types</td></tr>
</tbody></table>
</div>
<h3 id="vaultid"><a class="header" href="#vaultid">vaultId</a></h3>
<p><em>Returns the vault identifier for the shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function vaultId(uint256 shipmentId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>vaultId Identifier of the vault</td></tr>
</tbody></table>
</div>
<h3 id="foldercid"><a class="header" href="#foldercid">folderCID</a></h3>
<p><em>Returns the folder CID associated with shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function folderCID(uint256 shipmentId) external view returns (string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Folder CID</td></tr>
</tbody></table>
</div>
<h3 id="metals"><a class="header" href="#metals">metals</a></h3>
<p><em>Returns the metals in the shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function metals(uint256 shipmentId) public view returns (ShipmentTypes.Metal[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>ShipmentTypes.Metal[]</code></td><td>Metals in the shipment</td></tr>
</tbody></table>
</div>
<h3 id="metalslengthbatch"><a class="header" href="#metalslengthbatch">metalsLengthBatch</a></h3>
<p><em>Returns the batch of the metals lengths for <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function metalsLengthBatch(uint256[] memory shipmentIds) external view returns (uint256[] memory lengths);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lengths</code></td><td><code>uint256[]</code></td><td>Array of the metals lengths</td></tr>
</tbody></table>
</div>
<h3 id="barids"><a class="header" href="#barids">barIds</a></h3>
<p><em>Returns the bars in the shipment</em></p>
<pre><code class="language-solidity">function barIds(uint256 shipmentId) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
</tbody></table>
</div>
<h3 id="tokenizablebarids"><a class="header" href="#tokenizablebarids">tokenizableBarIds</a></h3>
<p><em>Returns the tokenizable bars identifiers for the shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function tokenizableBarIds(uint256 shipmentId) public view virtual returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>barIds Identifiers of the tokenizable bars</td></tr>
</tbody></table>
</div>
<h3 id="tokenizablebaridslength"><a class="header" href="#tokenizablebaridslength">tokenizableBarIdsLength</a></h3>
<p><em>Returns the length of the tokenizable bars identifiers for the shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function tokenizableBarIdsLength(uint256 shipmentId) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Length of the tokenizable bars identifiers</td></tr>
</tbody></table>
</div>
<h3 id="tokenizablebaridsbatch"><a class="header" href="#tokenizablebaridsbatch">tokenizableBarIdsBatch</a></h3>
<p><em>Returns the batch of the bars identifiers for shipments with <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function tokenizableBarIdsBatch(uint256[] memory shipmentIds) external view returns (uint256[] memory barIds_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Array of the bars identifiers</td></tr>
</tbody></table>
</div>
<h3 id="tokenizablebaridsset"><a class="header" href="#tokenizablebaridsset">tokenizableBarIdsSet</a></h3>
<p><em>Returns if tokenized bars are set</em></p>
<pre><code class="language-solidity">function tokenizableBarIdsSet(uint256 shipmentId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if tokenized bars are set</td></tr>
</tbody></table>
</div>
<h3 id="depositorandmetals"><a class="header" href="#depositorandmetals">depositorAndMetals</a></h3>
<p><em>Returns the depositor and metals in the shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function depositorAndMetals(uint256 shipmentId)
    external
    view
    returns (address depositor_, ShipmentTypes.Metal[] memory metals_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>depositor_</code></td><td><code>address</code></td><td>Depositor of the shipment</td></tr>
<tr><td><code>metals_</code></td><td><code>ShipmentTypes.Metal[]</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="filescommit"><a class="header" href="#filescommit">filesCommit</a></h3>
<p><em>Returns the files commit for the shipment with <code>shipmentId</code></em></p>
<pre><code class="language-solidity">function filesCommit(uint256 shipmentId) external view returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Files commit</td></tr>
</tbody></table>
</div>
<h3 id="_setinitshipmentdata"><a class="header" href="#_setinitshipmentdata">_setInitShipmentData</a></h3>
<p><em>Sets the initial shipment data</em></p>
<pre><code class="language-solidity">function _setInitShipmentData(uint256 shipmentId_, uint32 processId_, bytes32 filesCommit_, uint8 status_) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId_</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>processId_</code></td><td><code>uint32</code></td><td>Process identifier</td></tr>
<tr><td><code>filesCommit_</code></td><td><code>bytes32</code></td><td>Hashed checksum of the files containing shipment data</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>Status of the shipment</td></tr>
</tbody></table>
</div>
<h2 id="structs-9"><a class="header" href="#structs-9">Structs</a></h2>
<h3 id="shipment-1"><a class="header" href="#shipment-1">Shipment</a></h3>
<p><em>Structure representing shipment data</em></p>
<pre><code class="language-solidity">struct Shipment {
    address depositor;
    uint40 vaultId;
    uint32 processId;
    uint8 status;
    uint8 shipmentType;
    bool fullyTokenizable;
    string folderCID;
    ShipmentTypes.Metal[] metals;
    uint256[] barIds;
    uint256[] tokenizableBarIds;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-13"><a class="header" href="#contents-13">Contents</a></h1>
<ul>
<li><a href="contracts/shipment/outbound/OutboundShipmentProcessor.sol/contract.OutboundShipmentProcessor.html">OutboundShipmentProcessor</a></li>
<li><a href="contracts/shipment/outbound/OutboundShipmentStorage.sol/contract.OutboundShipmentStorage.html">OutboundShipmentStorage</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="outboundshipmentprocessor"><a class="header" href="#outboundshipmentprocessor">OutboundShipmentProcessor</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/outbound/OutboundShipmentProcessor.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC2771Context</p>
<p><em>Contract for managing outbound shipment process. It's designed to be a wrapper around processes
defined in <code>ProcessFactory</code> and managed by <code>ProcessManager</code> contract. It's responsible
for following the steps defined per process and provide high-level updates of the shipment
relevant data. It uses <code>OutboundShipmentStorage</code> to store the shipment data. This way, in case
process changes, this contract can be re-deployed with a new implementation and with the
data still being available.
The following are the intended function calls in order to execute the shipment process:
1.<code>createShipment</code> / <code>recreateShipment</code> -&gt; TM
2.<code>approveShipment</code> -&gt; WA
-.<code>rejectShipment</code> -&gt; Any of the above roles depending on the stage of the process</em></p>
<h2 id="state-variables-26"><a class="header" href="#state-variables-26">State Variables</a></h2>
<h3 id="_processmanager-5"><a class="header" href="#_processmanager-5">_processManager</a></h3>
<p><em><code>ProcessManager</code> contract</em></p>
<pre><code class="language-solidity">ProcessManager private immutable _processManager;
</code></pre>
<h3 id="_certscollection-3"><a class="header" href="#_certscollection-3">_certsCollection</a></h3>
<p><em><code>Certificates</code> contract</em></p>
<pre><code class="language-solidity">Certificates private immutable _certsCollection;
</code></pre>
<h3 id="_walletmanager-3"><a class="header" href="#_walletmanager-3">_walletManager</a></h3>
<p><em><code>WalletManager</code> contract</em></p>
<pre><code class="language-solidity">WalletManager private immutable _walletManager;
</code></pre>
<h3 id="_outboundshipmentstorage-1"><a class="header" href="#_outboundshipmentstorage-1">_outboundShipmentStorage</a></h3>
<p><em><code>OutboundShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">OutboundShipmentStorage private immutable _outboundShipmentStorage;
</code></pre>
<h3 id="_sharedshipmentstorage-1"><a class="header" href="#_sharedshipmentstorage-1">_sharedShipmentStorage</a></h3>
<p><em><code>SharedShipmentStorage</code> contract</em></p>
<pre><code class="language-solidity">SharedShipmentStorage private immutable _sharedShipmentStorage;
</code></pre>
<h2 id="functions-34"><a class="header" href="#functions-34">Functions</a></h2>
<h3 id="shipmentexists-1"><a class="header" href="#shipmentexists-1">shipmentExists</a></h3>
<pre><code class="language-solidity">modifier shipmentExists(uint256 shipmentId);
</code></pre>
<h3 id="validshipment-1"><a class="header" href="#validshipment-1">validShipment</a></h3>
<pre><code class="language-solidity">modifier validShipment(ShipmentParam calldata shipment);
</code></pre>
<h3 id="validstatus-4"><a class="header" href="#validstatus-4">validStatus</a></h3>
<pre><code class="language-solidity">modifier validStatus(uint256 shipmentId, ShipmentStatus expectedStatus);
</code></pre>
<h3 id="constructor-29"><a class="header" href="#constructor-29">constructor</a></h3>
<pre><code class="language-solidity">constructor(
    address trustedForwarder_,
    address processManager_,
    address certsCollection_,
    address walletManager_,
    address outboundShipmentStorage_,
    address sharedShipmentStorage_
) ERC2771Context(trustedForwarder_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trustedForwarder_</code></td><td><code>address</code></td><td>Trusted forwarder contract address</td></tr>
<tr><td><code>processManager_</code></td><td><code>address</code></td><td><code>ProcessManager</code> contract address</td></tr>
<tr><td><code>certsCollection_</code></td><td><code>address</code></td><td><code>Certificates</code> contract address</td></tr>
<tr><td><code>walletManager_</code></td><td><code>address</code></td><td><code>WalletManager</code> contract address</td></tr>
<tr><td><code>outboundShipmentStorage_</code></td><td><code>address</code></td><td><code>OutboundShipmentStorage</code> contract address</td></tr>
<tr><td><code>sharedShipmentStorage_</code></td><td><code>address</code></td><td><code>SharedShipmentStorage</code> contract address</td></tr>
</tbody></table>
</div>
<h3 id="createshipment-2"><a class="header" href="#createshipment-2">createShipment</a></h3>
<p><em>Creates a new outbound shipment</em></p>
<pre><code class="language-solidity">function createShipment(ShipmentParam calldata shipment) external validShipment(shipment);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipment</code></td><td><code>ShipmentParam</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<h3 id="recreateshipment-1"><a class="header" href="#recreateshipment-1">recreateShipment</a></h3>
<p><em>Recreates the outbound shipment</em></p>
<pre><code class="language-solidity">function recreateShipment(uint256 shipmentId, ShipmentParam calldata updatedShipment)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.REJECTED)
    validShipment(updatedShipment);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>updatedShipment</code></td><td><code>ShipmentParam</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<h3 id="approveshipment-1"><a class="header" href="#approveshipment-1">approveShipment</a></h3>
<p><em>Completes the shipment by setting the file CIDs</em></p>
<pre><code class="language-solidity">function approveShipment(uint256 shipmentId)
    external
    shipmentExists(shipmentId)
    validStatus(shipmentId, ShipmentStatus.CREATED);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="rejectshipment-1"><a class="header" href="#rejectshipment-1">rejectShipment</a></h3>
<p><em>Rejects the shipment</em></p>
<pre><code class="language-solidity">function rejectShipment(uint256 shipmentId) external shipmentExists(shipmentId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="_createshipmentdata-1"><a class="header" href="#_createshipmentdata-1">_createShipmentData</a></h3>
<p><em>Creates a new <code>OutboundShipmentStorage.Shipment</code> structure</em></p>
<pre><code class="language-solidity">function _createShipmentData(ShipmentParam memory shipment, uint32 processId)
    private
    pure
    returns (OutboundShipmentStorage.Shipment memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipment</code></td><td><code>ShipmentParam</code></td><td>Shipment data</td></tr>
<tr><td><code>processId</code></td><td><code>uint32</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>OutboundShipmentStorage.Shipment</code></td><td><code>OutboundShipmentStorage</code> structure</td></tr>
</tbody></table>
</div>
<h3 id="_signprocess-3"><a class="header" href="#_signprocess-3">_signProcess</a></h3>
<p><em>Sign the process for the request if possible and return whether the step was updated</em></p>
<pre><code class="language-solidity">function _signProcess(address signer, uint256 requestId) private returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>Address of the signer</td></tr>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>Identifier of the process</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag whether the step was updated after signing</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8status-3"><a class="header" href="#_asuint8status-3">_asUint8Status</a></h3>
<p><em>Converts <code>ShipmentStatus</code> to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8Status(ShipmentStatus status_) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status_</code></td><td><code>ShipmentStatus</code></td><td>Status to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of <code>ShipmentStatus</code> enum</td></tr>
</tbody></table>
</div>
<h3 id="_asuint8type-1"><a class="header" href="#_asuint8type-1">_asUint8Type</a></h3>
<p><em>Converts <code>ShipmentType</code> to <code>uint8</code></em></p>
<pre><code class="language-solidity">function _asUint8Type(ShipmentType shipmentType_) private pure returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentType_</code></td><td><code>ShipmentType</code></td><td>Shipment type to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td><code>uint8</code> representation of <code>ShipmentType</code> enum</td></tr>
</tbody></table>
</div>
<h2 id="events-14"><a class="header" href="#events-14">Events</a></h2>
<h3 id="requestcreated-2"><a class="header" href="#requestcreated-2">RequestCreated</a></h3>
<p><em>Triggered when request is created</em></p>
<pre><code class="language-solidity">event RequestCreated(address indexed sender, uint256 indexed requestId, uint256 indexed processId);
</code></pre>
<h3 id="shipmentrecreated-1"><a class="header" href="#shipmentrecreated-1">ShipmentRecreated</a></h3>
<p><em>Triggered when shipment is recreated</em></p>
<pre><code class="language-solidity">event ShipmentRecreated(address indexed sender, uint256 indexed shipmentId, uint256 indexed processId);
</code></pre>
<h3 id="shipmentcompleted"><a class="header" href="#shipmentcompleted">ShipmentCompleted</a></h3>
<p><em>Triggered when shipment is completed</em></p>
<pre><code class="language-solidity">event ShipmentCompleted(address indexed sender, uint256 indexed shipmentId);
</code></pre>
<h3 id="shipmentrejected-1"><a class="header" href="#shipmentrejected-1">ShipmentRejected</a></h3>
<p><em>Triggered when shipment is rejected</em></p>
<pre><code class="language-solidity">event ShipmentRejected(address indexed sender, uint256 indexed shipmentId);
</code></pre>
<h2 id="errors-18"><a class="header" href="#errors-18">Errors</a></h2>
<h3 id="barsarrayempty-1"><a class="header" href="#barsarrayempty-1">BarsArrayEmpty</a></h3>
<p><em>Array of bars is empty</em></p>
<pre><code class="language-solidity">error BarsArrayEmpty();
</code></pre>
<h3 id="invalidshipmenttype-1"><a class="header" href="#invalidshipmenttype-1">InvalidShipmentType</a></h3>
<p><em>Invalid shipment type</em></p>
<pre><code class="language-solidity">error InvalidShipmentType();
</code></pre>
<h3 id="invalidcertowner"><a class="header" href="#invalidcertowner">InvalidCertOwner</a></h3>
<p><em>Invalid certificate owner for <code>shipmentType</code></em></p>
<pre><code class="language-solidity">error InvalidCertOwner(uint256 barId, address actualOwner, address expectedOwner);
</code></pre>
<h3 id="baralreadypartofshipment"><a class="header" href="#baralreadypartofshipment">BarAlreadyPartOfShipment</a></h3>
<p><em>Bar is already part of some shipment</em></p>
<pre><code class="language-solidity">error BarAlreadyPartOfShipment(uint256 shipmentId);
</code></pre>
<h3 id="shipmentnotexist-1"><a class="header" href="#shipmentnotexist-1">ShipmentNotExist</a></h3>
<p><em>Shipment does not exist</em></p>
<pre><code class="language-solidity">error ShipmentNotExist(uint256 shipmentId);
</code></pre>
<h3 id="invalidshipmentstatus-1"><a class="header" href="#invalidshipmentstatus-1">InvalidShipmentStatus</a></h3>
<p><em>Invalid shipment status</em></p>
<pre><code class="language-solidity">error InvalidShipmentStatus(uint256 shipmentId, ShipmentStatus expectedStatus, ShipmentStatus actualStatus);
</code></pre>
<h3 id="barreserved"><a class="header" href="#barreserved">BarReserved</a></h3>
<p><em>Bar is already reserved</em></p>
<pre><code class="language-solidity">error BarReserved(uint256 barId);
</code></pre>
<h2 id="structs-10"><a class="header" href="#structs-10">Structs</a></h2>
<h3 id="shipmentparam-1"><a class="header" href="#shipmentparam-1">ShipmentParam</a></h3>
<p><em>Structure representing outbound shipment data passed as parameter of function call</em></p>
<pre><code class="language-solidity">struct ShipmentParam {
    address redeemer;
    ShipmentType shipmentType;
    ShipmentTypes.MetalParam[] metals;
    bytes32[] refTxHashes;
    uint256[] barIds;
}
</code></pre>
<h2 id="enums-8"><a class="header" href="#enums-8">Enums</a></h2>
<h3 id="shipmentstatus-1"><a class="header" href="#shipmentstatus-1">ShipmentStatus</a></h3>
<p><em>Possible shipment statuses</em></p>
<pre><code class="language-solidity">enum ShipmentStatus {
    NONE,
    CREATED,
    APPROVED,
    REJECTED
}
</code></pre>
<h3 id="shipmenttype-2"><a class="header" href="#shipmenttype-2">ShipmentType</a></h3>
<p><em>Possible outbound shipment types</em></p>
<pre><code class="language-solidity">enum ShipmentType {
    NONE,
    REDEEM_TOKENIZED,
    REDEEM_USER_OWNED,
    CHANGE_VAULT
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="outboundshipmentstorage"><a class="header" href="#outboundshipmentstorage">OutboundShipmentStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/outbound/OutboundShipmentStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/shipment/outbound/OutboundShipmentStorage.sol//contracts/shipment/BaseShipmentStorage.sol/abstract.BaseShipmentStorage.html">BaseShipmentStorage</a></p>
<p><em>Storage contract for outbound shipments data. Does not impose any restrictions or checks on reading the data.
A contract using it should do the necessary checks on values and integrity of the data received.</em></p>
<h2 id="state-variables-27"><a class="header" href="#state-variables-27">State Variables</a></h2>
<h3 id="_shipments-1"><a class="header" href="#_shipments-1">_shipments</a></h3>
<p><em>Mapping of shipment identifier to its data</em></p>
<pre><code class="language-solidity">mapping(uint256 shipmentId =&gt; Shipment shipment) private _shipments;
</code></pre>
<h2 id="functions-35"><a class="header" href="#functions-35">Functions</a></h2>
<h3 id="constructor-30"><a class="header" href="#constructor-30">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) BaseShipmentStorage(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="createshipment-3"><a class="header" href="#createshipment-3">createShipment</a></h3>
<p><em>Creates a new <code>Shipment</code> and stores it in the storage
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function createShipment(Shipment calldata shipment_) external onlyAuthorized returns (uint256 shipmentId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipment_</code></td><td><code>Shipment</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="updateshipment-1"><a class="header" href="#updateshipment-1">updateShipment</a></h3>
<p><em>Updates a <code>Shipment</code> with <code>shipmentId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function updateShipment(uint256 shipmentId, Shipment calldata shipment_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>shipment_</code></td><td><code>Shipment</code></td><td>Shipment data</td></tr>
</tbody></table>
</div>
<h3 id="setstatus-5"><a class="header" href="#setstatus-5">setStatus</a></h3>
<p><em>Sets a new status for shipment with <code>shipmentId</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setStatus(uint256 shipmentId, uint8 status_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>status_</code></td><td><code>uint8</code></td><td>New status of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="redeemer"><a class="header" href="#redeemer">redeemer</a></h3>
<p><em>Returns the redeemer of the shipment</em></p>
<pre><code class="language-solidity">function redeemer(uint256 shipmentId) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Redeemer of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="shipmenttype-3"><a class="header" href="#shipmenttype-3">shipmentType</a></h3>
<p><em>Returns shipment type</em></p>
<pre><code class="language-solidity">function shipmentType(uint256 shipmentId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Shipment type</td></tr>
</tbody></table>
</div>
<h3 id="status-8"><a class="header" href="#status-8">status</a></h3>
<p><em>Returns the shipment status</em></p>
<pre><code class="language-solidity">function status(uint256 shipmentId) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Shipment status</td></tr>
</tbody></table>
</div>
<h3 id="statusbatch-1"><a class="header" href="#statusbatch-1">statusBatch</a></h3>
<p><em>Return statuses of the shipments</em></p>
<pre><code class="language-solidity">function statusBatch(uint256[] memory shipmentIds) external view returns (uint8[] memory statuses);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>statuses</code></td><td><code>uint8[]</code></td><td>Statuses of the shipments</td></tr>
</tbody></table>
</div>
<h3 id="processid-5"><a class="header" href="#processid-5">processId</a></h3>
<p><em>Returns the process identifier of the shipment</em></p>
<pre><code class="language-solidity">function processId(uint256 shipmentId) external view returns (uint40);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint40</code></td><td>Process identifier</td></tr>
</tbody></table>
</div>
<h3 id="barids-1"><a class="header" href="#barids-1">barIds</a></h3>
<p><em>Returns the bars in the shipment</em></p>
<pre><code class="language-solidity">function barIds(uint256 shipmentId) public view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
</tbody></table>
</div>
<h3 id="baridsbatch"><a class="header" href="#baridsbatch">barIdsBatch</a></h3>
<p><em>Returns the batch of the bars identifiers for shipments with <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function barIdsBatch(uint256[] memory shipmentIds) external view returns (uint256[] memory barIds_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Array of the bars identifiers</td></tr>
</tbody></table>
</div>
<h3 id="metals-1"><a class="header" href="#metals-1">metals</a></h3>
<p><em>Returns the metals in the shipment</em></p>
<pre><code class="language-solidity">function metals(uint256 shipmentId) external view returns (ShipmentTypes.Metal[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>ShipmentTypes.Metal[]</code></td><td>Metals in the shipment</td></tr>
</tbody></table>
</div>
<h3 id="metalslengthbatch-1"><a class="header" href="#metalslengthbatch-1">metalsLengthBatch</a></h3>
<p><em>Returns the batch of the metals lengths for <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function metalsLengthBatch(uint256[] memory shipmentIds) external view returns (uint256[] memory lengths);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lengths</code></td><td><code>uint256[]</code></td><td>Array of the metals lengths</td></tr>
</tbody></table>
</div>
<h3 id="shipmenttypebatch-1"><a class="header" href="#shipmenttypebatch-1">shipmentTypeBatch</a></h3>
<p><em>Returns the batch of the shipment types for <code>shipmentIds</code></em></p>
<pre><code class="language-solidity">function shipmentTypeBatch(uint256[] memory shipmentIds) external view returns (uint8[] memory types_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>types_</code></td><td><code>uint8[]</code></td><td>Array of the shipment types</td></tr>
</tbody></table>
</div>
<h3 id="redeemperandmetals"><a class="header" href="#redeemperandmetals">redeemperAndMetals</a></h3>
<p><em>Returns redeemer and metals in the shipment</em></p>
<pre><code class="language-solidity">function redeemperAndMetals(uint256 shipmentId)
    external
    view
    returns (address redeemer_, ShipmentTypes.Metal[] memory metals_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>redeemer_</code></td><td><code>address</code></td><td>Redeemer of the shipment</td></tr>
<tr><td><code>metals_</code></td><td><code>ShipmentTypes.Metal[]</code></td><td></td></tr>
</tbody></table>
</div>
<h2 id="structs-11"><a class="header" href="#structs-11">Structs</a></h2>
<h3 id="shipment-2"><a class="header" href="#shipment-2">Shipment</a></h3>
<p><em>Structure representing shipment data</em></p>
<pre><code class="language-solidity">struct Shipment {
    address redeemer;
    uint32 processId;
    uint8 status;
    uint8 shipmentType;
    ShipmentTypes.Metal[] metals;
    bytes32[] refTxHashes;
    uint256[] barIds;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseshipmentstorage"><a class="header" href="#baseshipmentstorage">BaseShipmentStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/BaseShipmentStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/shipment/BaseShipmentStorage.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<p><em>Base storage contract of the shipment data</em></p>
<h2 id="state-variables-28"><a class="header" href="#state-variables-28">State Variables</a></h2>
<h3 id="_shipmentcount"><a class="header" href="#_shipmentcount">_shipmentCount</a></h3>
<p><em>Count of the shipments</em></p>
<pre><code class="language-solidity">uint256 private _shipmentCount;
</code></pre>
<h3 id="_baridtoshipmentid"><a class="header" href="#_baridtoshipmentid">_barIdToShipmentId</a></h3>
<p><em>Mapping from bar identifier to shipment identifier</em></p>
<pre><code class="language-solidity">mapping(uint256 barId =&gt; uint256 shipmentId) private _barIdToShipmentId;
</code></pre>
<h2 id="functions-36"><a class="header" href="#functions-36">Functions</a></h2>
<h3 id="constructor-31"><a class="header" href="#constructor-31">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) CallGuard(owner_, authorized_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner of the contract</td></tr>
<tr><td><code>authorized_</code></td><td><code>address[]</code></td><td>List of authorized accounts</td></tr>
</tbody></table>
</div>
<h3 id="setshipmentforbars"><a class="header" href="#setshipmentforbars">setShipmentForBars</a></h3>
<p><em>Sets the shipment identifier for bars from <code>barIds</code>
Callable only by authorized accounts</em></p>
<pre><code class="language-solidity">function setShipmentForBars(uint256 shipmentId, uint256[] calldata barIds_) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
</tbody></table>
</div>
<h3 id="shipmentcount"><a class="header" href="#shipmentcount">shipmentCount</a></h3>
<p><em>Returns the count of the shipments</em></p>
<pre><code class="language-solidity">function shipmentCount() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Count of the shipments</td></tr>
</tbody></table>
</div>
<h3 id="shipmentexists-2"><a class="header" href="#shipmentexists-2">shipmentExists</a></h3>
<p><em>Returns flag if shipment exists</em></p>
<pre><code class="language-solidity">function shipmentExists(uint256 shipmentId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Flag if shipment exists</td></tr>
</tbody></table>
</div>
<h3 id="shipmentforbar"><a class="header" href="#shipmentforbar">shipmentForBar</a></h3>
<p><em>Returns the identifier of the shipment bar is associated with</em></p>
<pre><code class="language-solidity">function shipmentForBar(uint256 barId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barId</code></td><td><code>uint256</code></td><td>Identifier of the bar</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
</tbody></table>
</div>
<h3 id="shipmentforbarbatch"><a class="header" href="#shipmentforbarbatch">shipmentForBarBatch</a></h3>
<p><em>Returns the identifiers of the shipments bars are associated with</em></p>
<pre><code class="language-solidity">function shipmentForBarBatch(uint256[] calldata barIds_) external view returns (uint256[] memory shipmentIds);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the shipments</td></tr>
</tbody></table>
</div>
<h3 id="barsassociatedtoshipment"><a class="header" href="#barsassociatedtoshipment">barsAssociatedToShipment</a></h3>
<p><em>Returns if any bar from <code>barIds</code> is already associated to some shipment</em></p>
<pre><code class="language-solidity">function barsAssociatedToShipment(uint256[] memory barIds_)
    external
    view
    returns (bool associated, uint256 shipmentId_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>associated</code></td><td><code>bool</code></td><td>Flag if some bar is already registered</td></tr>
<tr><td><code>shipmentId_</code></td><td><code>uint256</code></td><td>Identifier of the shipment bar is associated with</td></tr>
</tbody></table>
</div>
<h3 id="_inclementshipmentcount"><a class="header" href="#_inclementshipmentcount">_inclementShipmentCount</a></h3>
<p><em>Increments the count of the shipments</em></p>
<pre><code class="language-solidity">function _inclementShipmentCount() internal returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>New count of the shipments</td></tr>
</tbody></table>
</div>
<h3 id="_setshipmentforbars"><a class="header" href="#_setshipmentforbars">_setShipmentForBars</a></h3>
<p><em>Sets the shipment identifier for bars from <code>barIds</code></em></p>
<pre><code class="language-solidity">function _setShipmentForBars(uint256 shipmentId, uint256[] calldata barIds_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shipmentId</code></td><td><code>uint256</code></td><td>Identifier of the shipment</td></tr>
<tr><td><code>barIds_</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="sharedshipmentstorage-1"><a class="header" href="#sharedshipmentstorage-1">SharedShipmentStorage</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/SharedShipmentStorage.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/shipment/SharedShipmentStorage.sol//contracts/common/CallGuard.sol/abstract.CallGuard.html">CallGuard</a></p>
<p><em>Shared storage contract of the shipment data</em></p>
<h2 id="state-variables-29"><a class="header" href="#state-variables-29">State Variables</a></h2>
<h3 id="_reservedbars"><a class="header" href="#_reservedbars">_reservedBars</a></h3>
<p><em>Mapping containing information about reserved tokens</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; bool) private _reservedBars;
</code></pre>
<h2 id="functions-37"><a class="header" href="#functions-37">Functions</a></h2>
<h3 id="constructor-32"><a class="header" href="#constructor-32">constructor</a></h3>
<pre><code class="language-solidity">constructor(address owner_, address[] memory authorized_) CallGuard(owner_, authorized_);
</code></pre>
<h3 id="barreserved-1"><a class="header" href="#barreserved-1">barReserved</a></h3>
<p><em>Checks if the token is reserved</em></p>
<pre><code class="language-solidity">function barReserved(uint256 barId) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barId</code></td><td><code>uint256</code></td><td>Identifier of the bar</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the token is reserved, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="setbarsreserved"><a class="header" href="#setbarsreserved">setBarsReserved</a></h3>
<p><em>Reserves the bars with <code>barIds</code> so they cannot be used in other shipments</em></p>
<pre><code class="language-solidity">function setBarsReserved(uint256[] calldata barIds, bool reserved) external onlyAuthorized;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barIds</code></td><td><code>uint256[]</code></td><td>Identifier of the token</td></tr>
<tr><td><code>reserved</code></td><td><code>bool</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="barwithreservestatus"><a class="header" href="#barwithreservestatus">barWithReserveStatus</a></h3>
<p><em>Returns if there is any bar in <code>barIds</code> has <code>reservedStatus</code></em></p>
<pre><code class="language-solidity">function barWithReserveStatus(uint256[] calldata barIds, bool reservedStatus)
    external
    view
    returns (bool found, uint256 barId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>barIds</code></td><td><code>uint256[]</code></td><td>Identifiers of the bars</td></tr>
<tr><td><code>reservedStatus</code></td><td><code>bool</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>found</code></td><td><code>bool</code></td><td>Flag if some bar with defined status is found</td></tr>
<tr><td><code>barId</code></td><td><code>uint256</code></td><td>Identifier of the bar</td></tr>
</tbody></table>
</div>
<h2 id="events-15"><a class="header" href="#events-15">Events</a></h2>
<h3 id="baridsreservedset"><a class="header" href="#baridsreservedset">BarIdsReservedSet</a></h3>
<p><em>Emitted when the reserved status of the bars is changed</em></p>
<pre><code class="language-solidity">event BarIdsReservedSet(uint256[] barIds, bool reserved);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shipmenttypes"><a class="header" href="#shipmenttypes">ShipmentTypes</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/ShipmentTypes.sol">Git Source</a></p>
<p><em>Library containing types used in the Shipment contracts</em></p>
<h2 id="structs-12"><a class="header" href="#structs-12">Structs</a></h2>
<h3 id="metal"><a class="header" href="#metal">Metal</a></h3>
<p><em>Structure representing metal data agnostic to the underlaying metal type</em></p>
<pre><code class="language-solidity">struct Metal {
    uint8 metalId;
    uint48 weight;
}
</code></pre>
<h3 id="metalparam"><a class="header" href="#metalparam">MetalParam</a></h3>
<p><em>Structure representing metal data enforcing <code>MetalType</code> enum usage</em></p>
<pre><code class="language-solidity">struct MetalParam {
    MetalType metalId;
    uint48 weight;
}
</code></pre>
<h2 id="enums-9"><a class="header" href="#enums-9">Enums</a></h2>
<h3 id="metaltype"><a class="header" href="#metaltype">MetalType</a></h3>
<p><em>Possible metal types</em></p>
<pre><code class="language-solidity">enum MetalType {
    GOLD,
    SILVER
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shipmentutils"><a class="header" href="#shipmentutils">ShipmentUtils</a></h1>
<p><a href="https://github.com/MOONSTRUCK-team/agau-management/blob/f4738cc1bed2ef96985e8eed62680b201c03aebf/contracts/shipment/ShipmentUtils.sol">Git Source</a></p>
<p><em>Utility library of inline functions used in the Shipment contracts</em></p>
<h2 id="functions-38"><a class="header" href="#functions-38">Functions</a></h2>
<h3 id="tometalbatch"><a class="header" href="#tometalbatch">toMetalBatch</a></h3>
<p><em>Converts <code>ShipmentTypes.MetalPamam</code> array to <code>ShipmentTypes.Metal</code> array structure</em></p>
<pre><code class="language-solidity">function toMetalBatch(ShipmentTypes.MetalParam[] memory metals)
    internal
    pure
    returns (ShipmentTypes.Metal[] memory metalsData);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>metals</code></td><td><code>ShipmentTypes.MetalParam[]</code></td><td>Array of <code>ShipmentTypes.MetalParam</code> array</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>metalsData</code></td><td><code>ShipmentTypes.Metal[]</code></td><td>Array of <code>ShipmentTypes.Metal</code> array</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
